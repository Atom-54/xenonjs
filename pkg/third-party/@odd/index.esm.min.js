var f5=Object.create;var Am=Object.defineProperty;var l5=Object.getOwnPropertyDescriptor;var h5=Object.getOwnPropertyNames;var p5=Object.getPrototypeOf,d5=Object.prototype.hasOwnProperty;var m5=(r,e,t)=>e in r?Am(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Vu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var sb=(r,e)=>()=>(r&&(e=r(r=0)),e);var ce=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Et=(r,e)=>{for(var t in e)Am(r,t,{get:e[t],enumerable:!0})},y5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of h5(e))!d5.call(r,i)&&i!==t&&Am(r,i,{get:()=>e[i],enumerable:!(n=l5(e,i))||n.enumerable});return r};var Ze=(r,e,t)=>(t=r!=null?f5(p5(r)):{},y5(e||!r||!r.__esModule?Am(t,"default",{value:r,enumerable:!0}):t,r));var ab=(r,e,t)=>(m5(r,typeof e!="symbol"?e+"":e,t),t),QS=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var Xi=(r,e,t)=>(QS(r,e,"read from private field"),t?t.call(r):e.get(r)),Cm=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Im=(r,e,t,n)=>(QS(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);function eD(){throw new Error("setTimeout has not been defined")}function tD(){throw new Error("clearTimeout has not been defined")}function rD(r){if(Na===setTimeout)return setTimeout(r,0);if((Na===eD||!Na)&&setTimeout)return Na=setTimeout,setTimeout(r,0);try{return Na(r,0)}catch{try{return Na.call(null,r,0)}catch{return Na.call(this,r,0)}}}function g5(r){if(Ua===clearTimeout)return clearTimeout(r);if((Ua===tD||!Ua)&&clearTimeout)return Ua=clearTimeout,clearTimeout(r);try{return Ua(r)}catch{try{return Ua.call(null,r)}catch{return Ua.call(this,r)}}}function w5(){!If||!Hu||(If=!1,Hu.length?zs=Hu.concat(zs):Tm=-1,zs.length&&nD())}function nD(){if(!If){var r=rD(w5);If=!0;for(var e=zs.length;e;){for(Hu=zs,zs=[];++Tm<e;)Hu&&Hu[Tm].run();Tm=-1,e=zs.length}Hu=null,If=!1,g5(r)}}function b5(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];zs.push(new iD(r,e)),zs.length===1&&!If&&rD(nD)}function iD(r,e){this.fun=r,this.array=e}function Gu(){}function L5(r){throw new Error("process.binding is not supported")}function N5(){return"/"}function U5(r){throw new Error("process.chdir is not supported")}function M5(){return 0}function j5(r){var e=K5.call(Cf)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}function z5(){var r=new Date,e=r-$5;return e/1e3}var Na,Ua,zs,If,Hu,Tm,v5,_5,x5,E5,P5,S5,D5,A5,C5,I5,T5,k5,F5,R5,B5,O5,Cf,K5,$5,process,ZS,h=sb(()=>{Na=eD,Ua=tD;typeof globalThis.setTimeout=="function"&&(Na=setTimeout);typeof globalThis.clearTimeout=="function"&&(Ua=clearTimeout);zs=[],If=!1,Tm=-1;iD.prototype.run=function(){this.fun.apply(null,this.array)};v5="browser",_5="browser",x5=!0,E5={},P5=[],S5="",D5={},A5={},C5={};I5=Gu,T5=Gu,k5=Gu,F5=Gu,R5=Gu,B5=Gu,O5=Gu;Cf=globalThis.performance||{},K5=Cf.now||Cf.mozNow||Cf.msNow||Cf.oNow||Cf.webkitNow||function(){return new Date().getTime()};$5=new Date;process={nextTick:b5,title:v5,browser:x5,env:E5,argv:P5,version:S5,versions:D5,on:I5,addListener:T5,once:k5,off:F5,removeListener:R5,removeAllListeners:B5,emit:O5,binding:L5,cwd:N5,chdir:U5,umask:M5,hrtime:j5,platform:_5,release:A5,config:C5,uptime:z5},ZS={};Object.keys(ZS).forEach(r=>{let e=r.split("."),t=process;for(let n=0;n<e.length;n++){let i=e[n];n===e.length-1?t[i]=ZS[r]:t=t[i]||(t[i]={})}})});function uD(){cb=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)ss[e]=r[e],Qi[r.charCodeAt(e)]=e;Qi["-".charCodeAt(0)]=62,Qi["_".charCodeAt(0)]=63}function W5(r){cb||uD();var e,t,n,i,o,a,c=r.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[c-2]==="="?2:r[c-1]==="="?1:0,a=new q5(c*3/4-o),n=o>0?c-4:c;var f=0;for(e=0,t=0;e<n;e+=4,t+=3)i=Qi[r.charCodeAt(e)]<<18|Qi[r.charCodeAt(e+1)]<<12|Qi[r.charCodeAt(e+2)]<<6|Qi[r.charCodeAt(e+3)],a[f++]=i>>16&255,a[f++]=i>>8&255,a[f++]=i&255;return o===2?(i=Qi[r.charCodeAt(e)]<<2|Qi[r.charCodeAt(e+1)]>>4,a[f++]=i&255):o===1&&(i=Qi[r.charCodeAt(e)]<<10|Qi[r.charCodeAt(e+1)]<<4|Qi[r.charCodeAt(e+2)]>>2,a[f++]=i>>8&255,a[f++]=i&255),a}function V5(r){return ss[r>>18&63]+ss[r>>12&63]+ss[r>>6&63]+ss[r&63]}function H5(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(V5(n));return i.join("")}function oD(r){cb||uD();for(var e,t=r.length,n=t%3,i="",o=[],a=16383,c=0,f=t-n;c<f;c+=a)o.push(H5(r,c,c+a>f?f:c+a));return n===1?(e=r[t-1],i+=ss[e>>2],i+=ss[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=ss[e>>10],i+=ss[e>>4&63],i+=ss[e<<2&63],i+="="),o.push(i),o.join("")}function km(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function qs(r,e){if(km()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Buffer.prototype):(r===null&&(r=new Buffer(e)),r.length=e),r}function Buffer(r,e,t){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return fb(this,r)}return cD(this,r,e,t)}function cD(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?J5(r,e,t,n):typeof e=="string"?Y5(r,e,t):X5(r,e)}function fD(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function G5(r,e,t,n){return fD(e),e<=0?qs(r,e):t!==void 0?typeof n=="string"?qs(r,e).fill(t,n):qs(r,e).fill(t):qs(r,e)}function fb(r,e){if(fD(e),r=qs(r,e<0?0:lb(e)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}function Y5(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=lD(e,t)|0;r=qs(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function ub(r,e){var t=e.length<0?0:lb(e.length)|0;r=qs(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function J5(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Buffer.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=Buffer.prototype):r=ub(r,e),r}function X5(r,e){if(as(e)){var t=lb(e.length)|0;return r=qs(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||y7(e.length)?qs(r,0):ub(r,e);if(e.type==="Buffer"&&Array.isArray(e.data))return ub(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function lb(r){if(r>=km())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+km().toString(16)+" bytes");return r|0}function as(r){return!!(r!=null&&r._isBuffer)}function lD(r,e){if(as(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Fm(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return wD(r).length;default:if(n)return Fm(r).length;e=(""+e).toLowerCase(),n=!0}}function Q5(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return u7(this,e,t);case"utf8":case"utf-8":return dD(this,e,t);case"ascii":return s7(this,e,t);case"latin1":case"binary":return a7(this,e,t);case"base64":return i7(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c7(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Yu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function hD(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Buffer.from(e,n)),as(e))return e.length===0?-1:sD(r,e,t,n,i);if(typeof e=="number")return e=e&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):sD(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function sD(r,e,t,n,i){var o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(T,F){return o===1?T[F]:T.readUInt16BE(F*o)}var d;if(i){var m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){for(var w=!0,x=0;x<c;x++)if(f(r,d+x)!==f(e,x)){w=!1;break}if(w)return d}return-1}function Z5(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(a*2,2),16);if(isNaN(c))return a;r[t+a]=c}return a}function e7(r,e,t,n){return Om(Fm(e,r.length-t),r,t,n)}function pD(r,e,t,n){return Om(d7(e),r,t,n)}function t7(r,e,t,n){return pD(r,e,t,n)}function r7(r,e,t,n){return Om(wD(e),r,t,n)}function n7(r,e,t,n){return Om(m7(e,r.length-t),r,t,n)}function i7(r,e,t){return e===0&&t===r.length?oD(r):oD(r.slice(e,t))}function dD(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){var f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return o7(n)}function o7(r){var e=r.length;if(e<=aD)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=aD));return t}function s7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function a7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function u7(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=p7(r[o]);return i}function c7(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function tn(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function Yn(r,e,t,n,i,o){if(!as(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function Rm(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(r.length-t,2);i<o;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function Bm(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(r.length-t,4);i<o;++i)r[t+i]=e>>>(n?i:3-i)*8&255}function mD(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function yD(r,e,t,n,i){return i||mD(r,e,t,4,34028234663852886e22,-34028234663852886e22),vD(r,e,t,n,23,4),t+4}function gD(r,e,t,n,i){return i||mD(r,e,t,8,17976931348623157e292,-17976931348623157e292),vD(r,e,t,n,52,8),t+8}function l7(r){if(r=h7(r).replace(f7,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function h7(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function p7(r){return r<16?"0"+r.toString(16):r.toString(16)}function Fm(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function d7(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function m7(r,e){for(var t,n,i,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function wD(r){return W5(l7(r))}function Om(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function y7(r){return r!==r}function g7(r){return r!=null&&(!!r._isBuffer||bD(r)||w7(r))}function bD(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function w7(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&bD(r.slice(0,0))}function Lm(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,x=t?-1:1,T=r[e+w];for(w+=x,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=x,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=x,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)}function vD(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=x/f:e+=x*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=N*128}var ss,Qi,q5,cb,aD,f7,_D=sb(()=>{h();p();ss=[],Qi=[],q5=typeof Uint8Array<"u"?Uint8Array:Array,cb=!1;Buffer.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;Buffer.poolSize=8192;Buffer._augment=function(r){return r.__proto__=Buffer.prototype,r};Buffer.from=function(r,e,t){return cD(null,r,e,t)};Buffer.kMaxLength=km();Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);Buffer.alloc=function(r,e,t){return G5(null,r,e,t)};Buffer.allocUnsafe=function(r){return fb(null,r)};Buffer.allocUnsafeSlow=function(r){return fb(null,r)};Buffer.isBuffer=g7;Buffer.compare=function(e,t){if(!as(e)||!as(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=Buffer.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!as(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};Buffer.byteLength=lD;Buffer.prototype._isBuffer=!0;Buffer.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Yu(this,t,t+1);return this};Buffer.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Yu(this,t,t+3),Yu(this,t+1,t+2);return this};Buffer.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Yu(this,t,t+7),Yu(this,t+1,t+6),Yu(this,t+2,t+5),Yu(this,t+3,t+4);return this};Buffer.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?dD(this,0,e):Q5.apply(this,arguments)};Buffer.prototype.equals=function(e){if(!as(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer.compare(this,e)===0};Buffer.prototype.compare=function(e,t,n,i,o){if(!as(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n),w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};Buffer.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Buffer.prototype.indexOf=function(e,t,n){return hD(this,e,t,n,!0)};Buffer.prototype.lastIndexOf=function(e,t,n){return hD(this,e,t,n,!1)};Buffer.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Z5(this,e,t,n);case"utf8":case"utf-8":return e7(this,e,t,n);case"ascii":return pD(this,e,t,n);case"latin1":case"binary":return t7(this,e,t,n);case"base64":return r7(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n7(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};aD=4096;Buffer.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var o=t-e;i=new Buffer(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+e]}return i};Buffer.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Buffer.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Buffer.prototype.readUInt8=function(e,t){return t||tn(e,1,this.length),this[e]};Buffer.prototype.readUInt16LE=function(e,t){return t||tn(e,2,this.length),this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function(e,t){return t||tn(e,2,this.length),this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function(e,t){return t||tn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function(e,t){return t||tn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Buffer.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Buffer.prototype.readInt8=function(e,t){return t||tn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer.prototype.readInt16LE=function(e,t){t||tn(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt16BE=function(e,t){t||tn(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt32LE=function(e,t){return t||tn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function(e,t){return t||tn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function(e,t){return t||tn(e,4,this.length),Lm(this,e,!0,23,4)};Buffer.prototype.readFloatBE=function(e,t){return t||tn(e,4,this.length),Lm(this,e,!1,23,4)};Buffer.prototype.readDoubleLE=function(e,t){return t||tn(e,8,this.length),Lm(this,e,!0,52,8)};Buffer.prototype.readDoubleBE=function(e,t){return t||tn(e,8,this.length),Lm(this,e,!1,52,8)};Buffer.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Yn(this,e,t,n,o,0)}var a=1,c=0;for(this[t]=e&255;++c<n&&(a*=256);)this[t+c]=e/a&255;return t+n};Buffer.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Yn(this,e,t,n,o,0)}var a=n-1,c=1;for(this[t+a]=e&255;--a>=0&&(c*=256);)this[t+a]=e/c&255;return t+n};Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Rm(this,e,t,!0),t+2};Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Rm(this,e,t,!1),t+2};Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Bm(this,e,t,!0),t+4};Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Bm(this,e,t,!1),t+4};Buffer.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Yn(this,e,t,n,o-1,-o)}var a=0,c=1,f=0;for(this[t]=e&255;++a<n&&(c*=256);)e<0&&f===0&&this[t+a-1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Yn(this,e,t,n,o-1,-o)}var a=n-1,c=1,f=0;for(this[t+a]=e&255;--a>=0&&(c*=256);)e<0&&f===0&&this[t+a+1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Rm(this,e,t,!0),t+2};Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Rm(this,e,t,!1),t+2};Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Bm(this,e,t,!0),t+4};Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Bm(this,e,t,!1),t+4};Buffer.prototype.writeFloatLE=function(e,t,n){return yD(this,e,t,!0,n)};Buffer.prototype.writeFloatBE=function(e,t,n){return yD(this,e,t,!1,n)};Buffer.prototype.writeDoubleLE=function(e,t,n){return gD(this,e,t,!0,n)};Buffer.prototype.writeDoubleBE=function(e,t,n){return gD(this,e,t,!1,n)};Buffer.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n,a;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o};Buffer.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var c=as(e)?e:Fm(new Buffer(e,i).toString()),f=c.length;for(a=0;a<n-t;++a)this[a+t]=c[a%f]}return this};f7=/[^+\/0-9A-Za-z-_]/g});var p=sb(()=>{_D()});var jm=ce(($D,Rb)=>{h();p();(function(r){if(typeof $D=="object"&&typeof Rb<"u")Rb.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function n(i,o,a){function c(m,w){if(!o[m]){if(!i[m]){var x=typeof Vu=="function"&&Vu;if(!w&&x)return x(m,!0);if(f)return f(m,!0);var T=new Error("Cannot find module '"+m+"'");throw T.code="MODULE_NOT_FOUND",T}var F=o[m]={exports:{}};i[m][0].call(F.exports,function(N){var ue=i[m][1][N];return c(ue||N)},F,F.exports,n,i,o,a)}return o[m].exports}for(var f=typeof Vu=="function"&&Vu,d=0;d<a.length;d++)c(a[d]);return c}({1:[function(n,i,o){(function(a){"use strict";var c=a.MutationObserver||a.WebKitMutationObserver,f;if(c){var d=0,m=new c(N),w=a.document.createTextNode("");m.observe(w,{characterData:!0}),f=function(){w.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var x=new a.MessageChannel;x.port1.onmessage=N,f=function(){x.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?f=function(){var pe=a.document.createElement("script");pe.onreadystatechange=function(){N(),pe.onreadystatechange=null,pe.parentNode.removeChild(pe),pe=null},a.document.documentElement.appendChild(pe)}:f=function(){setTimeout(N,0)};var T,F=[];function N(){T=!0;for(var pe,De,re=F.length;re;){for(De=F,F=[],pe=-1;++pe<re;)De[pe]();re=F.length}T=!1}i.exports=ue;function ue(pe){F.push(pe)===1&&!T&&f()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){"use strict";var a=n(1);function c(){}var f={},d=["REJECTED"],m=["FULFILLED"],w=["PENDING"];i.exports=x;function x(Y){if(typeof Y!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,Y!==c&&ue(this,Y)}x.prototype.catch=function(Y){return this.then(null,Y)},x.prototype.then=function(Y,ge){if(typeof Y!="function"&&this.state===m||typeof ge!="function"&&this.state===d)return this;var _e=new this.constructor(c);if(this.state!==w){var Me=this.state===m?Y:ge;F(_e,Me,this.outcome)}else this.queue.push(new T(_e,Y,ge));return _e};function T(Y,ge,_e){this.promise=Y,typeof ge=="function"&&(this.onFulfilled=ge,this.callFulfilled=this.otherCallFulfilled),typeof _e=="function"&&(this.onRejected=_e,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(Y){f.resolve(this.promise,Y)},T.prototype.otherCallFulfilled=function(Y){F(this.promise,this.onFulfilled,Y)},T.prototype.callRejected=function(Y){f.reject(this.promise,Y)},T.prototype.otherCallRejected=function(Y){F(this.promise,this.onRejected,Y)};function F(Y,ge,_e){a(function(){var Me;try{Me=ge(_e)}catch(vt){return f.reject(Y,vt)}Me===Y?f.reject(Y,new TypeError("Cannot resolve promise with itself")):f.resolve(Y,Me)})}f.resolve=function(Y,ge){var _e=pe(N,ge);if(_e.status==="error")return f.reject(Y,_e.value);var Me=_e.value;if(Me)ue(Y,Me);else{Y.state=m,Y.outcome=ge;for(var vt=-1,Nt=Y.queue.length;++vt<Nt;)Y.queue[vt].callFulfilled(ge)}return Y},f.reject=function(Y,ge){Y.state=d,Y.outcome=ge;for(var _e=-1,Me=Y.queue.length;++_e<Me;)Y.queue[_e].callRejected(ge);return Y};function N(Y){var ge=Y&&Y.then;if(Y&&(typeof Y=="object"||typeof Y=="function")&&typeof ge=="function")return function(){ge.apply(Y,arguments)}}function ue(Y,ge){var _e=!1;function Me(qt){_e||(_e=!0,f.reject(Y,qt))}function vt(qt){_e||(_e=!0,f.resolve(Y,qt))}function Nt(){ge(vt,Me)}var Bt=pe(Nt);Bt.status==="error"&&Me(Bt.value)}function pe(Y,ge){var _e={};try{_e.value=Y(ge),_e.status="success"}catch(Me){_e.status="error",_e.value=Me}return _e}x.resolve=De;function De(Y){return Y instanceof this?Y:f.resolve(new this(c),Y)}x.reject=re;function re(Y){var ge=new this(c);return f.reject(ge,Y)}x.all=be;function be(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=new Array(_e),Nt=0,Bt=-1,qt=new this(c);++Bt<_e;)hr(Y[Bt],Bt);return qt;function hr(Mt,jr){ge.resolve(Mt).then(Cn,function(Rr){Me||(Me=!0,f.reject(qt,Rr))});function Cn(Rr){vt[jr]=Rr,++Nt===_e&&!Me&&(Me=!0,f.resolve(qt,vt))}}}x.race=Pe;function Pe(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=-1,Nt=new this(c);++vt<_e;)Bt(Y[vt]);return Nt;function Bt(qt){ge.resolve(qt).then(function(hr){Me||(Me=!0,f.resolve(Nt,hr))},function(hr){Me||(Me=!0,f.reject(Nt,hr))})}}},{1:1}],3:[function(n,i,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function c(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=f();function m(){try{if(!d||!d.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),k=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||k)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function w(_,k){_=_||[],k=k||{};try{return new Blob(_,k)}catch(v){if(v.name!=="TypeError")throw v;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,B=new A,O=0;O<_.length;O+=1)B.append(_[O]);return B.getBlob(k.type)}}typeof Promise>"u"&&n(3);var x=Promise;function T(_,k){k&&_.then(function(A){k(null,A)},function(A){k(A)})}function F(_,k,A){typeof k=="function"&&_.then(k),typeof A=="function"&&_.catch(A)}function N(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function ue(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var pe="local-forage-detect-blob-support",De=void 0,re={},be=Object.prototype.toString,Pe="readonly",Y="readwrite";function ge(_){for(var k=_.length,A=new ArrayBuffer(k),B=new Uint8Array(A),O=0;O<k;O++)B[O]=_.charCodeAt(O);return A}function _e(_){return new x(function(k){var A=_.transaction(pe,Y),B=w([""]);A.objectStore(pe).put(B,"key"),A.onabort=function(O){O.preventDefault(),O.stopPropagation(),k(!1)},A.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),v=navigator.userAgent.match(/Edge\//);k(v||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function Me(_){return typeof De=="boolean"?x.resolve(De):_e(_).then(function(k){return De=k,De})}function vt(_){var k=re[_.name],A={};A.promise=new x(function(B,O){A.resolve=B,A.reject=O}),k.deferredOperations.push(A),k.dbReady?k.dbReady=k.dbReady.then(function(){return A.promise}):k.dbReady=A.promise}function Nt(_){var k=re[_.name],A=k.deferredOperations.pop();if(A)return A.resolve(),A.promise}function Bt(_,k){var A=re[_.name],B=A.deferredOperations.pop();if(B)return B.reject(k),B.promise}function qt(_,k){return new x(function(A,B){if(re[_.name]=re[_.name]||wr(),_.db)if(k)vt(_),_.db.close();else return A(_.db);var O=[_.name];k&&O.push(_.version);var v=d.open.apply(d,O);k&&(v.onupgradeneeded=function(z){var H=v.result;try{H.createObjectStore(_.storeName),z.oldVersion<=1&&H.createObjectStore(pe)}catch(X){if(X.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+z.oldVersion+" to version "+z.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw X}}),v.onerror=function(z){z.preventDefault(),B(v.error)},v.onsuccess=function(){var z=v.result;z.onversionchange=function(H){H.target.close()},A(z),Nt(_)}})}function hr(_){return qt(_,!1)}function Mt(_){return qt(_,!0)}function jr(_,k){if(!_.db)return!0;var A=!_.db.objectStoreNames.contains(_.storeName),B=_.version<_.db.version,O=_.version>_.db.version;if(B&&(_.version!==k&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),O||A){if(A){var v=_.db.version+1;v>_.version&&(_.version=v)}return!0}return!1}function Cn(_){return new x(function(k,A){var B=new FileReader;B.onerror=A,B.onloadend=function(O){var v=btoa(O.target.result||"");k({__local_forage_encoded_blob:!0,data:v,type:_.type})},B.readAsBinaryString(_)})}function Rr(_){var k=ge(atob(_.data));return w([k],{type:_.type})}function Wr(_){return _&&_.__local_forage_encoded_blob}function ks(_){var k=this,A=k._initReady().then(function(){var B=re[k._dbInfo.name];if(B&&B.dbReady)return B.dbReady});return F(A,_,_),A}function nr(_){vt(_);for(var k=re[_.name],A=k.forages,B=0;B<A.length;B++){var O=A[B];O._dbInfo.db&&(O._dbInfo.db.close(),O._dbInfo.db=null)}return _.db=null,hr(_).then(function(v){return _.db=v,jr(_)?Mt(_):v}).then(function(v){_.db=k.db=v;for(var z=0;z<A.length;z++)A[z]._dbInfo.db=v}).catch(function(v){throw Bt(_,v),v})}function Wt(_,k,A,B){B===void 0&&(B=1);try{var O=_.db.transaction(_.storeName,k);A(null,O)}catch(v){if(B>0&&(!_.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return x.resolve().then(function(){if(!_.db||v.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),Mt(_)}).then(function(){return nr(_).then(function(){Wt(_,k,A,B-1)})}).catch(A);A(v)}}function wr(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(_){var k=this,A={db:null};if(_)for(var B in _)A[B]=_[B];var O=re[A.name];O||(O=wr(),re[A.name]=O),O.forages.push(k),k._initReady||(k._initReady=k.ready,k.ready=ks);var v=[];function z(){return x.resolve()}for(var H=0;H<O.forages.length;H++){var X=O.forages[H];X!==k&&v.push(X._initReady().catch(z))}var G=O.forages.slice(0);return x.all(v).then(function(){return A.db=O.db,hr(A)}).then(function(te){return A.db=te,jr(A,k._defaultConfig.version)?Mt(A):te}).then(function(te){A.db=O.db=te,k._dbInfo=A;for(var me=0;me<G.length;me++){var $e=G[me];$e!==k&&($e._dbInfo.db=A.db,$e._dbInfo.version=A.version)}})}function Xr(_,k){var A=this;_=N(_);var B=new x(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.get(_);G.onsuccess=function(){var te=G.result;te===void 0&&(te=null),Wr(te)&&(te=Rr(te)),O(te)},G.onerror=function(){v(G.error)}}catch(te){v(te)}})}).catch(v)});return T(B,k),B}function Ui(_,k){var A=this,B=new x(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.openCursor(),te=1;G.onsuccess=function(){var me=G.result;if(me){var $e=me.value;Wr($e)&&($e=Rr($e));var Le=_($e,me.key,te++);Le!==void 0?O(Le):me.continue()}else O()},G.onerror=function(){v(G.error)}}catch(me){v(me)}})}).catch(v)});return T(B,k),B}function Mi(_,k,A){var B=this;_=N(_);var O=new x(function(v,z){var H;B.ready().then(function(){return H=B._dbInfo,be.call(k)==="[object Blob]"?Me(H.db).then(function(X){return X?k:Cn(k)}):k}).then(function(X){Wt(B._dbInfo,Y,function(G,te){if(G)return z(G);try{var me=te.objectStore(B._dbInfo.storeName);X===null&&(X=void 0);var $e=me.put(X,_);te.oncomplete=function(){X===void 0&&(X=null),v(X)},te.onabort=te.onerror=function(){var Le=$e.error?$e.error:$e.transaction.error;z(Le)}}catch(Le){z(Le)}})}).catch(z)});return T(O,A),O}function rs(_,k){var A=this;_=N(_);var B=new x(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Y,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.delete(_);H.oncomplete=function(){O()},H.onerror=function(){v(G.error)},H.onabort=function(){var te=G.error?G.error:G.transaction.error;v(te)}}catch(te){v(te)}})}).catch(v)});return T(B,k),B}function Br(_){var k=this,A=new x(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Y,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.clear();z.oncomplete=function(){B()},z.onabort=z.onerror=function(){var G=X.error?X.error:X.transaction.error;O(G)}}catch(G){O(G)}})}).catch(O)});return T(A,_),A}function Ki(_){var k=this,A=new x(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Pe,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.count();X.onsuccess=function(){B(X.result)},X.onerror=function(){O(X.error)}}catch(G){O(G)}})}).catch(O)});return T(A,_),A}function bn(_,k){var A=this,B=new x(function(O,v){if(_<0){O(null);return}A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=!1,te=X.openKeyCursor();te.onsuccess=function(){var me=te.result;if(!me){O(null);return}_===0||G?O(me.key):(G=!0,me.advance(_))},te.onerror=function(){v(te.error)}}catch(me){v(me)}})}).catch(v)});return T(B,k),B}function Vr(_){var k=this,A=new x(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Pe,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.openKeyCursor(),G=[];X.onsuccess=function(){var te=X.result;if(!te){B(G);return}G.push(te.key),te.continue()},X.onerror=function(){O(X.error)}}catch(te){O(te)}})}).catch(O)});return T(A,_),A}function go(_,k){k=ue.apply(this,arguments);var A=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName);var B=this,O;if(!_.name)O=x.reject("Invalid arguments");else{var v=_.name===A.name&&B._dbInfo.db,z=v?x.resolve(B._dbInfo.db):hr(_).then(function(H){var X=re[_.name],G=X.forages;X.db=H;for(var te=0;te<G.length;te++)G[te]._dbInfo.db=H;return H});_.storeName?O=z.then(function(H){if(!!H.objectStoreNames.contains(_.storeName)){var X=H.version+1;vt(_);var G=re[_.name],te=G.forages;H.close();for(var me=0;me<te.length;me++){var $e=te[me];$e._dbInfo.db=null,$e._dbInfo.version=X}var Le=new x(function(Qe,dt){var mt=d.open(_.name,X);mt.onerror=function(Ot){var cr=mt.result;cr.close(),dt(Ot)},mt.onupgradeneeded=function(){var Ot=mt.result;Ot.deleteObjectStore(_.storeName)},mt.onsuccess=function(){var Ot=mt.result;Ot.close(),Qe(Ot)}});return Le.then(function(Qe){G.db=Qe;for(var dt=0;dt<te.length;dt++){var mt=te[dt];mt._dbInfo.db=Qe,Nt(mt._dbInfo)}}).catch(function(Qe){throw(Bt(_,Qe)||x.resolve()).catch(function(){}),Qe})}}):O=z.then(function(H){vt(_);var X=re[_.name],G=X.forages;H.close();for(var te=0;te<G.length;te++){var me=G[te];me._dbInfo.db=null}var $e=new x(function(Le,Qe){var dt=d.deleteDatabase(_.name);dt.onerror=function(){var mt=dt.result;mt&&mt.close(),Qe(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},dt.onsuccess=function(){var mt=dt.result;mt&&mt.close(),Le(mt)}});return $e.then(function(Le){X.db=Le;for(var Qe=0;Qe<G.length;Qe++){var dt=G[Qe];Nt(dt._dbInfo)}}).catch(function(Le){throw(Bt(_,Le)||x.resolve()).catch(function(){}),Le})})}return T(O,k),O}var Pa={_driver:"asyncStorage",_initStorage:Ve,_support:m(),iterate:Ui,getItem:Xr,setItem:Mi,removeItem:rs,clear:Br,length:Ki,key:bn,keys:Vr,dropInstance:go};function In(){return typeof openDatabase=="function"}var vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sa="~~local_forage_type~",Qr=/^~~local_forage_type~([^~]+)~/,ur="__lfsc__:",zn=ur.length,qn="arbf",wo="blob",cn="si08",$="ui08",J="uic8",he="si16",ve="si32",je="ur16",or="ui32",tt="fl32",ut="fl64",qe=zn+qn.length,yt=Object.prototype.toString;function pt(_){var k=_.length*.75,A=_.length,B,O=0,v,z,H,X;_[_.length-1]==="="&&(k--,_[_.length-2]==="="&&k--);var G=new ArrayBuffer(k),te=new Uint8Array(G);for(B=0;B<A;B+=4)v=vn.indexOf(_[B]),z=vn.indexOf(_[B+1]),H=vn.indexOf(_[B+2]),X=vn.indexOf(_[B+3]),te[O++]=v<<2|z>>4,te[O++]=(z&15)<<4|H>>2,te[O++]=(H&3)<<6|X&63;return G}function Pr(_){var k=new Uint8Array(_),A="",B;for(B=0;B<k.length;B+=3)A+=vn[k[B]>>2],A+=vn[(k[B]&3)<<4|k[B+1]>>4],A+=vn[(k[B+1]&15)<<2|k[B+2]>>6],A+=vn[k[B+2]&63];return k.length%3===2?A=A.substring(0,A.length-1)+"=":k.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function bo(_,k){var A="";if(_&&(A=yt.call(_)),_&&(A==="[object ArrayBuffer]"||_.buffer&&yt.call(_.buffer)==="[object ArrayBuffer]")){var B,O=ur;_ instanceof ArrayBuffer?(B=_,O+=qn):(B=_.buffer,A==="[object Int8Array]"?O+=cn:A==="[object Uint8Array]"?O+=$:A==="[object Uint8ClampedArray]"?O+=J:A==="[object Int16Array]"?O+=he:A==="[object Uint16Array]"?O+=je:A==="[object Int32Array]"?O+=ve:A==="[object Uint32Array]"?O+=or:A==="[object Float32Array]"?O+=tt:A==="[object Float64Array]"?O+=ut:k(new Error("Failed to get type for BinaryArray"))),k(O+Pr(B))}else if(A==="[object Blob]"){var v=new FileReader;v.onload=function(){var z=Sa+_.type+"~"+Pr(this.result);k(ur+wo+z)},v.readAsArrayBuffer(_)}else try{k(JSON.stringify(_))}catch(z){console.error("Couldn't convert value into a JSON string: ",_),k(null,z)}}function Fs(_){if(_.substring(0,zn)!==ur)return JSON.parse(_);var k=_.substring(qe),A=_.substring(zn,qe),B;if(A===wo&&Qr.test(k)){var O=k.match(Qr);B=O[1],k=k.substring(O[0].length)}var v=pt(k);switch(A){case qn:return v;case wo:return w([v],{type:B});case cn:return new Int8Array(v);case $:return new Uint8Array(v);case J:return new Uint8ClampedArray(v);case he:return new Int16Array(v);case je:return new Uint16Array(v);case ve:return new Int32Array(v);case or:return new Uint32Array(v);case tt:return new Float32Array(v);case ut:return new Float64Array(v);default:throw new Error("Unkown type: "+A)}}var vo={serialize:bo,deserialize:Fs,stringToBuffer:pt,bufferToString:Pr};function Rs(_,k,A,B){_.executeSql("CREATE TABLE IF NOT EXISTS "+k.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,B)}function Ru(_){var k=this,A={db:null};if(_)for(var B in _)A[B]=typeof _[B]!="string"?_[B].toString():_[B];var O=new x(function(v,z){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(H){return z(H)}A.db.transaction(function(H){Rs(H,A,function(){k._dbInfo=A,v()},function(X,G){z(G)})},z)});return A.serializer=vo,O}function ji(_,k,A,B,O,v){_.executeSql(A,B,O,function(z,H){H.code===H.SYNTAX_ERR?z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[k.storeName],function(X,G){G.rows.length?v(X,H):Rs(X,k,function(){X.executeSql(A,B,O,v)},v)},v):v(z,H)},v)}function yh(_,k){var A=this;_=N(_);var B=new x(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT * FROM "+z.storeName+" WHERE key = ? LIMIT 1",[_],function(X,G){var te=G.rows.length?G.rows.item(0).value:null;te&&(te=z.serializer.deserialize(te)),O(te)},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function si(_,k){var A=this,B=new x(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT * FROM "+z.storeName,[],function(X,G){for(var te=G.rows,me=te.length,$e=0;$e<me;$e++){var Le=te.item($e),Qe=Le.value;if(Qe&&(Qe=z.serializer.deserialize(Qe)),Qe=_(Qe,Le.key,$e+1),Qe!==void 0){O(Qe);return}}O()},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function $i(_,k,A,B){var O=this;_=N(_);var v=new x(function(z,H){O.ready().then(function(){k===void 0&&(k=null);var X=k,G=O._dbInfo;G.serializer.serialize(k,function(te,me){me?H(me):G.db.transaction(function($e){ji($e,G,"INSERT OR REPLACE INTO "+G.storeName+" (key, value) VALUES (?, ?)",[_,te],function(){z(X)},function(Le,Qe){H(Qe)})},function($e){if($e.code===$e.QUOTA_ERR){if(B>0){z($i.apply(O,[_,X,A,B-1]));return}H($e)}})})}).catch(H)});return T(v,A),v}function _o(_,k,A){return $i.apply(this,[_,k,A,1])}function Bu(_,k){var A=this;_=N(_);var B=new x(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"DELETE FROM "+z.storeName+" WHERE key = ?",[_],function(){O()},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function Ou(_){var k=this,A=new x(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"DELETE FROM "+v.storeName,[],function(){B()},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function mf(_){var k=this,A=new x(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(H,X){var G=X.rows.item(0).c;B(G)},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function Lu(_,k){var A=this,B=new x(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT key FROM "+z.storeName+" WHERE id = ? LIMIT 1",[_+1],function(X,G){var te=G.rows.length?G.rows.item(0).key:null;O(te)},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function fn(_){var k=this,A=new x(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"SELECT key FROM "+v.storeName,[],function(H,X){for(var G=[],te=0;te<X.rows.length;te++)G.push(X.rows.item(te).key);B(G)},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function Da(_){return new x(function(k,A){_.transaction(function(B){B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,v){for(var z=[],H=0;H<v.rows.length;H++)z.push(v.rows.item(H).name);k({db:_,storeNames:z})},function(O,v){A(v)})},function(B){A(B)})})}function b(_,k){k=ue.apply(this,arguments);var A=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName);var B=this,O;return _.name?O=new x(function(v){var z;_.name===A.name?z=B._dbInfo.db:z=openDatabase(_.name,"","",0),_.storeName?v({db:z,storeNames:[_.storeName]}):v(Da(z))}).then(function(v){return new x(function(z,H){v.db.transaction(function(X){function G(Le){return new x(function(Qe,dt){X.executeSql("DROP TABLE IF EXISTS "+Le,[],function(){Qe()},function(mt,Ot){dt(Ot)})})}for(var te=[],me=0,$e=v.storeNames.length;me<$e;me++)te.push(G(v.storeNames[me]));x.all(te).then(function(){z()}).catch(function(Le){H(Le)})},function(X){H(X)})})}):O=x.reject("Invalid arguments"),T(O,k),O}var S={_driver:"webSQLStorage",_initStorage:Ru,_support:In(),iterate:si,getItem:yh,setItem:_o,removeItem:Bu,clear:Ou,length:mf,key:Lu,keys:fn,dropInstance:b};function P(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function y(_,k){var A=_.name+"/";return _.storeName!==k.storeName&&(A+=_.storeName+"/"),A}function I(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function M(){return!I()||localStorage.length>0}function j(_){var k=this,A={};if(_)for(var B in _)A[B]=_[B];return A.keyPrefix=y(_,k._defaultConfig),M()?(k._dbInfo=A,A.serializer=vo,x.resolve()):x.reject()}function oe(_){var k=this,A=k.ready().then(function(){for(var B=k._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var v=localStorage.key(O);v.indexOf(B)===0&&localStorage.removeItem(v)}});return T(A,_),A}function ye(_,k){var A=this;_=N(_);var B=A.ready().then(function(){var O=A._dbInfo,v=localStorage.getItem(O.keyPrefix+_);return v&&(v=O.serializer.deserialize(v)),v});return T(B,k),B}function Ke(_,k){var A=this,B=A.ready().then(function(){for(var O=A._dbInfo,v=O.keyPrefix,z=v.length,H=localStorage.length,X=1,G=0;G<H;G++){var te=localStorage.key(G);if(te.indexOf(v)===0){var me=localStorage.getItem(te);if(me&&(me=O.serializer.deserialize(me)),me=_(me,te.substring(z),X++),me!==void 0)return me}}});return T(B,k),B}function Ae(_,k){var A=this,B=A.ready().then(function(){var O=A._dbInfo,v;try{v=localStorage.key(_)}catch{v=null}return v&&(v=v.substring(O.keyPrefix.length)),v});return T(B,k),B}function Ct(_){var k=this,A=k.ready().then(function(){for(var B=k._dbInfo,O=localStorage.length,v=[],z=0;z<O;z++){var H=localStorage.key(z);H.indexOf(B.keyPrefix)===0&&v.push(H.substring(B.keyPrefix.length))}return v});return T(A,_),A}function Te(_){var k=this,A=k.keys().then(function(B){return B.length});return T(A,_),A}function rt(_,k){var A=this;_=N(_);var B=A.ready().then(function(){var O=A._dbInfo;localStorage.removeItem(O.keyPrefix+_)});return T(B,k),B}function ot(_,k,A){var B=this;_=N(_);var O=B.ready().then(function(){k===void 0&&(k=null);var v=k;return new x(function(z,H){var X=B._dbInfo;X.serializer.serialize(k,function(G,te){if(te)H(te);else try{localStorage.setItem(X.keyPrefix+_,G),z(v)}catch(me){(me.name==="QuotaExceededError"||me.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(me),H(me)}})})});return T(O,A),O}function ct(_,k){if(k=ue.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var A=this.config();_.name=_.name||A.name,_.storeName=_.storeName||A.storeName}var B=this,O;return _.name?O=new x(function(v){_.storeName?v(y(_,B._defaultConfig)):v(_.name+"/")}).then(function(v){for(var z=localStorage.length-1;z>=0;z--){var H=localStorage.key(z);H.indexOf(v)===0&&localStorage.removeItem(H)}}):O=x.reject("Invalid arguments"),T(O,k),O}var lt={_driver:"localStorageWrapper",_initStorage:j,_support:P(),iterate:Ke,getItem:ye,setItem:ot,removeItem:rt,clear:oe,length:Te,key:Ae,keys:Ct,dropInstance:ct},et=function(k,A){return k===A||typeof k=="number"&&typeof A=="number"&&isNaN(k)&&isNaN(A)},ft=function(k,A){for(var B=k.length,O=0;O<B;){if(et(k[O],A))return!0;O++}return!1},nt=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},Ie={},ze={},xe={INDEXEDDB:Pa,WEBSQL:S,LOCALSTORAGE:lt},Fe=[xe.INDEXEDDB._driver,xe.WEBSQL._driver,xe.LOCALSTORAGE._driver],Re=["dropInstance"],Ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Re),q={description:"",driver:Fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function W(_,k){_[k]=function(){var A=arguments;return _.ready().then(function(){return _[k].apply(_,A)})}}function le(){for(var _=1;_<arguments.length;_++){var k=arguments[_];if(k)for(var A in k)k.hasOwnProperty(A)&&(nt(k[A])?arguments[0][A]=k[A].slice():arguments[0][A]=k[A])}return arguments[0]}var ne=function(){function _(k){c(this,_);for(var A in xe)if(xe.hasOwnProperty(A)){var B=xe[A],O=B._driver;this[A]=O,Ie[O]||this.defineDriver(B)}this._defaultConfig=le({},q),this._config=le({},this._defaultConfig,k),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(A){if((typeof A>"u"?"undefined":a(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var B in A){if(B==="storeName"&&(A[B]=A[B].replace(/\W/g,"_")),B==="version"&&typeof A[B]!="number")return new Error("Database version must be a number.");this._config[B]=A[B]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},_.prototype.defineDriver=function(A,B,O){var v=new x(function(z,H){try{var X=A._driver,G=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){H(G);return}for(var te=Ee.concat("_initStorage"),me=0,$e=te.length;me<$e;me++){var Le=te[me],Qe=!ft(Re,Le);if((Qe||A[Le])&&typeof A[Le]!="function"){H(G);return}}var dt=function(){for(var cr=function(Z0){return function(){var Kd=new Error("Method "+Z0+" is not implemented by the current driver"),jd=x.reject(Kd);return T(jd,arguments[arguments.length-1]),jd}},br=0,Or=Re.length;br<Or;br++){var gh=Re[br];A[gh]||(A[gh]=cr(gh))}};dt();var mt=function(cr){Ie[X]&&console.info("Redefining LocalForage driver: "+X),Ie[X]=A,ze[X]=cr,z()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(mt,H):mt(!!A._support):mt(!0)}catch(Ot){H(Ot)}});return F(v,B,O),v},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(A,B,O){var v=Ie[A]?x.resolve(Ie[A]):x.reject(new Error("Driver not found."));return F(v,B,O),v},_.prototype.getSerializer=function(A){var B=x.resolve(vo);return F(B,A),B},_.prototype.ready=function(A){var B=this,O=B._driverSet.then(function(){return B._ready===null&&(B._ready=B._initDriver()),B._ready});return F(O,A,A),O},_.prototype.setDriver=function(A,B,O){var v=this;nt(A)||(A=[A]);var z=this._getSupportedDrivers(A);function H(){v._config.driver=v.driver()}function X(me){return v._extend(me),H(),v._ready=v._initStorage(v._config),v._ready}function G(me){return function(){var $e=0;function Le(){for(;$e<me.length;){var Qe=me[$e];return $e++,v._dbInfo=null,v._ready=null,v.getDriver(Qe).then(X).catch(Le)}H();var dt=new Error("No available storage method found.");return v._driverSet=x.reject(dt),v._driverSet}return Le()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return x.resolve()}):x.resolve();return this._driverSet=te.then(function(){var me=z[0];return v._dbInfo=null,v._ready=null,v.getDriver(me).then(function($e){v._driver=$e._driver,H(),v._wrapLibraryMethodsWithReady(),v._initDriver=G(z)})}).catch(function(){H();var me=new Error("No available storage method found.");return v._driverSet=x.reject(me),v._driverSet}),F(this._driverSet,B,O),this._driverSet},_.prototype.supports=function(A){return!!ze[A]},_.prototype._extend=function(A){le(this,A)},_.prototype._getSupportedDrivers=function(A){for(var B=[],O=0,v=A.length;O<v;O++){var z=A[O];this.supports(z)&&B.push(z)}return B},_.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,B=Ee.length;A<B;A++)W(this,Ee[A])},_.prototype.createInstance=function(A){return new _(A)},_}(),ie=new ne;i.exports=ie},{3:3}]},{},[4])(4)})});var tC=ce((eC,Ey)=>{h();p();(function(r){var e={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},t={36:n(36),16:n(16),10:n(10),2:n(2)};function n(c,f){if(!(this instanceof n))return new n(c,f);if(this._low=0,this._high=0,this.remainder=null,typeof f>"u")return o.call(this,c);if(typeof c=="string")return a.call(this,c,f);i.call(this,c,f)}function i(c,f){return this._low=c|0,this._high=f|0,this}n.prototype.fromBits=i;function o(c){return this._low=c&65535,this._high=c>>>16,this}n.prototype.fromNumber=o;function a(c,f){var d=parseInt(c,f||10);return this._low=d&65535,this._high=d>>>16,this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(c){return this.toNumber().toString(c||10)},n.prototype.add=function(c){var f=this._low+c._low,d=f>>>16;return d+=this._high+c._high,this._low=f&65535,this._high=d&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._high,d=this._low,m=c._high,w=c._low,x,T;return T=d*w,x=T>>>16,x+=f*w,x&=65535,x+=d*m,this._low=T&65535,this._high=x&65535,this},n.prototype.div=function(c){if(c._low==0&&c._high==0)throw Error("division by zero");if(c._high==0&&c._low==1)return this.remainder=new n(0),this;if(c.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(c))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._low=0,this._high=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=16?this._high|=1<<d-16:this._low|=1<<d);return this},n.prototype.negate=function(){var c=(~this._low&65535)+1;return this._low=c&65535,this._high=~this._high+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._low==c._low&&this._high==c._high},n.prototype.greaterThan=n.prototype.gt=function(c){return this._high>c._high?!0:this._high<c._high?!1:this._low>c._low},n.prototype.lessThan=n.prototype.lt=function(c){return this._high<c._high?!0:this._high>c._high?!1:this._low<c._low},n.prototype.or=function(c){return this._low|=c._low,this._high|=c._high,this},n.prototype.and=function(c){return this._low&=c._low,this._high&=c._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(c){return this._low^=c._low,this._high^=c._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c>16?(this._low=this._high>>c-16,this._high=0):c==16?(this._low=this._high,this._high=0):(this._low=this._low>>c|this._high<<16-c&65535,this._high>>=c),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c>16?(this._high=this._low<<c-16,this._low=0,f||(this._high&=65535)):c==16?(this._high=this._low,this._low=0):(this._high=this._high<<c|this._low>>16-c,this._low=this._low<<c&65535,f||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){var f=this._high<<16|this._low;return f=f<<c|f>>>32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){var f=this._high<<16|this._low;return f=f>>>c|f<<32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof Ey<"u"&&Ey.exports?Ey.exports=n:r.UINT32=n})(eC)});var nC=ce((rC,Py)=>{h();p();(function(r){var e={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},t={16:n(16),10:n(10),2:n(2)};function n(c,f,d,m){if(!(this instanceof n))return new n(c,f,d,m);if(this.remainder=null,typeof c=="string")return a.call(this,c,f);if(typeof f>"u")return o.call(this,c);i.apply(this,arguments)}function i(c,f,d,m){return typeof d>"u"?(this._a00=c&65535,this._a16=c>>>16,this._a32=f&65535,this._a48=f>>>16,this):(this._a00=c|0,this._a16=f|0,this._a32=d|0,this._a48=m|0,this)}n.prototype.fromBits=i;function o(c){return this._a00=c&65535,this._a16=c>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=o;function a(c,f){f=f||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var d=e[f]||new n(Math.pow(f,5)),m=0,w=c.length;m<w;m+=5){var x=Math.min(5,w-m),T=parseInt(c.slice(m,m+x),f);this.multiply(x<5?new n(Math.pow(f,x)):d).add(new n(T))}return this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(c){c=c||10;var f=t[c]||new n(c);if(!this.gt(f))return this.toNumber().toString(c);for(var d=this.clone(),m=new Array(64),w=63;w>=0&&(d.div(f),m[w]=d.remainder.toNumber().toString(c),!!d.gt(f));w--);return m[w-1]=d.toNumber().toString(c),m.join("")},n.prototype.add=function(c){var f=this._a00+c._a00,d=f>>>16;d+=this._a16+c._a16;var m=d>>>16;m+=this._a32+c._a32;var w=m>>>16;return w+=this._a48+c._a48,this._a00=f&65535,this._a16=d&65535,this._a32=m&65535,this._a48=w&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._a00,d=this._a16,m=this._a32,w=this._a48,x=c._a00,T=c._a16,F=c._a32,N=c._a48,ue=f*x,pe=ue>>>16;pe+=f*T;var De=pe>>>16;pe&=65535,pe+=d*x,De+=pe>>>16,De+=f*F;var re=De>>>16;return De&=65535,De+=d*T,re+=De>>>16,De&=65535,De+=m*x,re+=De>>>16,re+=f*N,re&=65535,re+=d*F,re&=65535,re+=m*T,re&=65535,re+=w*x,this._a00=ue&65535,this._a16=pe&65535,this._a32=De&65535,this._a48=re&65535,this},n.prototype.div=function(c){if(c._a16==0&&c._a32==0&&c._a48==0){if(c._a00==0)throw Error("division by zero");if(c._a00==1)return this.remainder=new n(0),this}if(c.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(c))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=48?this._a48|=1<<d-48:d>=32?this._a32|=1<<d-32:d>=16?this._a16|=1<<d-16:this._a00|=1<<d);return this},n.prototype.negate=function(){var c=(~this._a00&65535)+1;return this._a00=c&65535,c=(~this._a16&65535)+(c>>>16),this._a16=c&65535,c=(~this._a32&65535)+(c>>>16),this._a32=c&65535,this._a48=~this._a48+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._a48==c._a48&&this._a00==c._a00&&this._a32==c._a32&&this._a16==c._a16},n.prototype.greaterThan=n.prototype.gt=function(c){return this._a48>c._a48?!0:this._a48<c._a48?!1:this._a32>c._a32?!0:this._a32<c._a32?!1:this._a16>c._a16?!0:this._a16<c._a16?!1:this._a00>c._a00},n.prototype.lessThan=n.prototype.lt=function(c){return this._a48<c._a48?!0:this._a48>c._a48?!1:this._a32<c._a32?!0:this._a32>c._a32?!1:this._a16<c._a16?!0:this._a16>c._a16?!1:this._a00<c._a00},n.prototype.or=function(c){return this._a00|=c._a00,this._a16|=c._a16,this._a32|=c._a32,this._a48|=c._a48,this},n.prototype.and=function(c){return this._a00&=c._a00,this._a16&=c._a16,this._a32&=c._a32,this._a48&=c._a48,this},n.prototype.xor=function(c){return this._a00^=c._a00,this._a16^=c._a16,this._a32^=c._a32,this._a48^=c._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c%=64,c>=48?(this._a00=this._a48>>c-48,this._a16=0,this._a32=0,this._a48=0):c>=32?(c-=32,this._a00=(this._a32>>c|this._a48<<16-c)&65535,this._a16=this._a48>>c&65535,this._a32=0,this._a48=0):c>=16?(c-=16,this._a00=(this._a16>>c|this._a32<<16-c)&65535,this._a16=(this._a32>>c|this._a48<<16-c)&65535,this._a32=this._a48>>c&65535,this._a48=0):(this._a00=(this._a00>>c|this._a16<<16-c)&65535,this._a16=(this._a16>>c|this._a32<<16-c)&65535,this._a32=(this._a32>>c|this._a48<<16-c)&65535,this._a48=this._a48>>c&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c%=64,c>=48?(this._a48=this._a00<<c-48,this._a32=0,this._a16=0,this._a00=0):c>=32?(c-=32,this._a48=this._a16<<c|this._a00>>16-c,this._a32=this._a00<<c&65535,this._a16=0,this._a00=0):c>=16?(c-=16,this._a48=this._a32<<c|this._a16>>16-c,this._a32=(this._a16<<c|this._a00>>16-c)&65535,this._a16=this._a00<<c&65535,this._a00=0):(this._a48=this._a48<<c|this._a32>>16-c,this._a32=(this._a32<<c|this._a16>>16-c)&65535,this._a16=(this._a16<<c|this._a00>>16-c)&65535,this._a00=this._a00<<c&65535),f||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d<<c|m>>>32-c,x=m<<c|d>>>32-c;return this._a00=x&65535,this._a16=x>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d>>>c|m<<32-c,x=m>>>c|d<<32-c;return this._a00=x&65535,this._a16=x>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof Py<"u"&&Py.exports?Py.exports=n:r.UINT64=n})(rC)});var Tv=ce(Iv=>{h();p();Iv.UINT32=tC();Iv.UINT64=nC()});var uC=ce((ose,aC)=>{h();p();var Zs=Tv().UINT32;Zs.prototype.xxh_update=function(r,e){var t=fp._low,n=fp._high,i,o;o=r*t,i=o>>>16,i+=e*t,i&=65535,i+=r*n;var a=this._low+(o&65535),c=a>>>16;c+=this._high+(i&65535);var f=c<<16|a&65535;f=f<<13|f>>>19,a=f&65535,c=f>>>16,t=cp._low,n=cp._high,o=a*t,i=o>>>16,i+=c*t,i&=65535,i+=a*n,this._low=o&65535,this._high=i&65535};var cp=Zs("2654435761"),fp=Zs("2246822519"),iC=Zs("3266489917"),Rj=Zs("668265263"),oC=Zs("374761393");function Bj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function fc(){if(arguments.length==2)return new fc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof fc))return new fc(arguments[0]);sC.call(this,arguments[0])}function sC(r){return this.seed=r instanceof Zs?r.clone():Zs(r),this.v1=this.seed.clone().add(cp).add(fp),this.v2=this.seed.clone().add(fp),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(cp),this.total_len=0,this.memsize=0,this.memory=null,this}fc.prototype.init=sC;fc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=Bj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+i<16)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,16-this.memsize):t?this.memory.set(r.subarray(0,16-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;e?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-16){var c=o-16;do e?(this.v1.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v2.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v3.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v4.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2))):(this.v1.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v2.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v3.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v4.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2])),n+=4;while(n<=c)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};fc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new Zs;for(this.total_len>=16?i=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):i=this.seed.clone().add(oC),i.add(a.fromNumber(this.total_len));t<=n-4;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2]),i.add(a.multiply(iC)).rotl(17).multiply(Rj),t+=4;for(;t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0),i.add(a.multiply(oC)).rotl(11).multiply(cp);return o=i.clone().shiftRight(15),i.xor(o).multiply(fp),o=i.clone().shiftRight(13),i.xor(o).multiply(iC),o=i.clone().shiftRight(16),i.xor(o),this.init(this.seed),i};aC.exports=fc});var pC=ce((use,hC)=>{h();p();var dr=Tv().UINT64,Yt=dr("11400714785074694791"),lr=dr("14029467366897019727"),cC=dr("1609587929392839161"),lp=dr("9650029242287828579"),fC=dr("2870177450012600261");function Oj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function lc(){if(arguments.length==2)return new lc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof lc))return new lc(arguments[0]);lC.call(this,arguments[0])}function lC(r){return this.seed=r instanceof dr?r.clone():dr(r),this.v1=this.seed.clone().add(Yt).add(lr),this.v2=this.seed.clone().add(lr),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Yt),this.total_len=0,this.memsize=0,this.memory=null,this}lc.prototype.init=lC;lc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=Oj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+i<32)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,32-this.memsize):t?this.memory.set(r.subarray(0,32-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(e){var c;c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Yt)}else{var c;c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Yt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Yt)}n+=32-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-32){var f=o-32;do{if(e){var c;c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Yt)}else{var c;c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Yt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Yt)}n+=8}while(n<=f)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};lc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new dr;for(this.total_len>=32?(i=this.v1.clone().rotl(1),i.add(this.v2.clone().rotl(7)),i.add(this.v3.clone().rotl(12)),i.add(this.v4.clone().rotl(18)),i.xor(this.v1.multiply(lr).rotl(31).multiply(Yt)),i.multiply(Yt).add(lp),i.xor(this.v2.multiply(lr).rotl(31).multiply(Yt)),i.multiply(Yt).add(lp),i.xor(this.v3.multiply(lr).rotl(31).multiply(Yt)),i.multiply(Yt).add(lp),i.xor(this.v4.multiply(lr).rotl(31).multiply(Yt)),i.multiply(Yt).add(lp)):i=this.seed.clone().add(fC),i.add(a.fromNumber(this.total_len));t<=n-8;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),r.charCodeAt(t+5)<<8|r.charCodeAt(t+4),r.charCodeAt(t+7)<<8|r.charCodeAt(t+6)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],r[t+5]<<8|r[t+4],r[t+7]<<8|r[t+6]),a.multiply(lr).rotl(31).multiply(Yt),i.xor(a).rotl(27).multiply(Yt).add(lp),t+=8;for(t+4<=n&&(e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),0,0):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],0,0),i.xor(a.multiply(Yt)).rotl(23).multiply(lr).add(cC),t+=4);t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0,0,0),i.xor(a.multiply(fC)).rotl(11).multiply(Yt);return o=i.clone().shiftRight(33),i.xor(o).multiply(lr),o=i.clone().shiftRight(29),i.xor(o).multiply(cC),o=i.clone().shiftRight(32),i.xor(o),this.init(this.seed),i};hC.exports=lc});var mC=ce((lse,dC)=>{h();p();dC.exports={h32:uC(),h64:pC()}});var wC=ce(Sy=>{"use strict";h();p();Sy.byteLength=Nj;Sy.toByteArray=Mj;Sy.fromByteArray=$j;var ms=[],io=[],Lj=typeof Uint8Array<"u"?Uint8Array:Array,kv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(hc=0,yC=kv.length;hc<yC;++hc)ms[hc]=kv[hc],io[kv.charCodeAt(hc)]=hc;var hc,yC;io["-".charCodeAt(0)]=62;io["_".charCodeAt(0)]=63;function gC(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Nj(r){var e=gC(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Uj(r,e,t){return(e+t)*3/4-t}function Mj(r){var e,t=gC(r),n=t[0],i=t[1],o=new Lj(Uj(r,n,i)),a=0,c=i>0?n-4:n,f;for(f=0;f<c;f+=4)e=io[r.charCodeAt(f)]<<18|io[r.charCodeAt(f+1)]<<12|io[r.charCodeAt(f+2)]<<6|io[r.charCodeAt(f+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=io[r.charCodeAt(f)]<<2|io[r.charCodeAt(f+1)]>>4,o[a++]=e&255),i===1&&(e=io[r.charCodeAt(f)]<<10|io[r.charCodeAt(f+1)]<<4|io[r.charCodeAt(f+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function Kj(r){return ms[r>>18&63]+ms[r>>12&63]+ms[r>>6&63]+ms[r&63]}function jj(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Kj(n));return i.join("")}function $j(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(jj(r,a,a+o>c?c:a+o));return n===1?(e=r[t-1],i.push(ms[e>>2]+ms[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ms[e>>10]+ms[e>>4&63]+ms[e<<2&63]+"=")),i.join("")}});var bC=ce(Fv=>{h();p();Fv.read=function(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,x=t?-1:1,T=r[e+w];for(w+=x,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=x,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=x,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)};Fv.write=function(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=x/f:e+=x*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=N*128}});var dc=ce(sl=>{"use strict";h();p();var Rv=wC(),il=bC(),vC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;sl.Buffer=Q;sl.SlowBuffer=Gj;sl.INSPECT_MAX_BYTES=50;var Dy=2147483647;sl.kMaxLength=Dy;Q.TYPED_ARRAY_SUPPORT=zj();!Q.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function zj(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(Q.prototype,"parent",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.buffer}});Object.defineProperty(Q.prototype,"offset",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.byteOffset}});function ea(r){if(r>Dy)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,Q.prototype),e}function Q(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Nv(r)}return PC(r,e,t)}Q.poolSize=8192;function PC(r,e,t){if(typeof r=="string")return Wj(r,e);if(ArrayBuffer.isView(r))return Vj(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ys(r,ArrayBuffer)||r&&ys(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ys(r,SharedArrayBuffer)||r&&ys(r.buffer,SharedArrayBuffer)))return Ov(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Q.from(n,e,t);let i=Hj(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Q.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}Q.from=function(r,e,t){return PC(r,e,t)};Object.setPrototypeOf(Q.prototype,Uint8Array.prototype);Object.setPrototypeOf(Q,Uint8Array);function SC(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function qj(r,e,t){return SC(r),r<=0?ea(r):e!==void 0?typeof t=="string"?ea(r).fill(e,t):ea(r).fill(e):ea(r)}Q.alloc=function(r,e,t){return qj(r,e,t)};function Nv(r){return SC(r),ea(r<0?0:Uv(r)|0)}Q.allocUnsafe=function(r){return Nv(r)};Q.allocUnsafeSlow=function(r){return Nv(r)};function Wj(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Q.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=DC(r,e)|0,n=ea(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Bv(r){let e=r.length<0?0:Uv(r.length)|0,t=ea(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Vj(r){if(ys(r,Uint8Array)){let e=new Uint8Array(r);return Ov(e.buffer,e.byteOffset,e.byteLength)}return Bv(r)}function Ov(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,Q.prototype),n}function Hj(r){if(Q.isBuffer(r)){let e=Uv(r.length)|0,t=ea(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Kv(r.length)?ea(0):Bv(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Bv(r.data)}function Uv(r){if(r>=Dy)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Dy.toString(16)+" bytes");return r|0}function Gj(r){return+r!=r&&(r=0),Q.alloc(+r)}Q.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Q.prototype};Q.compare=function(e,t){if(ys(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),ys(t,Uint8Array)&&(t=Q.from(t,t.offset,t.byteLength)),!Q.isBuffer(e)||!Q.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Q.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Q.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Q.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=Q.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(ys(a,Uint8Array))o+a.length>i.length?(Q.isBuffer(a)||(a=Q.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(Q.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function DC(r,e){if(Q.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ys(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Lv(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return OC(r).length;default:if(i)return n?-1:Lv(r).length;e=(""+e).toLowerCase(),i=!0}}Q.byteLength=DC;function Yj(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return o$(this,e,t);case"utf8":case"utf-8":return CC(this,e,t);case"ascii":return n$(this,e,t);case"latin1":case"binary":return i$(this,e,t);case"base64":return t$(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s$(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}Q.prototype._isBuffer=!0;function pc(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}Q.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)pc(this,t,t+1);return this};Q.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)pc(this,t,t+3),pc(this,t+1,t+2);return this};Q.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)pc(this,t,t+7),pc(this,t+1,t+6),pc(this,t+2,t+5),pc(this,t+3,t+4);return this};Q.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?CC(this,0,e):Yj.apply(this,arguments)};Q.prototype.toLocaleString=Q.prototype.toString;Q.prototype.equals=function(e){if(!Q.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Q.compare(this,e)===0};Q.prototype.inspect=function(){let e="",t=sl.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};vC&&(Q.prototype[vC]=Q.prototype.inspect);Q.prototype.compare=function(e,t,n,i,o){if(ys(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),!Q.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n);for(let w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};function AC(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Kv(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Q.from(e,n)),Q.isBuffer(e))return e.length===0?-1:_C(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):_C(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function _C(r,e,t,n,i){let o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(m,w){return o===1?m[w]:m.readUInt16BE(w*o)}let d;if(i){let m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){let m=!0;for(let w=0;w<c;w++)if(f(r,d+w)!==f(e,w)){m=!1;break}if(m)return d}return-1}Q.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Q.prototype.indexOf=function(e,t,n){return AC(this,e,t,n,!0)};Q.prototype.lastIndexOf=function(e,t,n){return AC(this,e,t,n,!1)};function Jj(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let c=parseInt(e.substr(a*2,2),16);if(Kv(c))return a;r[t+a]=c}return a}function Xj(r,e,t,n){return Ay(Lv(e,r.length-t),r,t,n)}function Qj(r,e,t,n){return Ay(f$(e),r,t,n)}function Zj(r,e,t,n){return Ay(OC(e),r,t,n)}function e$(r,e,t,n){return Ay(l$(e,r.length-t),r,t,n)}Q.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return Jj(this,e,t,n);case"utf8":case"utf-8":return Xj(this,e,t,n);case"ascii":case"latin1":case"binary":return Qj(this,e,t,n);case"base64":return Zj(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e$(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function t$(r,e,t){return e===0&&t===r.length?Rv.fromByteArray(r):Rv.fromByteArray(r.slice(e,t))}function CC(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return r$(n)}var xC=4096;function r$(r){let e=r.length;if(e<=xC)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=xC));return t}function n$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function i$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function o$(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=h$[r[o]];return i}function s$(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}Q.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,Q.prototype),i};function on(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}Q.prototype.readUintLE=Q.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Q.prototype.readUintBE=Q.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Q.prototype.readUint8=Q.prototype.readUInt8=function(e,t){return e=e>>>0,t||on(e,1,this.length),this[e]};Q.prototype.readUint16LE=Q.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||on(e,2,this.length),this[e]|this[e+1]<<8};Q.prototype.readUint16BE=Q.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||on(e,2,this.length),this[e]<<8|this[e+1]};Q.prototype.readUint32LE=Q.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||on(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Q.prototype.readUint32BE=Q.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Q.prototype.readBigUInt64LE=Xa(function(e){e=e>>>0,ol(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&hp(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});Q.prototype.readBigUInt64BE=Xa(function(e){e=e>>>0,ol(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&hp(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});Q.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Q.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Q.prototype.readInt8=function(e,t){return e=e>>>0,t||on(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Q.prototype.readInt16LE=function(e,t){e=e>>>0,t||on(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt16BE=function(e,t){e=e>>>0,t||on(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt32LE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Q.prototype.readInt32BE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Q.prototype.readBigInt64LE=Xa(function(e){e=e>>>0,ol(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&hp(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Q.prototype.readBigInt64BE=Xa(function(e){e=e>>>0,ol(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&hp(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Q.prototype.readFloatLE=function(e,t){return e=e>>>0,t||on(e,4,this.length),il.read(this,e,!0,23,4)};Q.prototype.readFloatBE=function(e,t){return e=e>>>0,t||on(e,4,this.length),il.read(this,e,!1,23,4)};Q.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||on(e,8,this.length),il.read(this,e,!0,52,8)};Q.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||on(e,8,this.length),il.read(this,e,!1,52,8)};function Qn(r,e,t,n,i,o){if(!Q.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}Q.prototype.writeUintLE=Q.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Qn(this,e,t,n,c,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};Q.prototype.writeUintBE=Q.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Qn(this,e,t,n,c,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};Q.prototype.writeUint8=Q.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,1,255,0),this[t]=e&255,t+1};Q.prototype.writeUint16LE=Q.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeUint16BE=Q.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeUint32LE=Q.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};Q.prototype.writeUint32BE=Q.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function IC(r,e,t,n,i){BC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function TC(r,e,t,n,i){BC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}Q.prototype.writeBigUInt64LE=Xa(function(e,t=0){return IC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeBigUInt64BE=Xa(function(e,t=0){return TC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Qn(this,e,t,n,f-1,-f)}let o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Qn(this,e,t,n,f-1,-f)}let o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};Q.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};Q.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};Q.prototype.writeBigInt64LE=Xa(function(e,t=0){return IC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Q.prototype.writeBigInt64BE=Xa(function(e,t=0){return TC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kC(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function FC(r,e,t,n,i){return e=+e,t=t>>>0,i||kC(r,e,t,4,34028234663852886e22,-34028234663852886e22),il.write(r,e,t,n,23,4),t+4}Q.prototype.writeFloatLE=function(e,t,n){return FC(this,e,t,!0,n)};Q.prototype.writeFloatBE=function(e,t,n){return FC(this,e,t,!1,n)};function RC(r,e,t,n,i){return e=+e,t=t>>>0,i||kC(r,e,t,8,17976931348623157e292,-17976931348623157e292),il.write(r,e,t,n,52,8),t+8}Q.prototype.writeDoubleLE=function(e,t,n){return RC(this,e,t,!0,n)};Q.prototype.writeDoubleBE=function(e,t,n){return RC(this,e,t,!1,n)};Q.prototype.copy=function(e,t,n,i){if(!Q.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};Q.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Q.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=Q.isBuffer(e)?e:Q.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var nl={};function Mv(r,e,t){nl[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Mv("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Mv("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Mv("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=EC(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=EC(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function EC(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function a$(r,e,t){ol(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&hp(e,r.length-(t+1))}function BC(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:c=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:c=`>= ${e}${a} and <= ${t}${a}`,new nl.ERR_OUT_OF_RANGE("value",c,r)}a$(n,i,o)}function ol(r,e){if(typeof r!="number")throw new nl.ERR_INVALID_ARG_TYPE(e,"number",r)}function hp(r,e,t){throw Math.floor(r)!==r?(ol(r,t),new nl.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new nl.ERR_BUFFER_OUT_OF_BOUNDS:new nl.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var u$=/[^+/0-9A-Za-z-_]/g;function c$(r){if(r=r.split("=")[0],r=r.trim().replace(u$,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Lv(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function f$(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function l$(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function OC(r){return Rv.toByteArray(c$(r))}function Ay(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ys(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Kv(r){return r!==r}var h$=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Xa(r){return typeof BigInt>"u"?p$:r}function p$(){throw new Error("BigInt not supported")}});var oo=ce(mr=>{"use strict";h();p();var d$=mr&&mr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m$=mr&&mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mr,"__esModule",{value:!0});var Ln=m$(mC()),y$=dc();function g$(r,e){for(var t=new Array(r),n=typeof e=="function"?e:function(){return e},i=0;i<r;i++)t[i]=n();return t}mr.allocateArray=g$;function jv(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=ta());var n=Ln.default.h64(r,t+1),i=Ln.default.h64(r,t+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=i.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(o),second:Number(a)}}mr.hashTwice=jv;function w$(r,e){e===void 0&&(e=ta());var t=Ln.default.h64(r,e+1),n=Ln.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}}mr.hashTwiceAsString=w$;function b$(r,e){e===void 0&&(e=ta());var t=Ln.default.h64(r,e+1),n=Ln.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:t.toNumber(),second:n.toNumber()},string:{first:i,second:o}}}mr.allInOneHashTwice=b$;function $v(r,e,t,n){return Math.abs((e+r*t)%n)}mr.doubleHashing=$v;function v$(r,e,t,n){n===void 0&&(n=ta());function i(o,a,c,f,d){if(d===void 0&&(d=[]),d.length===f)return d;var m=jv(a,!0,n+c%o),w=$v(o,m.first,m.second,c);return d.includes(w)||d.push(w),i(o+1,a,c,f,d)}return i(1,r,e,t)}mr.getDistinctIndices=v$;function _$(r,e,t,n){n===void 0&&(n=ta());for(var i=[],o=1;o<=t;o++){var a=jv(r,!0,n+e%o);i.push($v(o,a.first,a.second,e))}if(i.length!==t)throw new Error("report this, please, shouldnt be of different size");return i}mr.getIndices=_$;function x$(r,e,t){t===void 0&&(t=Math.random),r=Math.ceil(r),e=Math.floor(e);var n=t();return Math.floor(n*(e-r+1))+r}mr.randomInt=x$;function E$(r,e){for(var t=Math.max(r.length,e.length),n=y$.Buffer.allocUnsafe(t).fill(0),i=0;i<t;++i)i<r.length&&i<e.length?n[t-i-1]=r[r.length-i-1]^e[e.length-i-1]:i<r.length&&i>=e.length?n[t-i-1]^=r[r.length-i-1]:i<e.length&&i>=r.length&&(n[t-i-1]^=e[e.length-i-1]);for(var o=0,a=n.values(),c=a.next();!c.done&&c.value===0;)o++,c=a.next();var f=n.slice(o);return f}mr.xorBuffer=E$;function P$(r){var e,t;if(r===null||!r)return!0;try{for(var n=d$(r),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!==0)return!1}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0}mr.isEmptyBuffer=P$;function S$(r,e,t){switch(e===void 0&&(e=ta()),t){case 32:return Ln.default.h32(r,e).toNumber();case 64:return Ln.default.h64(r,e).toNumber();default:return Ln.default.h64(r,e).toNumber()}}mr.hashAsInt=S$;function D$(r,e,t,n){e===void 0&&(e=ta()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Ln.default.h32(r,e);break;case 64:i=Ln.default.h64(r,e);break;default:i=Ln.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=zv(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),o}mr.hashAsString=D$;function A$(r,e,t,n){e===void 0&&(e=ta()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Ln.default.h32(r,e);break;case 64:i=Ln.default.h64(r,e);break;default:i=Ln.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=zv(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),{int:i.toNumber(),string:o}}mr.hashIntAndString=A$;function ta(){return 78187493520}mr.getDefaultSeed=ta;function C$(r){return Math.ceil(Math.pow(2,Math.floor(Math.log(r)/Math.log(2))))}mr.power2=C$;function zv(r){return parseInt(r,16).toString(2)}mr.hex2bin=zv;function I$(r){return[128,64,32,16,8,4,2,1].map(function(e){return(e&r)>0?1:0})}mr.uint8ToBits=I$;function T$(r){return r.reduce(function(e,t,n){if(t===0)return e;if(t===1)return e+Math.pow(2,7-n);throw new Error("Not binary")},0)}mr.bitsToUint8=T$});var NC=ce((LC,qv)=>{h();p();(function(r,e,t){function n(c){var f=this,d=a();f.next=function(){var m=2091639*f.s0+f.c*23283064365386963e-26;return f.s0=f.s1,f.s1=f.s2,f.s2=m-(f.c=m|0)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(c),f.s0<0&&(f.s0+=1),f.s1-=d(c),f.s1<0&&(f.s1+=1),f.s2-=d(c),f.s2<0&&(f.s2+=1),d=null}function i(c,f){return f.c=c.c,f.s0=c.s0,f.s1=c.s1,f.s2=c.s2,f}function o(c,f){var d=new n(c),m=f&&f.state,w=d.next;return w.int32=function(){return d.next()*4294967296|0},w.double=function(){return w()+(w()*2097152|0)*11102230246251565e-32},w.quick=w,m&&(typeof m=="object"&&i(m,d),w.state=function(){return i(d,{})}),w}function a(){var c=4022871197,f=function(d){d=String(d);for(var m=0;m<d.length;m++){c+=d.charCodeAt(m);var w=.02519603282416938*c;c=w>>>0,w-=c,w*=c,c=w>>>0,w-=c,c+=w*4294967296}return(c>>>0)*23283064365386963e-26};return f}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(LC,typeof qv=="object"&&qv,typeof define=="function"&&define)});var MC=ce((UC,Wv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var m=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^m^m>>>8},a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,x=(f.next()>>>0)/4294967296,T=(w+x)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(UC,typeof Wv=="object"&&Wv,typeof define=="function"&&define)});var jC=ce((KC,Vv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(m^m<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,x=(f.next()>>>0)/4294967296,T=(w+x)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(KC,typeof Vv=="object"&&Vv,typeof define=="function"&&define)});var zC=ce(($C,Hv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.x,m=c.i,w,x,T;return w=d[m],w^=w>>>7,x=w^w<<24,w=d[m+1&7],x^=w^w>>>10,w=d[m+3&7],x^=w^w>>>3,w=d[m+4&7],x^=w^w<<7,w=d[m+7&7],w=w^w<<13,x^=w^w<<9,d[m]=x,c.i=m+1&7,x};function f(d,m){var w,x,T=[];if(m===(m|0))x=T[0]=m;else for(m=""+m,w=0;w<m.length;++w)T[w&7]=T[w&7]<<15^m.charCodeAt(w)+T[w+1&7]<<13;for(;T.length<8;)T.push(0);for(w=0;w<8&&T[w]===0;++w);for(w==8?x=T[7]=-1:x=T[w],d.x=T,d.i=0,w=256;w>0;--w)d.next()}f(c,a)}function i(a,c){return c.x=a.x.slice(),c.i=a.i,c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,x=(f.next()>>>0)/4294967296,T=(w+x)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.x&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})($C,typeof Hv=="object"&&Hv,typeof define=="function"&&define)});var WC=ce((qC,Gv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.w,m=c.X,w=c.i,x,T;return c.w=d=d+1640531527|0,T=m[w+34&127],x=m[w=w+1&127],T^=T<<13,x^=x<<17,T^=T>>>15,x^=x>>>12,T=m[w]=T^x,c.i=w,T+(d^d>>>16)|0};function f(d,m){var w,x,T,F,N,ue=[],pe=128;for(m===(m|0)?(x=m,m=null):(m=m+"\0",x=0,pe=Math.max(pe,m.length)),T=0,F=-32;F<pe;++F)m&&(x^=m.charCodeAt((F+32)%m.length)),F===0&&(N=x),x^=x<<10,x^=x>>>15,x^=x<<4,x^=x>>>13,F>=0&&(N=N+1640531527|0,w=ue[F&127]^=x+N,T=w==0?T+1:0);for(T>=128&&(ue[(m&&m.length||0)&127]=-1),T=127,F=4*128;F>0;--F)x=ue[T+34&127],w=ue[T=T+1&127],x^=x<<13,w^=w<<17,x^=x>>>15,w^=w>>>12,ue[T]=x^w;d.w=N,d.X=ue,d.i=T}f(c,a)}function i(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,x=(f.next()>>>0)/4294967296,T=(w+x)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.X&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(qC,typeof Gv=="object"&&Gv,typeof define=="function"&&define)});var HC=ce((VC,Yv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.b,w=c.c,x=c.d,T=c.a;return m=m<<25^m>>>7^w,w=w-x|0,x=x<<24^x>>>8^T,T=T-m|0,c.b=m=m<<20^m>>>12^w,c.c=w=w-x|0,c.d=x<<16^w>>>16^T,c.a=T-m|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):f+=a;for(var d=0;d<f.length+20;d++)c.b^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,x=(f.next()>>>0)/4294967296,T=(w+x)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(VC,typeof Yv=="object"&&Yv,typeof define=="function"&&define)});var Jv=ce(()=>{h();p()});var YC=ce((GC,Cy)=>{h();p();(function(r,e,t){var n=256,i=6,o=52,a="random",c=t.pow(n,i),f=t.pow(2,o),d=f*2,m=n-1,w;function x(re,be,Pe){var Y=[];be=be==!0?{entropy:!0}:be||{};var ge=ue(N(be.entropy?[re,De(e)]:re??pe(),3),Y),_e=new T(Y),Me=function(){for(var vt=_e.g(i),Nt=c,Bt=0;vt<f;)vt=(vt+Bt)*n,Nt*=n,Bt=_e.g(1);for(;vt>=d;)vt/=2,Nt/=2,Bt>>>=1;return(vt+Bt)/Nt};return Me.int32=function(){return _e.g(4)|0},Me.quick=function(){return _e.g(4)/4294967296},Me.double=Me,ue(De(_e.S),e),(be.pass||Pe||function(vt,Nt,Bt,qt){return qt&&(qt.S&&F(qt,_e),vt.state=function(){return F(_e,{})}),Bt?(t[a]=vt,Nt):vt})(Me,ge,"global"in be?be.global:this==t,be.state)}function T(re){var be,Pe=re.length,Y=this,ge=0,_e=Y.i=Y.j=0,Me=Y.S=[];for(Pe||(re=[Pe++]);ge<n;)Me[ge]=ge++;for(ge=0;ge<n;ge++)Me[ge]=Me[_e=m&_e+re[ge%Pe]+(be=Me[ge])],Me[_e]=be;(Y.g=function(vt){for(var Nt,Bt=0,qt=Y.i,hr=Y.j,Mt=Y.S;vt--;)Nt=Mt[qt=m&qt+1],Bt=Bt*n+Mt[m&(Mt[qt]=Mt[hr=m&hr+Nt])+(Mt[hr]=Nt)];return Y.i=qt,Y.j=hr,Bt})(n)}function F(re,be){return be.i=re.i,be.j=re.j,be.S=re.S.slice(),be}function N(re,be){var Pe=[],Y=typeof re,ge;if(be&&Y=="object")for(ge in re)try{Pe.push(N(re[ge],be-1))}catch{}return Pe.length?Pe:Y=="string"?re:re+"\0"}function ue(re,be){for(var Pe=re+"",Y,ge=0;ge<Pe.length;)be[m&ge]=m&(Y^=be[m&ge]*19)+Pe.charCodeAt(ge++);return De(be)}function pe(){try{var re;return w&&(re=w.randomBytes)?re=re(n):(re=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(re)),De(re)}catch{var be=r.navigator,Pe=be&&be.plugins;return[+new Date,r,Pe,r.screen,De(e)]}}function De(re){return String.fromCharCode.apply(0,re)}if(ue(t.random(),e),typeof Cy=="object"&&Cy.exports){Cy.exports=x;try{w=Jv()}catch{}}else typeof define=="function"&&define.amd?define(function(){return x}):t["seed"+a]=x})(typeof self<"u"?self:GC,[],Math)});var XC=ce((Wse,JC)=>{h();p();var k$=NC(),F$=MC(),R$=jC(),B$=zC(),O$=WC(),L$=HC(),mc=YC();mc.alea=k$;mc.xor128=F$;mc.xorwow=R$;mc.xorshift7=B$;mc.xor4096=O$;mc.tychei=L$;JC.exports=mc});var Bo=ce(yc=>{"use strict";h();p();var N$=yc&&yc.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},U$=yc&&yc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yc,"__esModule",{value:!0});var M$=N$(oo()),QC=U$(XC()),K$=function(){function r(){this._seed=M$.getDefaultSeed(),this._rng=QC.default(""+this._seed)}return Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=QC.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.saveAsJSON=function(){throw new Error("not-implemented")},r.fromJSON=function(e){throw new Error("not-implemented")},r}();yc.default=K$});var e8=ce(()=>{h();p();var ZC;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,a){return function(c,f){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:f}),a&&a(c,f)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",c={__proto__:[]}instanceof Array,f=!a&&!c,d={create:a?function(){return cn(Object.create(null))}:c?function(){return cn({__proto__:null})}:function(){return cn({})},has:f?function($,J){return t.call($,J)}:function($,J){return J in $},get:f?function($,J){return t.call($,J)?$[J]:void 0}:function($,J){return $[J]}},m=Object.getPrototypeOf(Function),w=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",x=!w&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:zn(),T=!w&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:qn(),F=!w&&typeof WeakMap=="function"?WeakMap:wo(),N=new F;function ue($,J,he,ve){if(nr(he)){if(!Ki($))throw new TypeError;if(!Vr(J))throw new TypeError;return vt($,J)}else{if(!Ki($))throw new TypeError;if(!Ve(J))throw new TypeError;if(!Ve(ve)&&!nr(ve)&&!Wt(ve))throw new TypeError;return Wt(ve)&&(ve=void 0),he=Br(he),Nt($,J,he,ve)}}e("decorate",ue);function pe($,J){function he(ve,je){if(!Ve(ve))throw new TypeError;if(!nr(je)&&!go(je))throw new TypeError;Cn($,J,ve,je)}return he}e("metadata",pe);function De($,J,he,ve){if(!Ve(he))throw new TypeError;return nr(ve)||(ve=Br(ve)),Cn($,J,he,ve)}e("defineMetadata",De);function re($,J,he){if(!Ve(J))throw new TypeError;return nr(he)||(he=Br(he)),qt($,J,he)}e("hasMetadata",re);function be($,J,he){if(!Ve(J))throw new TypeError;return nr(he)||(he=Br(he)),hr($,J,he)}e("hasOwnMetadata",be);function Pe($,J,he){if(!Ve(J))throw new TypeError;return nr(he)||(he=Br(he)),Mt($,J,he)}e("getMetadata",Pe);function Y($,J,he){if(!Ve(J))throw new TypeError;return nr(he)||(he=Br(he)),jr($,J,he)}e("getOwnMetadata",Y);function ge($,J){if(!Ve($))throw new TypeError;return nr(J)||(J=Br(J)),Rr($,J)}e("getMetadataKeys",ge);function _e($,J){if(!Ve($))throw new TypeError;return nr(J)||(J=Br(J)),Wr($,J)}e("getOwnMetadataKeys",_e);function Me($,J,he){if(!Ve(J))throw new TypeError;nr(he)||(he=Br(he));var ve=Bt(J,he,!1);if(nr(ve)||!ve.delete($))return!1;if(ve.size>0)return!0;var je=N.get(J);return je.delete(he),je.size>0||N.delete(J),!0}e("deleteMetadata",Me);function vt($,J){for(var he=$.length-1;he>=0;--he){var ve=$[he],je=ve(J);if(!nr(je)&&!Wt(je)){if(!Vr(je))throw new TypeError;J=je}}return J}function Nt($,J,he,ve){for(var je=$.length-1;je>=0;--je){var or=$[je],tt=or(J,he,ve);if(!nr(tt)&&!Wt(tt)){if(!Ve(tt))throw new TypeError;ve=tt}}return ve}function Bt($,J,he){var ve=N.get($);if(nr(ve)){if(!he)return;ve=new x,N.set($,ve)}var je=ve.get(J);if(nr(je)){if(!he)return;je=new x,ve.set(J,je)}return je}function qt($,J,he){var ve=hr($,J,he);if(ve)return!0;var je=ur(J);return Wt(je)?!1:qt($,je,he)}function hr($,J,he){var ve=Bt(J,he,!1);return nr(ve)?!1:Mi(ve.has($))}function Mt($,J,he){var ve=hr($,J,he);if(ve)return jr($,J,he);var je=ur(J);if(!Wt(je))return Mt($,je,he)}function jr($,J,he){var ve=Bt(J,he,!1);if(!nr(ve))return ve.get($)}function Cn($,J,he,ve){var je=Bt(he,ve,!0);je.set($,J)}function Rr($,J){var he=Wr($,J),ve=ur($);if(ve===null)return he;var je=Rr(ve,J);if(je.length<=0)return he;if(he.length<=0)return je;for(var or=new T,tt=[],ut=0,qe=he;ut<qe.length;ut++){var yt=qe[ut],pt=or.has(yt);pt||(or.add(yt),tt.push(yt))}for(var Pr=0,bo=je;Pr<bo.length;Pr++){var yt=bo[Pr],pt=or.has(yt);pt||(or.add(yt),tt.push(yt))}return tt}function Wr($,J){var he=[],ve=Bt($,J,!1);if(nr(ve))return he;for(var je=ve.keys(),or=In(je),tt=0;;){var ut=Sa(or);if(!ut)return he.length=tt,he;var qe=vn(ut);try{he[tt]=qe}catch(yt){try{Qr(or)}finally{throw yt}}tt++}}function ks($){if($===null)return 1;switch(typeof $){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return $===null?1:6;default:return 6}}function nr($){return $===void 0}function Wt($){return $===null}function wr($){return typeof $=="symbol"}function Ve($){return typeof $=="object"?$!==null:typeof $=="function"}function Xr($,J){switch(ks($)){case 0:return $;case 1:return $;case 2:return $;case 3:return $;case 4:return $;case 5:return $}var he=J===3?"string":J===5?"number":"default",ve=Pa($,i);if(ve!==void 0){var je=ve.call($,he);if(Ve(je))throw new TypeError;return je}return Ui($,he==="default"?"number":he)}function Ui($,J){if(J==="string"){var he=$.toString;if(bn(he)){var ve=he.call($);if(!Ve(ve))return ve}var je=$.valueOf;if(bn(je)){var ve=je.call($);if(!Ve(ve))return ve}}else{var je=$.valueOf;if(bn(je)){var ve=je.call($);if(!Ve(ve))return ve}var or=$.toString;if(bn(or)){var ve=or.call($);if(!Ve(ve))return ve}}throw new TypeError}function Mi($){return!!$}function rs($){return""+$}function Br($){var J=Xr($,3);return wr(J)?J:rs(J)}function Ki($){return Array.isArray?Array.isArray($):$ instanceof Object?$ instanceof Array:Object.prototype.toString.call($)==="[object Array]"}function bn($){return typeof $=="function"}function Vr($){return typeof $=="function"}function go($){switch(ks($)){case 3:return!0;case 4:return!0;default:return!1}}function Pa($,J){var he=$[J];if(he!=null){if(!bn(he))throw new TypeError;return he}}function In($){var J=Pa($,o);if(!bn(J))throw new TypeError;var he=J.call($);if(!Ve(he))throw new TypeError;return he}function vn($){return $.value}function Sa($){var J=$.next();return J.done?!1:J}function Qr($){var J=$.return;J&&J.call($)}function ur($){var J=Object.getPrototypeOf($);if(typeof $!="function"||$===m||J!==m)return J;var he=$.prototype,ve=he&&Object.getPrototypeOf(he);if(ve==null||ve===Object.prototype)return J;var je=ve.constructor;return typeof je!="function"||je===$?J:je}function zn(){var $={},J=[],he=function(){function tt(ut,qe,yt){this._index=0,this._keys=ut,this._values=qe,this._selector=yt}return tt.prototype["@@iterator"]=function(){return this},tt.prototype[o]=function(){return this},tt.prototype.next=function(){var ut=this._index;if(ut>=0&&ut<this._keys.length){var qe=this._selector(this._keys[ut],this._values[ut]);return ut+1>=this._keys.length?(this._index=-1,this._keys=J,this._values=J):this._index++,{value:qe,done:!1}}return{value:void 0,done:!0}},tt.prototype.throw=function(ut){throw this._index>=0&&(this._index=-1,this._keys=J,this._values=J),ut},tt.prototype.return=function(ut){return this._index>=0&&(this._index=-1,this._keys=J,this._values=J),{value:ut,done:!0}},tt}();return function(){function tt(){this._keys=[],this._values=[],this._cacheKey=$,this._cacheIndex=-2}return Object.defineProperty(tt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),tt.prototype.has=function(ut){return this._find(ut,!1)>=0},tt.prototype.get=function(ut){var qe=this._find(ut,!1);return qe>=0?this._values[qe]:void 0},tt.prototype.set=function(ut,qe){var yt=this._find(ut,!0);return this._values[yt]=qe,this},tt.prototype.delete=function(ut){var qe=this._find(ut,!1);if(qe>=0){for(var yt=this._keys.length,pt=qe+1;pt<yt;pt++)this._keys[pt-1]=this._keys[pt],this._values[pt-1]=this._values[pt];return this._keys.length--,this._values.length--,ut===this._cacheKey&&(this._cacheKey=$,this._cacheIndex=-2),!0}return!1},tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=$,this._cacheIndex=-2},tt.prototype.keys=function(){return new he(this._keys,this._values,ve)},tt.prototype.values=function(){return new he(this._keys,this._values,je)},tt.prototype.entries=function(){return new he(this._keys,this._values,or)},tt.prototype["@@iterator"]=function(){return this.entries()},tt.prototype[o]=function(){return this.entries()},tt.prototype._find=function(ut,qe){return this._cacheKey!==ut&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ut)),this._cacheIndex<0&&qe&&(this._cacheIndex=this._keys.length,this._keys.push(ut),this._values.push(void 0)),this._cacheIndex},tt}();function ve(tt,ut){return tt}function je(tt,ut){return ut}function or(tt,ut){return[tt,ut]}}function qn(){return function(){function $(){this._map=new x}return Object.defineProperty($.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),$.prototype.has=function(J){return this._map.has(J)},$.prototype.add=function(J){return this._map.set(J,J),this},$.prototype.delete=function(J){return this._map.delete(J)},$.prototype.clear=function(){this._map.clear()},$.prototype.keys=function(){return this._map.keys()},$.prototype.values=function(){return this._map.values()},$.prototype.entries=function(){return this._map.entries()},$.prototype["@@iterator"]=function(){return this.keys()},$.prototype[o]=function(){return this.keys()},$}()}function wo(){var $=16,J=d.create(),he=ve();return function(){function qe(){this._key=ve()}return qe.prototype.has=function(yt){var pt=je(yt,!1);return pt!==void 0?d.has(pt,this._key):!1},qe.prototype.get=function(yt){var pt=je(yt,!1);return pt!==void 0?d.get(pt,this._key):void 0},qe.prototype.set=function(yt,pt){var Pr=je(yt,!0);return Pr[this._key]=pt,this},qe.prototype.delete=function(yt){var pt=je(yt,!1);return pt!==void 0?delete pt[this._key]:!1},qe.prototype.clear=function(){this._key=ve()},qe}();function ve(){var qe;do qe="@@WeakMap@@"+ut();while(d.has(J,qe));return J[qe]=!0,qe}function je(qe,yt){if(!t.call(qe,he)){if(!yt)return;Object.defineProperty(qe,he,{value:d.create()})}return qe[he]}function or(qe,yt){for(var pt=0;pt<yt;++pt)qe[pt]=Math.random()*255|0;return qe}function tt(qe){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(qe)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(qe)):or(new Uint8Array(qe),qe):or(new Array(qe),qe)}function ut(){var qe=tt($);qe[6]=qe[6]&79|64,qe[8]=qe[8]&191|128;for(var yt="",pt=0;pt<$;++pt){var Pr=qe[pt];(pt===4||pt===6||pt===8)&&(yt+="-"),Pr<16&&(yt+="0"),yt+=Pr.toString(16).toLowerCase()}return yt}}function cn($){return $.__=void 0,delete $.__,$}})})(ZC||(ZC={}))});var vi=ce(so=>{"use strict";h();p();var j$=so&&so.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},$$=so&&so.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(j$(arguments[e]));return r};Object.defineProperty(so,"__esModule",{value:!0});e8();function pp(r){return r==null?r:Array.isArray(r)?r.map(pp):typeof r=="object"?"saveAsJSON"in r?r.saveAsJSON():Object.assign({},r):r}so.cloneField=pp;function z$(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(n){var i={type:r};return e.forEach(function(o){i[o]=pp(n[o])}),i}}so.cloneObject=z$;function q$(r){return function(e){return e.prototype.saveAsJSON=function(){return r.export(this)},e.fromJSON=function(t){return r.import(t)},e}}so.Exportable=q$;var Xv=Symbol("bloom-filters:exportable:class-name"),al=Symbol("bloom-filters:exportable:fields"),ul=Symbol("bloom-filters:exportable:constructor-parameters");function W$(r,e){return r===void 0&&(r=pp),e===void 0&&(e=function(t){return t}),function(t,n){var i=[];Reflect.hasMetadata(al,t)&&(i=Reflect.getMetadata(al,t)),i.push({name:n,exporter:r,importer:e}),Reflect.defineMetadata(al,i,t)}}so.Field=W$;function V$(r){return function(e,t,n){var i=new Map;Reflect.hasMetadata(ul,e)&&(i=Reflect.getMetadata(ul,e)),i.set(r,n),Reflect.defineMetadata(ul,i,e)}}so.Parameter=V$;function H$(r,e){return e===void 0&&(e=[]),function(t){if(Reflect.defineMetadata(Xv,r,t.prototype),!Reflect.hasMetadata(al,t.prototype)||e.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(ul,t)||Reflect.defineMetadata(ul,new Map,t),t.prototype.saveAsJSON=function(){var n=this,i={type:Reflect.getMetadata(Xv,t.prototype)},o=Reflect.getMetadata(al,t.prototype);return o.forEach(function(a){i[a.name]=a.exporter(n[a.name])}),e.forEach(function(a){i[a]=pp(n[a])}),i},t.fromJSON=function(n){var i=Reflect.getMetadata(Xv,t.prototype),o=Reflect.getMetadata(ul,t),a=Reflect.getMetadata(al,t.prototype);if(n.type!==i)throw new Error("Cannot create an object "+i+' from a JSON export with type "'+n.type+'"');var c=[],f=[];e.map(function(m){return{name:m,importer:function(w){return w}}}).concat(a).forEach(function(m){if(!(m.name in n))throw new Error('Invalid import: required field "'+m+'" not found in JSON export "'+n+'"');o.has(m.name)?c[o.get(m.name)]=m.importer(n[m.name]):f.push({name:m.name,value:m.importer(n[m.name])})});var d=new(t.bind.apply(t,$$([void 0],c)));return f.forEach(function(m){d[m.name]=m.value}),d}}}so.AutoExportable=H$});var Ty=ce(Iy=>{"use strict";h();p();Object.defineProperty(Iy,"__esModule",{value:!0});function G$(r,e){return Math.ceil(-(r*Math.log(e)/Math.pow(Math.log(2),2)))}Iy.optimalFilterSize=G$;function Y$(r,e){return Math.ceil(r/e*Math.log(2))}Iy.optimalHashes=Y$});var n8=ce(_i=>{"use strict";h();p();var J$=_i&&_i.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dp=_i&&_i.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mp=_i&&_i.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},t8=_i&&_i.__param||function(r,e){return function(t,n){e(t,n,r)}},X$=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var Q$=X$(Bo()),gc=vi(),r8=Ty(),yp=oo(),Z$=function(r){J$(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+i+".");return o._size=n,o._nbHashes=i,o._filter=yp.allocateArray(o._size,0),o._length=0,o}t=e,e.create=function(n,i){var o=r8.optimalFilterSize(n,i),a=r8.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},e.fromBytes=function(n,i){for(var o=[],a=0;a<n.length;a++){var c=yp.uint8ToBits(n[a]);o=o.concat(c)}var f=new t(o.length,i);return f._filter=o,f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=yp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=yp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(i,o){return n._filter[o]===i})},e.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),i=0;i<n.length;i++){var o=this._filter.slice(i*8,i*8+8);n[i]=yp.bitsToUint8(o)}return n};var t;return dp([gc.Field(),mp("design:type",Number)],e.prototype,"_size",void 0),dp([gc.Field(),mp("design:type",Number)],e.prototype,"_nbHashes",void 0),dp([gc.Field(),mp("design:type",Array)],e.prototype,"_filter",void 0),dp([gc.Field(),mp("design:type",Number)],e.prototype,"_length",void 0),e=t=dp([gc.AutoExportable("BloomFilter",["_seed"]),t8(0,gc.Parameter("_size")),t8(1,gc.Parameter("_nbHashes")),mp("design:paramtypes",[Number,Number])],e),e}(Q$.default);_i.default=Z$});var s8=ce(xi=>{"use strict";h();p();var ez=xi&&xi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gp=xi&&xi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wp=xi&&xi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},i8=xi&&xi.__param||function(r,e){return function(t,n){e(t,n,r)}},tz=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var rz=tz(Bo()),wc=vi(),o8=Ty(),ky=oo(),nz=function(r){ez(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+i+" functions. Consider increasing it.");return o._size=n,o._nbHashes=i,o._filter=ky.allocateArray(o._size,function(){return[0,0]}),o._length=0,o}t=e,e.create=function(n,i){var o=o8.optimalFilterSize(n,i);return new t(o,o8.optimalHashes(o,n))},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=ky.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]][1]+=1,this._filter[i[o]][1]>0&&(this._filter[i[o]][0]=1);this._length++},e.prototype.remove=function(n){for(var i=ky.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=!0,a=0;a<i.length;a++)this._filter[i[a]][1]-=1,this._filter[i[a]][1]<=0&&(this._filter[i[a]][0]=0);return this._length--,o},e.prototype.has=function(n){for(var i=ky.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(i,o){return n._filter[o][0]===i[0]&&n._filter[o][1]===i[1]})};var t;return gp([wc.Field(),wp("design:type",Number)],e.prototype,"_size",void 0),gp([wc.Field(),wp("design:type",Number)],e.prototype,"_nbHashes",void 0),gp([wc.Field(),wp("design:type",Array)],e.prototype,"_filter",void 0),gp([wc.Field(),wp("design:type",Number)],e.prototype,"_length",void 0),e=t=gp([wc.AutoExportable("CountingBloomFilter",["_seed"]),i8(0,wc.Parameter("_size")),i8(1,wc.Parameter("_nbHashes")),wp("design:paramtypes",[Number,Number])],e),e}(rz.default);xi.default=nz});var a8=ce(Ei=>{"use strict";h();p();var iz=Ei&&Ei.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qa=Ei&&Ei.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Za=Ei&&Ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Fy=Ei&&Ei.__param||function(r,e){return function(t,n){e(t,n,r)}},oz=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var sz=oz(Bo()),ao=vi(),Ry=oo();function az(r,e){return Math.ceil(Math.log(r)/Math.log(e))}function uz(r,e,t){return Math.ceil(r*-Math.log(e)/(Math.log(t)*Math.log(1-t)))}function cz(r,e,t){return Math.ceil(r*(Math.log(e)*Math.log(1-e))/-(t*Math.log(e)))}var fz=function(r){iz(e,r);function e(n,i,o,a){var c=r.call(this)||this;return c._size=n,c._nbHashes=i,c._loadFactor=o,c._m=Math.ceil(c._size/c._nbHashes),c._filter=Ry.allocateArray(c._nbHashes,function(){return Ry.allocateArray(c._m,0)}),c._capacity=a!==void 0?a:cz(c._size,o,i),c._length=0,c}t=e,e.create=function(n,i,o){o===void 0&&(o=.5);var a=uz(n,i,o),c=az(i,o);return new t(a,c,o,n)},e.from=function(n,i,o){o===void 0&&(o=.5);var a=Array.from(n),c=t.create(a.length,i,o);return a.forEach(function(f){return c.add(f)}),c},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=Ry.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)this._filter[o][i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=Ry.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)if(!this._filter[o][i[o]])return!1;return!0},e.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(i,o){return n._filter[o].every(function(a,c){return i[c]===a})})},e.prototype._currentload=function(){var n=this._filter.map(function(o){return o.reduce(function(a,c){return a+c},0)}),i=n.reduce(function(o,a){return o+a},0);return i/this._size};var t;return Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_size",void 0),Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_nbHashes",void 0),Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_loadFactor",void 0),Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_m",void 0),Qa([ao.Field(),Za("design:type",Array)],e.prototype,"_filter",void 0),Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_capacity",void 0),Qa([ao.Field(),Za("design:type",Number)],e.prototype,"_length",void 0),e=t=Qa([ao.AutoExportable("PartitionedBloomFilter",["_seed"]),Fy(0,ao.Parameter("_size")),Fy(1,ao.Parameter("_nbHashes")),Fy(2,ao.Parameter("_loadFactor")),Fy(3,ao.Parameter("_capacity")),Za("design:paramtypes",[Number,Number,Number,Number])],e),e}(sz.default);Ei.default=fz});var Qv=ce(Nn=>{"use strict";h();p();var lz=Nn&&Nn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bp=Nn&&Nn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vp=Nn&&Nn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},u8=Nn&&Nn.__param||function(r,e){return function(t,n){e(t,n,r)}},hz=Nn&&Nn.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pz=Nn&&Nn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nn,"__esModule",{value:!0});var dz=pz(Bo()),bc=vi(),By=oo(),mz=function(r){lz(e,r);function e(n,i){var o=r.call(this)||this;return o._columns=n,o._rows=i,o._matrix=By.allocateArray(o._rows,function(){return By.allocateArray(o._columns,0)}),o._allSums=0,o}t=e,e.create=function(n,i){i===void 0&&(i=.999);var o=Math.ceil(Math.E/n),a=Math.ceil(Math.log(1/i));return new t(o,a)},e.from=function(n,i,o){var a,c;o===void 0&&(o=.999);var f=t.create(i,o);try{for(var d=hz(n),m=d.next();!m.done;m=d.next()){var w=m.value;f.update(w)}}catch(x){a={error:x}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}return f},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(n,i){i===void 0&&(i=1),this._allSums+=i;for(var o=By.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++)this._matrix[a][o[a]]+=i},e.prototype.count=function(n){for(var i=1/0,o=By.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++){var c=this._matrix[a][o[a]];i=Math.min(c,i)}return i},e.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)if(this._matrix[i][o]!==n._matrix[i][o])return!1;return!0},e.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)this._matrix[i][o]+=n._matrix[i][o]},e.prototype.clone=function(){var n=new t(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var t;return bp([bc.Field(),vp("design:type",Number)],e.prototype,"_columns",void 0),bp([bc.Field(),vp("design:type",Number)],e.prototype,"_rows",void 0),bp([bc.Field(),vp("design:type",Array)],e.prototype,"_matrix",void 0),bp([bc.Field(),vp("design:type",Number)],e.prototype,"_allSums",void 0),e=t=bp([bc.AutoExportable("CountMinSketch",["_seed"]),u8(0,bc.Parameter("_columns")),u8(1,bc.Parameter("_rows")),vp("design:paramtypes",[Number,Number])],e),e}(dz.default);Nn.default=mz});var f8=ce(Pi=>{"use strict";h();p();var yz=Pi&&Pi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_p=Pi&&Pi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xp=Pi&&Pi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},gz=Pi&&Pi.__param||function(r,e){return function(t,n){e(t,n,r)}},wz=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var bz=wz(Bo()),cl=vi(),c8=oo(),Zv=Math.pow(2,32);function vz(r){switch(r){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/r)}}var _z=function(r){yz(e,r);function e(n){var i=r.call(this)||this;return i._nbRegisters=n,i._nbBytesPerHash=Math.round(Math.log2(n)),i._correctionBias=vz(n),i._registers=c8.allocateArray(i._nbRegisters,0),i}t=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(n){for(var i=c8.hashAsInt(n,this.seed).toString(2),o=1+parseInt(i.slice(0,this._nbBytesPerHash-1),2),a=i.slice(this._nbBytesPerHash),c=0;a[c]!=="1"&&c<a.length-1;)c++;this._registers[o]=Math.max(this._registers[o],c)},e.prototype.count=function(n){n===void 0&&(n=!1);var i=this._registers.reduce(function(a,c){return a+Math.pow(2,-c)},0),o=this._correctionBias*Math.pow(this._nbRegisters,2)/i;return o>Zv/30&&(o=-Zv*Math.log(1-o/Zv)),n&&(o=Math.round(o)),o},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var i=new t(this.nbRegisters),o=0;o<this.nbRegisters-1;o++)i._registers[o]=Math.max(this._registers[o],n._registers[o]);return i},e.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var i=0;i<this.nbRegisters-1;i++)if(this._registers[i]!==n._registers[i])return!1;return!0};var t;return _p([cl.Field(),xp("design:type",Number)],e.prototype,"_nbRegisters",void 0),_p([cl.Field(),xp("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),_p([cl.Field(),xp("design:type",Number)],e.prototype,"_correctionBias",void 0),_p([cl.Field(),xp("design:type",Array)],e.prototype,"_registers",void 0),e=t=_p([cl.AutoExportable("HyperLogLog",["_seed"]),gz(0,cl.Parameter("_nbRegisters")),xp("design:paramtypes",[Number])],e),e}(bz.default);Pi.default=_z});var Oy=ce((fl,Ep)=>{h();p();(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,m=2,w=4,x=1,T=2,F=1,N=2,ue=4,pe=8,De=16,re=32,be=64,Pe=128,Y=256,ge=512,_e=30,Me="...",vt=800,Nt=16,Bt=1,qt=2,hr=3,Mt=1/0,jr=9007199254740991,Cn=17976931348623157e292,Rr=0/0,Wr=4294967295,ks=Wr-1,nr=Wr>>>1,Wt=[["ary",Pe],["bind",F],["bindKey",N],["curry",pe],["curryRight",De],["flip",ge],["partial",re],["partialRight",be],["rearg",Y]],wr="[object Arguments]",Ve="[object Array]",Xr="[object AsyncFunction]",Ui="[object Boolean]",Mi="[object Date]",rs="[object DOMException]",Br="[object Error]",Ki="[object Function]",bn="[object GeneratorFunction]",Vr="[object Map]",go="[object Number]",Pa="[object Null]",In="[object Object]",vn="[object Promise]",Sa="[object Proxy]",Qr="[object RegExp]",ur="[object Set]",zn="[object String]",qn="[object Symbol]",wo="[object Undefined]",cn="[object WeakMap]",$="[object WeakSet]",J="[object ArrayBuffer]",he="[object DataView]",ve="[object Float32Array]",je="[object Float64Array]",or="[object Int8Array]",tt="[object Int16Array]",ut="[object Int32Array]",qe="[object Uint8Array]",yt="[object Uint8ClampedArray]",pt="[object Uint16Array]",Pr="[object Uint32Array]",bo=/\b__p \+= '';/g,Fs=/\b(__p \+=) '' \+/g,vo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rs=/&(?:amp|lt|gt|quot|#39);/g,Ru=/[&<>"']/g,ji=RegExp(Rs.source),yh=RegExp(Ru.source),si=/<%-([\s\S]+?)%>/g,$i=/<%([\s\S]+?)%>/g,_o=/<%=([\s\S]+?)%>/g,Bu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ou=/^\w*$/,mf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lu=/[\\^$.*+?()[\]{}|]/g,fn=RegExp(Lu.source),Da=/^\s+/,b=/\s/,S=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,P=/\{\n\/\* \[wrapped with (.+)\] \*/,y=/,? & /,I=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,M=/[()=,{}\[\]\/\s]/,j=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Ae=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,lt=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",ft="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",Ie="\\u20d0-\\u20ff",ze=ft+nt+Ie,xe="\\u2700-\\u27bf",Fe="a-z\\xdf-\\xf6\\xf8-\\xff",Re="\\xac\\xb1\\xd7\\xf7",Ee="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",q="\\u2000-\\u206f",W=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",le="A-Z\\xc0-\\xd6\\xd8-\\xde",ne="\\ufe0e\\ufe0f",ie=Re+Ee+q+W,_="['\u2019]",k="["+et+"]",A="["+ie+"]",B="["+ze+"]",O="\\d+",v="["+xe+"]",z="["+Fe+"]",H="[^"+et+ie+O+xe+Fe+le+"]",X="\\ud83c[\\udffb-\\udfff]",G="(?:"+B+"|"+X+")",te="[^"+et+"]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+le+"]",Qe="\\u200d",dt="(?:"+z+"|"+H+")",mt="(?:"+Le+"|"+H+")",Ot="(?:"+_+"(?:d|ll|m|re|s|t|ve))?",cr="(?:"+_+"(?:D|LL|M|RE|S|T|VE))?",br=G+"?",Or="["+ne+"]?",gh="(?:"+Qe+"(?:"+[te,me,$e].join("|")+")"+Or+br+")*",qE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Z0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kd=Or+br+gh,jd="(?:"+[v,me,$e].join("|")+")"+Kd,wB="(?:"+[te+B+"?",B,me,$e,k].join("|")+")",bB=RegExp(_,"g"),vB=RegExp(B,"g"),ew=RegExp(X+"(?="+X+")|"+wB+Kd,"g"),_B=RegExp([Le+"?"+z+"+"+Ot+"(?="+[A,Le,"$"].join("|")+")",mt+"+"+cr+"(?="+[A,Le+dt,"$"].join("|")+")",Le+"?"+dt+"+"+Ot,Le+"+"+cr,Z0,qE,O,jd].join("|"),"g"),xB=RegExp("["+Qe+et+ze+ne+"]"),EB=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,PB=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],SB=-1,fr={};fr[ve]=fr[je]=fr[or]=fr[tt]=fr[ut]=fr[qe]=fr[yt]=fr[pt]=fr[Pr]=!0,fr[wr]=fr[Ve]=fr[J]=fr[Ui]=fr[he]=fr[Mi]=fr[Br]=fr[Ki]=fr[Vr]=fr[go]=fr[In]=fr[Qr]=fr[ur]=fr[zn]=fr[cn]=!1;var sr={};sr[wr]=sr[Ve]=sr[J]=sr[he]=sr[Ui]=sr[Mi]=sr[ve]=sr[je]=sr[or]=sr[tt]=sr[ut]=sr[Vr]=sr[go]=sr[In]=sr[Qr]=sr[ur]=sr[zn]=sr[qn]=sr[qe]=sr[yt]=sr[pt]=sr[Pr]=!0,sr[Br]=sr[Ki]=sr[cn]=!1;var DB={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},AB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IB={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},TB=parseFloat,kB=parseInt,WE=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,FB=typeof self=="object"&&self&&self.Object===Object&&self,Zr=WE||FB||Function("return this")(),tw=typeof fl=="object"&&fl&&!fl.nodeType&&fl,Nu=tw&&typeof Ep=="object"&&Ep&&!Ep.nodeType&&Ep,VE=Nu&&Nu.exports===tw,rw=VE&&WE.process,zi=function(){try{var U=Nu&&Nu.require&&Nu.require("util").types;return U||rw&&rw.binding&&rw.binding("util")}catch{}}(),HE=zi&&zi.isArrayBuffer,GE=zi&&zi.isDate,YE=zi&&zi.isMap,JE=zi&&zi.isRegExp,XE=zi&&zi.isSet,QE=zi&&zi.isTypedArray;function ai(U,ee,V){switch(V.length){case 0:return U.call(ee);case 1:return U.call(ee,V[0]);case 2:return U.call(ee,V[0],V[1]);case 3:return U.call(ee,V[0],V[1],V[2])}return U.apply(ee,V)}function RB(U,ee,V,Ne){for(var gt=-1,zt=U==null?0:U.length;++gt<zt;){var Hr=U[gt];ee(Ne,Hr,V(Hr),U)}return Ne}function qi(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne&&ee(U[V],V,U)!==!1;);return U}function BB(U,ee){for(var V=U==null?0:U.length;V--&&ee(U[V],V,U)!==!1;);return U}function ZE(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne;)if(!ee(U[V],V,U))return!1;return!0}function Aa(U,ee){for(var V=-1,Ne=U==null?0:U.length,gt=0,zt=[];++V<Ne;){var Hr=U[V];ee(Hr,V,U)&&(zt[gt++]=Hr)}return zt}function $d(U,ee){var V=U==null?0:U.length;return!!V&&yf(U,ee,0)>-1}function nw(U,ee,V){for(var Ne=-1,gt=U==null?0:U.length;++Ne<gt;)if(V(ee,U[Ne]))return!0;return!1}function pr(U,ee){for(var V=-1,Ne=U==null?0:U.length,gt=Array(Ne);++V<Ne;)gt[V]=ee(U[V],V,U);return gt}function Ca(U,ee){for(var V=-1,Ne=ee.length,gt=U.length;++V<Ne;)U[gt+V]=ee[V];return U}function iw(U,ee,V,Ne){var gt=-1,zt=U==null?0:U.length;for(Ne&&zt&&(V=U[++gt]);++gt<zt;)V=ee(V,U[gt],gt,U);return V}function OB(U,ee,V,Ne){var gt=U==null?0:U.length;for(Ne&&gt&&(V=U[--gt]);gt--;)V=ee(V,U[gt],gt,U);return V}function ow(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne;)if(ee(U[V],V,U))return!0;return!1}var LB=sw("length");function NB(U){return U.split("")}function UB(U){return U.match(I)||[]}function eP(U,ee,V){var Ne;return V(U,function(gt,zt,Hr){if(ee(gt,zt,Hr))return Ne=zt,!1}),Ne}function zd(U,ee,V,Ne){for(var gt=U.length,zt=V+(Ne?1:-1);Ne?zt--:++zt<gt;)if(ee(U[zt],zt,U))return zt;return-1}function yf(U,ee,V){return ee===ee?JB(U,ee,V):zd(U,tP,V)}function MB(U,ee,V,Ne){for(var gt=V-1,zt=U.length;++gt<zt;)if(Ne(U[gt],ee))return gt;return-1}function tP(U){return U!==U}function rP(U,ee){var V=U==null?0:U.length;return V?uw(U,ee)/V:Rr}function sw(U){return function(ee){return ee==null?r:ee[U]}}function aw(U){return function(ee){return U==null?r:U[ee]}}function nP(U,ee,V,Ne,gt){return gt(U,function(zt,Hr,ir){V=Ne?(Ne=!1,zt):ee(V,zt,Hr,ir)}),V}function KB(U,ee){var V=U.length;for(U.sort(ee);V--;)U[V]=U[V].value;return U}function uw(U,ee){for(var V,Ne=-1,gt=U.length;++Ne<gt;){var zt=ee(U[Ne]);zt!==r&&(V=V===r?zt:V+zt)}return V}function cw(U,ee){for(var V=-1,Ne=Array(U);++V<U;)Ne[V]=ee(V);return Ne}function jB(U,ee){return pr(ee,function(V){return[V,U[V]]})}function iP(U){return U&&U.slice(0,uP(U)+1).replace(Da,"")}function ui(U){return function(ee){return U(ee)}}function fw(U,ee){return pr(ee,function(V){return U[V]})}function wh(U,ee){return U.has(ee)}function oP(U,ee){for(var V=-1,Ne=U.length;++V<Ne&&yf(ee,U[V],0)>-1;);return V}function sP(U,ee){for(var V=U.length;V--&&yf(ee,U[V],0)>-1;);return V}function $B(U,ee){for(var V=U.length,Ne=0;V--;)U[V]===ee&&++Ne;return Ne}var zB=aw(DB),qB=aw(AB);function WB(U){return"\\"+IB[U]}function VB(U,ee){return U==null?r:U[ee]}function gf(U){return xB.test(U)}function HB(U){return EB.test(U)}function GB(U){for(var ee,V=[];!(ee=U.next()).done;)V.push(ee.value);return V}function lw(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne,gt){V[++ee]=[gt,Ne]}),V}function aP(U,ee){return function(V){return U(ee(V))}}function Ia(U,ee){for(var V=-1,Ne=U.length,gt=0,zt=[];++V<Ne;){var Hr=U[V];(Hr===ee||Hr===f)&&(U[V]=f,zt[gt++]=V)}return zt}function qd(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne){V[++ee]=Ne}),V}function YB(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne){V[++ee]=[Ne,Ne]}),V}function JB(U,ee,V){for(var Ne=V-1,gt=U.length;++Ne<gt;)if(U[Ne]===ee)return Ne;return-1}function XB(U,ee,V){for(var Ne=V+1;Ne--;)if(U[Ne]===ee)return Ne;return Ne}function wf(U){return gf(U)?ZB(U):LB(U)}function xo(U){return gf(U)?eO(U):NB(U)}function uP(U){for(var ee=U.length;ee--&&b.test(U.charAt(ee)););return ee}var QB=aw(CB);function ZB(U){for(var ee=ew.lastIndex=0;ew.test(U);)++ee;return ee}function eO(U){return U.match(ew)||[]}function tO(U){return U.match(_B)||[]}var rO=function U(ee){ee=ee==null?Zr:Ta.defaults(Zr.Object(),ee,Ta.pick(Zr,PB));var V=ee.Array,Ne=ee.Date,gt=ee.Error,zt=ee.Function,Hr=ee.Math,ir=ee.Object,hw=ee.RegExp,nO=ee.String,Wi=ee.TypeError,Wd=V.prototype,iO=zt.prototype,bf=ir.prototype,Vd=ee["__core-js_shared__"],Hd=iO.toString,Jt=bf.hasOwnProperty,oO=0,cP=function(){var s=/[^.]+$/.exec(Vd&&Vd.keys&&Vd.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Gd=bf.toString,sO=Hd.call(ir),aO=Zr._,uO=hw("^"+Hd.call(Jt).replace(Lu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yd=VE?ee.Buffer:r,ka=ee.Symbol,Jd=ee.Uint8Array,fP=Yd?Yd.allocUnsafe:r,Xd=aP(ir.getPrototypeOf,ir),lP=ir.create,hP=bf.propertyIsEnumerable,Qd=Wd.splice,pP=ka?ka.isConcatSpreadable:r,bh=ka?ka.iterator:r,Uu=ka?ka.toStringTag:r,Zd=function(){try{var s=zu(ir,"defineProperty");return s({},"",{}),s}catch{}}(),cO=ee.clearTimeout!==Zr.clearTimeout&&ee.clearTimeout,fO=Ne&&Ne.now!==Zr.Date.now&&Ne.now,lO=ee.setTimeout!==Zr.setTimeout&&ee.setTimeout,em=Hr.ceil,tm=Hr.floor,pw=ir.getOwnPropertySymbols,hO=Yd?Yd.isBuffer:r,dP=ee.isFinite,pO=Wd.join,dO=aP(ir.keys,ir),Gr=Hr.max,_n=Hr.min,mO=Ne.now,yO=ee.parseInt,mP=Hr.random,gO=Wd.reverse,dw=zu(ee,"DataView"),vh=zu(ee,"Map"),mw=zu(ee,"Promise"),vf=zu(ee,"Set"),_h=zu(ee,"WeakMap"),xh=zu(ir,"create"),rm=_h&&new _h,_f={},wO=qu(dw),bO=qu(vh),vO=qu(mw),_O=qu(vf),xO=qu(_h),nm=ka?ka.prototype:r,Eh=nm?nm.valueOf:r,yP=nm?nm.toString:r;function D(s){if(Sr(s)&&!bt(s)&&!(s instanceof Rt)){if(s instanceof Vi)return s;if(Jt.call(s,"__wrapped__"))return gS(s)}return new Vi(s)}var xf=function(){function s(){}return function(u){if(!vr(u))return{};if(lP)return lP(u);s.prototype=u;var l=new s;return s.prototype=r,l}}();function im(){}function Vi(s,u){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=r}D.templateSettings={escape:si,evaluate:$i,interpolate:_o,variable:"",imports:{_:D}},D.prototype=im.prototype,D.prototype.constructor=D,Vi.prototype=xf(im.prototype),Vi.prototype.constructor=Vi;function Rt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wr,this.__views__=[]}function EO(){var s=new Rt(this.__wrapped__);return s.__actions__=Wn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Wn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Wn(this.__views__),s}function PO(){if(this.__filtered__){var s=new Rt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function SO(){var s=this.__wrapped__.value(),u=this.__dir__,l=bt(s),g=u<0,E=l?s.length:0,C=N4(0,E,this.__views__),R=C.start,L=C.end,K=L-R,se=g?L:R-1,ae=this.__iteratees__,de=ae.length,Ce=0,He=_n(K,this.__takeCount__);if(!l||!g&&E==K&&He==K)return KP(s,this.__actions__);var st=[];e:for(;K--&&Ce<He;){se+=u;for(var xt=-1,at=s[se];++xt<de;){var It=ae[xt],Lt=It.iteratee,li=It.type,Fn=Lt(at);if(li==qt)at=Fn;else if(!Fn){if(li==Bt)continue e;break e}}st[Ce++]=at}return st}Rt.prototype=xf(im.prototype),Rt.prototype.constructor=Rt;function Mu(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function DO(){this.__data__=xh?xh(null):{},this.size=0}function AO(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function CO(s){var u=this.__data__;if(xh){var l=u[s];return l===a?r:l}return Jt.call(u,s)?u[s]:r}function IO(s){var u=this.__data__;return xh?u[s]!==r:Jt.call(u,s)}function TO(s,u){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=xh&&u===r?a:u,this}Mu.prototype.clear=DO,Mu.prototype.delete=AO,Mu.prototype.get=CO,Mu.prototype.has=IO,Mu.prototype.set=TO;function Bs(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function kO(){this.__data__=[],this.size=0}function FO(s){var u=this.__data__,l=om(u,s);if(l<0)return!1;var g=u.length-1;return l==g?u.pop():Qd.call(u,l,1),--this.size,!0}function RO(s){var u=this.__data__,l=om(u,s);return l<0?r:u[l][1]}function BO(s){return om(this.__data__,s)>-1}function OO(s,u){var l=this.__data__,g=om(l,s);return g<0?(++this.size,l.push([s,u])):l[g][1]=u,this}Bs.prototype.clear=kO,Bs.prototype.delete=FO,Bs.prototype.get=RO,Bs.prototype.has=BO,Bs.prototype.set=OO;function Os(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function LO(){this.size=0,this.__data__={hash:new Mu,map:new(vh||Bs),string:new Mu}}function NO(s){var u=gm(this,s).delete(s);return this.size-=u?1:0,u}function UO(s){return gm(this,s).get(s)}function MO(s){return gm(this,s).has(s)}function KO(s,u){var l=gm(this,s),g=l.size;return l.set(s,u),this.size+=l.size==g?0:1,this}Os.prototype.clear=LO,Os.prototype.delete=NO,Os.prototype.get=UO,Os.prototype.has=MO,Os.prototype.set=KO;function Ku(s){var u=-1,l=s==null?0:s.length;for(this.__data__=new Os;++u<l;)this.add(s[u])}function jO(s){return this.__data__.set(s,a),this}function $O(s){return this.__data__.has(s)}Ku.prototype.add=Ku.prototype.push=jO,Ku.prototype.has=$O;function Eo(s){var u=this.__data__=new Bs(s);this.size=u.size}function zO(){this.__data__=new Bs,this.size=0}function qO(s){var u=this.__data__,l=u.delete(s);return this.size=u.size,l}function WO(s){return this.__data__.get(s)}function VO(s){return this.__data__.has(s)}function HO(s,u){var l=this.__data__;if(l instanceof Bs){var g=l.__data__;if(!vh||g.length<t-1)return g.push([s,u]),this.size=++l.size,this;l=this.__data__=new Os(g)}return l.set(s,u),this.size=l.size,this}Eo.prototype.clear=zO,Eo.prototype.delete=qO,Eo.prototype.get=WO,Eo.prototype.has=VO,Eo.prototype.set=HO;function gP(s,u){var l=bt(s),g=!l&&Wu(s),E=!l&&!g&&La(s),C=!l&&!g&&!E&&Df(s),R=l||g||E||C,L=R?cw(s.length,nO):[],K=L.length;for(var se in s)(u||Jt.call(s,se))&&!(R&&(se=="length"||E&&(se=="offset"||se=="parent")||C&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Ms(se,K)))&&L.push(se);return L}function wP(s){var u=s.length;return u?s[Dw(0,u-1)]:r}function GO(s,u){return wm(Wn(s),ju(u,0,s.length))}function YO(s){return wm(Wn(s))}function yw(s,u,l){(l!==r&&!Po(s[u],l)||l===r&&!(u in s))&&Ls(s,u,l)}function Ph(s,u,l){var g=s[u];(!(Jt.call(s,u)&&Po(g,l))||l===r&&!(u in s))&&Ls(s,u,l)}function om(s,u){for(var l=s.length;l--;)if(Po(s[l][0],u))return l;return-1}function JO(s,u,l,g){return Fa(s,function(E,C,R){u(g,E,l(E),R)}),g}function bP(s,u){return s&&is(u,en(u),s)}function XO(s,u){return s&&is(u,Hn(u),s)}function Ls(s,u,l){u=="__proto__"&&Zd?Zd(s,u,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[u]=l}function gw(s,u){for(var l=-1,g=u.length,E=V(g),C=s==null;++l<g;)E[l]=C?r:Xw(s,u[l]);return E}function ju(s,u,l){return s===s&&(l!==r&&(s=s<=l?s:l),u!==r&&(s=s>=u?s:u)),s}function Hi(s,u,l,g,E,C){var R,L=u&d,K=u&m,se=u&w;if(l&&(R=E?l(s,g,E,C):l(s)),R!==r)return R;if(!vr(s))return s;var ae=bt(s);if(ae){if(R=M4(s),!L)return Wn(s,R)}else{var de=xn(s),Ce=de==Ki||de==bn;if(La(s))return zP(s,L);if(de==In||de==wr||Ce&&!E){if(R=K||Ce?{}:uS(s),!L)return K?C4(s,XO(R,s)):A4(s,bP(R,s))}else{if(!sr[de])return E?s:{};R=K4(s,de,L)}}C||(C=new Eo);var He=C.get(s);if(He)return He;C.set(s,R),NS(s)?s.forEach(function(at){R.add(Hi(at,u,l,at,s,C))}):OS(s)&&s.forEach(function(at,It){R.set(It,Hi(at,u,l,It,s,C))});var st=se?K?Nw:Lw:K?Hn:en,xt=ae?r:st(s);return qi(xt||s,function(at,It){xt&&(It=at,at=s[It]),Ph(R,It,Hi(at,u,l,It,s,C))}),R}function QO(s){var u=en(s);return function(l){return vP(l,s,u)}}function vP(s,u,l){var g=l.length;if(s==null)return!g;for(s=ir(s);g--;){var E=l[g],C=u[E],R=s[E];if(R===r&&!(E in s)||!C(R))return!1}return!0}function _P(s,u,l){if(typeof s!="function")throw new Wi(i);return kh(function(){s.apply(r,l)},u)}function Sh(s,u,l,g){var E=-1,C=$d,R=!0,L=s.length,K=[],se=u.length;if(!L)return K;l&&(u=pr(u,ui(l))),g?(C=nw,R=!1):u.length>=t&&(C=wh,R=!1,u=new Ku(u));e:for(;++E<L;){var ae=s[E],de=l==null?ae:l(ae);if(ae=g||ae!==0?ae:0,R&&de===de){for(var Ce=se;Ce--;)if(u[Ce]===de)continue e;K.push(ae)}else C(u,de,g)||K.push(ae)}return K}var Fa=GP(ns),xP=GP(bw,!0);function ZO(s,u){var l=!0;return Fa(s,function(g,E,C){return l=!!u(g,E,C),l}),l}function sm(s,u,l){for(var g=-1,E=s.length;++g<E;){var C=s[g],R=u(C);if(R!=null&&(L===r?R===R&&!fi(R):l(R,L)))var L=R,K=C}return K}function e4(s,u,l,g){var E=s.length;for(l=_t(l),l<0&&(l=-l>E?0:E+l),g=g===r||g>E?E:_t(g),g<0&&(g+=E),g=l>g?0:MS(g);l<g;)s[l++]=u;return s}function EP(s,u){var l=[];return Fa(s,function(g,E,C){u(g,E,C)&&l.push(g)}),l}function ln(s,u,l,g,E){var C=-1,R=s.length;for(l||(l=$4),E||(E=[]);++C<R;){var L=s[C];u>0&&l(L)?u>1?ln(L,u-1,l,g,E):Ca(E,L):g||(E[E.length]=L)}return E}var ww=YP(),PP=YP(!0);function ns(s,u){return s&&ww(s,u,en)}function bw(s,u){return s&&PP(s,u,en)}function am(s,u){return Aa(u,function(l){return Ks(s[l])})}function $u(s,u){u=Ba(u,s);for(var l=0,g=u.length;s!=null&&l<g;)s=s[os(u[l++])];return l&&l==g?s:r}function SP(s,u,l){var g=u(s);return bt(s)?g:Ca(g,l(s))}function Tn(s){return s==null?s===r?wo:Pa:Uu&&Uu in ir(s)?L4(s):Y4(s)}function vw(s,u){return s>u}function t4(s,u){return s!=null&&Jt.call(s,u)}function r4(s,u){return s!=null&&u in ir(s)}function n4(s,u,l){return s>=_n(u,l)&&s<Gr(u,l)}function _w(s,u,l){for(var g=l?nw:$d,E=s[0].length,C=s.length,R=C,L=V(C),K=1/0,se=[];R--;){var ae=s[R];R&&u&&(ae=pr(ae,ui(u))),K=_n(ae.length,K),L[R]=!l&&(u||E>=120&&ae.length>=120)?new Ku(R&&ae):r}ae=s[0];var de=-1,Ce=L[0];e:for(;++de<E&&se.length<K;){var He=ae[de],st=u?u(He):He;if(He=l||He!==0?He:0,!(Ce?wh(Ce,st):g(se,st,l))){for(R=C;--R;){var xt=L[R];if(!(xt?wh(xt,st):g(s[R],st,l)))continue e}Ce&&Ce.push(st),se.push(He)}}return se}function i4(s,u,l,g){return ns(s,function(E,C,R){u(g,l(E),C,R)}),g}function Dh(s,u,l){u=Ba(u,s),s=hS(s,u);var g=s==null?s:s[os(Yi(u))];return g==null?r:ai(g,s,l)}function DP(s){return Sr(s)&&Tn(s)==wr}function o4(s){return Sr(s)&&Tn(s)==J}function s4(s){return Sr(s)&&Tn(s)==Mi}function Ah(s,u,l,g,E){return s===u?!0:s==null||u==null||!Sr(s)&&!Sr(u)?s!==s&&u!==u:a4(s,u,l,g,Ah,E)}function a4(s,u,l,g,E,C){var R=bt(s),L=bt(u),K=R?Ve:xn(s),se=L?Ve:xn(u);K=K==wr?In:K,se=se==wr?In:se;var ae=K==In,de=se==In,Ce=K==se;if(Ce&&La(s)){if(!La(u))return!1;R=!0,ae=!1}if(Ce&&!ae)return C||(C=new Eo),R||Df(s)?oS(s,u,l,g,E,C):B4(s,u,K,l,g,E,C);if(!(l&x)){var He=ae&&Jt.call(s,"__wrapped__"),st=de&&Jt.call(u,"__wrapped__");if(He||st){var xt=He?s.value():s,at=st?u.value():u;return C||(C=new Eo),E(xt,at,l,g,C)}}return Ce?(C||(C=new Eo),O4(s,u,l,g,E,C)):!1}function u4(s){return Sr(s)&&xn(s)==Vr}function xw(s,u,l,g){var E=l.length,C=E,R=!g;if(s==null)return!C;for(s=ir(s);E--;){var L=l[E];if(R&&L[2]?L[1]!==s[L[0]]:!(L[0]in s))return!1}for(;++E<C;){L=l[E];var K=L[0],se=s[K],ae=L[1];if(R&&L[2]){if(se===r&&!(K in s))return!1}else{var de=new Eo;if(g)var Ce=g(se,ae,K,s,u,de);if(!(Ce===r?Ah(ae,se,x|T,g,de):Ce))return!1}}return!0}function AP(s){if(!vr(s)||q4(s))return!1;var u=Ks(s)?uO:Ct;return u.test(qu(s))}function c4(s){return Sr(s)&&Tn(s)==Qr}function f4(s){return Sr(s)&&xn(s)==ur}function l4(s){return Sr(s)&&Pm(s.length)&&!!fr[Tn(s)]}function CP(s){return typeof s=="function"?s:s==null?Gn:typeof s=="object"?bt(s)?kP(s[0],s[1]):TP(s):JS(s)}function Ew(s){if(!Th(s))return dO(s);var u=[];for(var l in ir(s))Jt.call(s,l)&&l!="constructor"&&u.push(l);return u}function h4(s){if(!vr(s))return G4(s);var u=Th(s),l=[];for(var g in s)g=="constructor"&&(u||!Jt.call(s,g))||l.push(g);return l}function Pw(s,u){return s<u}function IP(s,u){var l=-1,g=Vn(s)?V(s.length):[];return Fa(s,function(E,C,R){g[++l]=u(E,C,R)}),g}function TP(s){var u=Mw(s);return u.length==1&&u[0][2]?fS(u[0][0],u[0][1]):function(l){return l===s||xw(l,s,u)}}function kP(s,u){return jw(s)&&cS(u)?fS(os(s),u):function(l){var g=Xw(l,s);return g===r&&g===u?Qw(l,s):Ah(u,g,x|T)}}function um(s,u,l,g,E){s!==u&&ww(u,function(C,R){if(E||(E=new Eo),vr(C))p4(s,u,R,l,um,g,E);else{var L=g?g(zw(s,R),C,R+"",s,u,E):r;L===r&&(L=C),yw(s,R,L)}},Hn)}function p4(s,u,l,g,E,C,R){var L=zw(s,l),K=zw(u,l),se=R.get(K);if(se){yw(s,l,se);return}var ae=C?C(L,K,l+"",s,u,R):r,de=ae===r;if(de){var Ce=bt(K),He=!Ce&&La(K),st=!Ce&&!He&&Df(K);ae=K,Ce||He||st?bt(L)?ae=L:Lr(L)?ae=Wn(L):He?(de=!1,ae=zP(K,!0)):st?(de=!1,ae=qP(K,!0)):ae=[]:Fh(K)||Wu(K)?(ae=L,Wu(L)?ae=KS(L):(!vr(L)||Ks(L))&&(ae=uS(K))):de=!1}de&&(R.set(K,ae),E(ae,K,g,C,R),R.delete(K)),yw(s,l,ae)}function FP(s,u){var l=s.length;if(!!l)return u+=u<0?l:0,Ms(u,l)?s[u]:r}function RP(s,u,l){u.length?u=pr(u,function(C){return bt(C)?function(R){return $u(R,C.length===1?C[0]:C)}:C}):u=[Gn];var g=-1;u=pr(u,ui(it()));var E=IP(s,function(C,R,L){var K=pr(u,function(se){return se(C)});return{criteria:K,index:++g,value:C}});return KB(E,function(C,R){return D4(C,R,l)})}function d4(s,u){return BP(s,u,function(l,g){return Qw(s,g)})}function BP(s,u,l){for(var g=-1,E=u.length,C={};++g<E;){var R=u[g],L=$u(s,R);l(L,R)&&Ch(C,Ba(R,s),L)}return C}function m4(s){return function(u){return $u(u,s)}}function Sw(s,u,l,g){var E=g?MB:yf,C=-1,R=u.length,L=s;for(s===u&&(u=Wn(u)),l&&(L=pr(s,ui(l)));++C<R;)for(var K=0,se=u[C],ae=l?l(se):se;(K=E(L,ae,K,g))>-1;)L!==s&&Qd.call(L,K,1),Qd.call(s,K,1);return s}function OP(s,u){for(var l=s?u.length:0,g=l-1;l--;){var E=u[l];if(l==g||E!==C){var C=E;Ms(E)?Qd.call(s,E,1):Iw(s,E)}}return s}function Dw(s,u){return s+tm(mP()*(u-s+1))}function y4(s,u,l,g){for(var E=-1,C=Gr(em((u-s)/(l||1)),0),R=V(C);C--;)R[g?C:++E]=s,s+=l;return R}function Aw(s,u){var l="";if(!s||u<1||u>jr)return l;do u%2&&(l+=s),u=tm(u/2),u&&(s+=s);while(u);return l}function Dt(s,u){return qw(lS(s,u,Gn),s+"")}function g4(s){return wP(Af(s))}function w4(s,u){var l=Af(s);return wm(l,ju(u,0,l.length))}function Ch(s,u,l,g){if(!vr(s))return s;u=Ba(u,s);for(var E=-1,C=u.length,R=C-1,L=s;L!=null&&++E<C;){var K=os(u[E]),se=l;if(K==="__proto__"||K==="constructor"||K==="prototype")return s;if(E!=R){var ae=L[K];se=g?g(ae,K,L):r,se===r&&(se=vr(ae)?ae:Ms(u[E+1])?[]:{})}Ph(L,K,se),L=L[K]}return s}var LP=rm?function(s,u){return rm.set(s,u),s}:Gn,b4=Zd?function(s,u){return Zd(s,"toString",{configurable:!0,enumerable:!1,value:eb(u),writable:!0})}:Gn;function v4(s){return wm(Af(s))}function Gi(s,u,l){var g=-1,E=s.length;u<0&&(u=-u>E?0:E+u),l=l>E?E:l,l<0&&(l+=E),E=u>l?0:l-u>>>0,u>>>=0;for(var C=V(E);++g<E;)C[g]=s[g+u];return C}function _4(s,u){var l;return Fa(s,function(g,E,C){return l=u(g,E,C),!l}),!!l}function cm(s,u,l){var g=0,E=s==null?g:s.length;if(typeof u=="number"&&u===u&&E<=nr){for(;g<E;){var C=g+E>>>1,R=s[C];R!==null&&!fi(R)&&(l?R<=u:R<u)?g=C+1:E=C}return E}return Cw(s,u,Gn,l)}function Cw(s,u,l,g){var E=0,C=s==null?0:s.length;if(C===0)return 0;u=l(u);for(var R=u!==u,L=u===null,K=fi(u),se=u===r;E<C;){var ae=tm((E+C)/2),de=l(s[ae]),Ce=de!==r,He=de===null,st=de===de,xt=fi(de);if(R)var at=g||st;else se?at=st&&(g||Ce):L?at=st&&Ce&&(g||!He):K?at=st&&Ce&&!He&&(g||!xt):He||xt?at=!1:at=g?de<=u:de<u;at?E=ae+1:C=ae}return _n(C,ks)}function NP(s,u){for(var l=-1,g=s.length,E=0,C=[];++l<g;){var R=s[l],L=u?u(R):R;if(!l||!Po(L,K)){var K=L;C[E++]=R===0?0:R}}return C}function UP(s){return typeof s=="number"?s:fi(s)?Rr:+s}function ci(s){if(typeof s=="string")return s;if(bt(s))return pr(s,ci)+"";if(fi(s))return yP?yP.call(s):"";var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function Ra(s,u,l){var g=-1,E=$d,C=s.length,R=!0,L=[],K=L;if(l)R=!1,E=nw;else if(C>=t){var se=u?null:F4(s);if(se)return qd(se);R=!1,E=wh,K=new Ku}else K=u?[]:L;e:for(;++g<C;){var ae=s[g],de=u?u(ae):ae;if(ae=l||ae!==0?ae:0,R&&de===de){for(var Ce=K.length;Ce--;)if(K[Ce]===de)continue e;u&&K.push(de),L.push(ae)}else E(K,de,l)||(K!==L&&K.push(de),L.push(ae))}return L}function Iw(s,u){return u=Ba(u,s),s=hS(s,u),s==null||delete s[os(Yi(u))]}function MP(s,u,l,g){return Ch(s,u,l($u(s,u)),g)}function fm(s,u,l,g){for(var E=s.length,C=g?E:-1;(g?C--:++C<E)&&u(s[C],C,s););return l?Gi(s,g?0:C,g?C+1:E):Gi(s,g?C+1:0,g?E:C)}function KP(s,u){var l=s;return l instanceof Rt&&(l=l.value()),iw(u,function(g,E){return E.func.apply(E.thisArg,Ca([g],E.args))},l)}function Tw(s,u,l){var g=s.length;if(g<2)return g?Ra(s[0]):[];for(var E=-1,C=V(g);++E<g;)for(var R=s[E],L=-1;++L<g;)L!=E&&(C[E]=Sh(C[E]||R,s[L],u,l));return Ra(ln(C,1),u,l)}function jP(s,u,l){for(var g=-1,E=s.length,C=u.length,R={};++g<E;){var L=g<C?u[g]:r;l(R,s[g],L)}return R}function kw(s){return Lr(s)?s:[]}function Fw(s){return typeof s=="function"?s:Gn}function Ba(s,u){return bt(s)?s:jw(s,u)?[s]:yS(Vt(s))}var x4=Dt;function Oa(s,u,l){var g=s.length;return l=l===r?g:l,!u&&l>=g?s:Gi(s,u,l)}var $P=cO||function(s){return Zr.clearTimeout(s)};function zP(s,u){if(u)return s.slice();var l=s.length,g=fP?fP(l):new s.constructor(l);return s.copy(g),g}function Rw(s){var u=new s.constructor(s.byteLength);return new Jd(u).set(new Jd(s)),u}function E4(s,u){var l=u?Rw(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}function P4(s){var u=new s.constructor(s.source,ye.exec(s));return u.lastIndex=s.lastIndex,u}function S4(s){return Eh?ir(Eh.call(s)):{}}function qP(s,u){var l=u?Rw(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}function WP(s,u){if(s!==u){var l=s!==r,g=s===null,E=s===s,C=fi(s),R=u!==r,L=u===null,K=u===u,se=fi(u);if(!L&&!se&&!C&&s>u||C&&R&&K&&!L&&!se||g&&R&&K||!l&&K||!E)return 1;if(!g&&!C&&!se&&s<u||se&&l&&E&&!g&&!C||L&&l&&E||!R&&E||!K)return-1}return 0}function D4(s,u,l){for(var g=-1,E=s.criteria,C=u.criteria,R=E.length,L=l.length;++g<R;){var K=WP(E[g],C[g]);if(K){if(g>=L)return K;var se=l[g];return K*(se=="desc"?-1:1)}}return s.index-u.index}function VP(s,u,l,g){for(var E=-1,C=s.length,R=l.length,L=-1,K=u.length,se=Gr(C-R,0),ae=V(K+se),de=!g;++L<K;)ae[L]=u[L];for(;++E<R;)(de||E<C)&&(ae[l[E]]=s[E]);for(;se--;)ae[L++]=s[E++];return ae}function HP(s,u,l,g){for(var E=-1,C=s.length,R=-1,L=l.length,K=-1,se=u.length,ae=Gr(C-L,0),de=V(ae+se),Ce=!g;++E<ae;)de[E]=s[E];for(var He=E;++K<se;)de[He+K]=u[K];for(;++R<L;)(Ce||E<C)&&(de[He+l[R]]=s[E++]);return de}function Wn(s,u){var l=-1,g=s.length;for(u||(u=V(g));++l<g;)u[l]=s[l];return u}function is(s,u,l,g){var E=!l;l||(l={});for(var C=-1,R=u.length;++C<R;){var L=u[C],K=g?g(l[L],s[L],L,l,s):r;K===r&&(K=s[L]),E?Ls(l,L,K):Ph(l,L,K)}return l}function A4(s,u){return is(s,Kw(s),u)}function C4(s,u){return is(s,sS(s),u)}function lm(s,u){return function(l,g){var E=bt(l)?RB:JO,C=u?u():{};return E(l,s,it(g,2),C)}}function Ef(s){return Dt(function(u,l){var g=-1,E=l.length,C=E>1?l[E-1]:r,R=E>2?l[2]:r;for(C=s.length>3&&typeof C=="function"?(E--,C):r,R&&kn(l[0],l[1],R)&&(C=E<3?r:C,E=1),u=ir(u);++g<E;){var L=l[g];L&&s(u,L,g,C)}return u})}function GP(s,u){return function(l,g){if(l==null)return l;if(!Vn(l))return s(l,g);for(var E=l.length,C=u?E:-1,R=ir(l);(u?C--:++C<E)&&g(R[C],C,R)!==!1;);return l}}function YP(s){return function(u,l,g){for(var E=-1,C=ir(u),R=g(u),L=R.length;L--;){var K=R[s?L:++E];if(l(C[K],K,C)===!1)break}return u}}function I4(s,u,l){var g=u&F,E=Ih(s);function C(){var R=this&&this!==Zr&&this instanceof C?E:s;return R.apply(g?l:this,arguments)}return C}function JP(s){return function(u){u=Vt(u);var l=gf(u)?xo(u):r,g=l?l[0]:u.charAt(0),E=l?Oa(l,1).join(""):u.slice(1);return g[s]()+E}}function Pf(s){return function(u){return iw(GS(HS(u).replace(bB,"")),s,"")}}function Ih(s){return function(){var u=arguments;switch(u.length){case 0:return new s;case 1:return new s(u[0]);case 2:return new s(u[0],u[1]);case 3:return new s(u[0],u[1],u[2]);case 4:return new s(u[0],u[1],u[2],u[3]);case 5:return new s(u[0],u[1],u[2],u[3],u[4]);case 6:return new s(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new s(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var l=xf(s.prototype),g=s.apply(l,u);return vr(g)?g:l}}function T4(s,u,l){var g=Ih(s);function E(){for(var C=arguments.length,R=V(C),L=C,K=Sf(E);L--;)R[L]=arguments[L];var se=C<3&&R[0]!==K&&R[C-1]!==K?[]:Ia(R,K);if(C-=se.length,C<l)return tS(s,u,hm,E.placeholder,r,R,se,r,r,l-C);var ae=this&&this!==Zr&&this instanceof E?g:s;return ai(ae,this,R)}return E}function XP(s){return function(u,l,g){var E=ir(u);if(!Vn(u)){var C=it(l,3);u=en(u),l=function(L){return C(E[L],L,E)}}var R=s(u,l,g);return R>-1?E[C?u[R]:R]:r}}function QP(s){return Us(function(u){var l=u.length,g=l,E=Vi.prototype.thru;for(s&&u.reverse();g--;){var C=u[g];if(typeof C!="function")throw new Wi(i);if(E&&!R&&ym(C)=="wrapper")var R=new Vi([],!0)}for(g=R?g:l;++g<l;){C=u[g];var L=ym(C),K=L=="wrapper"?Uw(C):r;K&&$w(K[0])&&K[1]==(Pe|pe|re|Y)&&!K[4].length&&K[9]==1?R=R[ym(K[0])].apply(R,K[3]):R=C.length==1&&$w(C)?R[L]():R.thru(C)}return function(){var se=arguments,ae=se[0];if(R&&se.length==1&&bt(ae))return R.plant(ae).value();for(var de=0,Ce=l?u[de].apply(this,se):ae;++de<l;)Ce=u[de].call(this,Ce);return Ce}})}function hm(s,u,l,g,E,C,R,L,K,se){var ae=u&Pe,de=u&F,Ce=u&N,He=u&(pe|De),st=u&ge,xt=Ce?r:Ih(s);function at(){for(var It=arguments.length,Lt=V(It),li=It;li--;)Lt[li]=arguments[li];if(He)var Fn=Sf(at),hi=$B(Lt,Fn);if(g&&(Lt=VP(Lt,g,E,He)),C&&(Lt=HP(Lt,C,R,He)),It-=hi,He&&It<se){var Nr=Ia(Lt,Fn);return tS(s,u,hm,at.placeholder,l,Lt,Nr,L,K,se-It)}var So=de?l:this,$s=Ce?So[s]:s;return It=Lt.length,L?Lt=J4(Lt,L):st&&It>1&&Lt.reverse(),ae&&K<It&&(Lt.length=K),this&&this!==Zr&&this instanceof at&&($s=xt||Ih($s)),$s.apply(So,Lt)}return at}function ZP(s,u){return function(l,g){return i4(l,s,u(g),{})}}function pm(s,u){return function(l,g){var E;if(l===r&&g===r)return u;if(l!==r&&(E=l),g!==r){if(E===r)return g;typeof l=="string"||typeof g=="string"?(l=ci(l),g=ci(g)):(l=UP(l),g=UP(g)),E=s(l,g)}return E}}function Bw(s){return Us(function(u){return u=pr(u,ui(it())),Dt(function(l){var g=this;return s(u,function(E){return ai(E,g,l)})})})}function dm(s,u){u=u===r?" ":ci(u);var l=u.length;if(l<2)return l?Aw(u,s):u;var g=Aw(u,em(s/wf(u)));return gf(u)?Oa(xo(g),0,s).join(""):g.slice(0,s)}function k4(s,u,l,g){var E=u&F,C=Ih(s);function R(){for(var L=-1,K=arguments.length,se=-1,ae=g.length,de=V(ae+K),Ce=this&&this!==Zr&&this instanceof R?C:s;++se<ae;)de[se]=g[se];for(;K--;)de[se++]=arguments[++L];return ai(Ce,E?l:this,de)}return R}function eS(s){return function(u,l,g){return g&&typeof g!="number"&&kn(u,l,g)&&(l=g=r),u=js(u),l===r?(l=u,u=0):l=js(l),g=g===r?u<l?1:-1:js(g),y4(u,l,g,s)}}function mm(s){return function(u,l){return typeof u=="string"&&typeof l=="string"||(u=Ji(u),l=Ji(l)),s(u,l)}}function tS(s,u,l,g,E,C,R,L,K,se){var ae=u&pe,de=ae?R:r,Ce=ae?r:R,He=ae?C:r,st=ae?r:C;u|=ae?re:be,u&=~(ae?be:re),u&ue||(u&=~(F|N));var xt=[s,u,E,He,de,st,Ce,L,K,se],at=l.apply(r,xt);return $w(s)&&pS(at,xt),at.placeholder=g,dS(at,s,u)}function Ow(s){var u=Hr[s];return function(l,g){if(l=Ji(l),g=g==null?0:_n(_t(g),292),g&&dP(l)){var E=(Vt(l)+"e").split("e"),C=u(E[0]+"e"+(+E[1]+g));return E=(Vt(C)+"e").split("e"),+(E[0]+"e"+(+E[1]-g))}return u(l)}}var F4=vf&&1/qd(new vf([,-0]))[1]==Mt?function(s){return new vf(s)}:nb;function rS(s){return function(u){var l=xn(u);return l==Vr?lw(u):l==ur?YB(u):jB(u,s(u))}}function Ns(s,u,l,g,E,C,R,L){var K=u&N;if(!K&&typeof s!="function")throw new Wi(i);var se=g?g.length:0;if(se||(u&=~(re|be),g=E=r),R=R===r?R:Gr(_t(R),0),L=L===r?L:_t(L),se-=E?E.length:0,u&be){var ae=g,de=E;g=E=r}var Ce=K?r:Uw(s),He=[s,u,l,g,E,ae,de,C,R,L];if(Ce&&H4(He,Ce),s=He[0],u=He[1],l=He[2],g=He[3],E=He[4],L=He[9]=He[9]===r?K?0:s.length:Gr(He[9]-se,0),!L&&u&(pe|De)&&(u&=~(pe|De)),!u||u==F)var st=I4(s,u,l);else u==pe||u==De?st=T4(s,u,L):(u==re||u==(F|re))&&!E.length?st=k4(s,u,l,g):st=hm.apply(r,He);var xt=Ce?LP:pS;return dS(xt(st,He),s,u)}function nS(s,u,l,g){return s===r||Po(s,bf[l])&&!Jt.call(g,l)?u:s}function iS(s,u,l,g,E,C){return vr(s)&&vr(u)&&(C.set(u,s),um(s,u,r,iS,C),C.delete(u)),s}function R4(s){return Fh(s)?r:s}function oS(s,u,l,g,E,C){var R=l&x,L=s.length,K=u.length;if(L!=K&&!(R&&K>L))return!1;var se=C.get(s),ae=C.get(u);if(se&&ae)return se==u&&ae==s;var de=-1,Ce=!0,He=l&T?new Ku:r;for(C.set(s,u),C.set(u,s);++de<L;){var st=s[de],xt=u[de];if(g)var at=R?g(xt,st,de,u,s,C):g(st,xt,de,s,u,C);if(at!==r){if(at)continue;Ce=!1;break}if(He){if(!ow(u,function(It,Lt){if(!wh(He,Lt)&&(st===It||E(st,It,l,g,C)))return He.push(Lt)})){Ce=!1;break}}else if(!(st===xt||E(st,xt,l,g,C))){Ce=!1;break}}return C.delete(s),C.delete(u),Ce}function B4(s,u,l,g,E,C,R){switch(l){case he:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case J:return!(s.byteLength!=u.byteLength||!C(new Jd(s),new Jd(u)));case Ui:case Mi:case go:return Po(+s,+u);case Br:return s.name==u.name&&s.message==u.message;case Qr:case zn:return s==u+"";case Vr:var L=lw;case ur:var K=g&x;if(L||(L=qd),s.size!=u.size&&!K)return!1;var se=R.get(s);if(se)return se==u;g|=T,R.set(s,u);var ae=oS(L(s),L(u),g,E,C,R);return R.delete(s),ae;case qn:if(Eh)return Eh.call(s)==Eh.call(u)}return!1}function O4(s,u,l,g,E,C){var R=l&x,L=Lw(s),K=L.length,se=Lw(u),ae=se.length;if(K!=ae&&!R)return!1;for(var de=K;de--;){var Ce=L[de];if(!(R?Ce in u:Jt.call(u,Ce)))return!1}var He=C.get(s),st=C.get(u);if(He&&st)return He==u&&st==s;var xt=!0;C.set(s,u),C.set(u,s);for(var at=R;++de<K;){Ce=L[de];var It=s[Ce],Lt=u[Ce];if(g)var li=R?g(Lt,It,Ce,u,s,C):g(It,Lt,Ce,s,u,C);if(!(li===r?It===Lt||E(It,Lt,l,g,C):li)){xt=!1;break}at||(at=Ce=="constructor")}if(xt&&!at){var Fn=s.constructor,hi=u.constructor;Fn!=hi&&"constructor"in s&&"constructor"in u&&!(typeof Fn=="function"&&Fn instanceof Fn&&typeof hi=="function"&&hi instanceof hi)&&(xt=!1)}return C.delete(s),C.delete(u),xt}function Us(s){return qw(lS(s,r,vS),s+"")}function Lw(s){return SP(s,en,Kw)}function Nw(s){return SP(s,Hn,sS)}var Uw=rm?function(s){return rm.get(s)}:nb;function ym(s){for(var u=s.name+"",l=_f[u],g=Jt.call(_f,u)?l.length:0;g--;){var E=l[g],C=E.func;if(C==null||C==s)return E.name}return u}function Sf(s){var u=Jt.call(D,"placeholder")?D:s;return u.placeholder}function it(){var s=D.iteratee||tb;return s=s===tb?CP:s,arguments.length?s(arguments[0],arguments[1]):s}function gm(s,u){var l=s.__data__;return z4(u)?l[typeof u=="string"?"string":"hash"]:l.map}function Mw(s){for(var u=en(s),l=u.length;l--;){var g=u[l],E=s[g];u[l]=[g,E,cS(E)]}return u}function zu(s,u){var l=VB(s,u);return AP(l)?l:r}function L4(s){var u=Jt.call(s,Uu),l=s[Uu];try{s[Uu]=r;var g=!0}catch{}var E=Gd.call(s);return g&&(u?s[Uu]=l:delete s[Uu]),E}var Kw=pw?function(s){return s==null?[]:(s=ir(s),Aa(pw(s),function(u){return hP.call(s,u)}))}:ib,sS=pw?function(s){for(var u=[];s;)Ca(u,Kw(s)),s=Xd(s);return u}:ib,xn=Tn;(dw&&xn(new dw(new ArrayBuffer(1)))!=he||vh&&xn(new vh)!=Vr||mw&&xn(mw.resolve())!=vn||vf&&xn(new vf)!=ur||_h&&xn(new _h)!=cn)&&(xn=function(s){var u=Tn(s),l=u==In?s.constructor:r,g=l?qu(l):"";if(g)switch(g){case wO:return he;case bO:return Vr;case vO:return vn;case _O:return ur;case xO:return cn}return u});function N4(s,u,l){for(var g=-1,E=l.length;++g<E;){var C=l[g],R=C.size;switch(C.type){case"drop":s+=R;break;case"dropRight":u-=R;break;case"take":u=_n(u,s+R);break;case"takeRight":s=Gr(s,u-R);break}}return{start:s,end:u}}function U4(s){var u=s.match(P);return u?u[1].split(y):[]}function aS(s,u,l){u=Ba(u,s);for(var g=-1,E=u.length,C=!1;++g<E;){var R=os(u[g]);if(!(C=s!=null&&l(s,R)))break;s=s[R]}return C||++g!=E?C:(E=s==null?0:s.length,!!E&&Pm(E)&&Ms(R,E)&&(bt(s)||Wu(s)))}function M4(s){var u=s.length,l=new s.constructor(u);return u&&typeof s[0]=="string"&&Jt.call(s,"index")&&(l.index=s.index,l.input=s.input),l}function uS(s){return typeof s.constructor=="function"&&!Th(s)?xf(Xd(s)):{}}function K4(s,u,l){var g=s.constructor;switch(u){case J:return Rw(s);case Ui:case Mi:return new g(+s);case he:return E4(s,l);case ve:case je:case or:case tt:case ut:case qe:case yt:case pt:case Pr:return qP(s,l);case Vr:return new g;case go:case zn:return new g(s);case Qr:return P4(s);case ur:return new g;case qn:return S4(s)}}function j4(s,u){var l=u.length;if(!l)return s;var g=l-1;return u[g]=(l>1?"& ":"")+u[g],u=u.join(l>2?", ":" "),s.replace(S,`{
/* [wrapped with `+u+`] */
`)}function $4(s){return bt(s)||Wu(s)||!!(pP&&s&&s[pP])}function Ms(s,u){var l=typeof s;return u=u??jr,!!u&&(l=="number"||l!="symbol"&&rt.test(s))&&s>-1&&s%1==0&&s<u}function kn(s,u,l){if(!vr(l))return!1;var g=typeof u;return(g=="number"?Vn(l)&&Ms(u,l.length):g=="string"&&u in l)?Po(l[u],s):!1}function jw(s,u){if(bt(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||fi(s)?!0:Ou.test(s)||!Bu.test(s)||u!=null&&s in ir(u)}function z4(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function $w(s){var u=ym(s),l=D[u];if(typeof l!="function"||!(u in Rt.prototype))return!1;if(s===l)return!0;var g=Uw(l);return!!g&&s===g[0]}function q4(s){return!!cP&&cP in s}var W4=Vd?Ks:ob;function Th(s){var u=s&&s.constructor,l=typeof u=="function"&&u.prototype||bf;return s===l}function cS(s){return s===s&&!vr(s)}function fS(s,u){return function(l){return l==null?!1:l[s]===u&&(u!==r||s in ir(l))}}function V4(s){var u=xm(s,function(g){return l.size===c&&l.clear(),g}),l=u.cache;return u}function H4(s,u){var l=s[1],g=u[1],E=l|g,C=E<(F|N|Pe),R=g==Pe&&l==pe||g==Pe&&l==Y&&s[7].length<=u[8]||g==(Pe|Y)&&u[7].length<=u[8]&&l==pe;if(!(C||R))return s;g&F&&(s[2]=u[2],E|=l&F?0:ue);var L=u[3];if(L){var K=s[3];s[3]=K?VP(K,L,u[4]):L,s[4]=K?Ia(s[3],f):u[4]}return L=u[5],L&&(K=s[5],s[5]=K?HP(K,L,u[6]):L,s[6]=K?Ia(s[5],f):u[6]),L=u[7],L&&(s[7]=L),g&Pe&&(s[8]=s[8]==null?u[8]:_n(s[8],u[8])),s[9]==null&&(s[9]=u[9]),s[0]=u[0],s[1]=E,s}function G4(s){var u=[];if(s!=null)for(var l in ir(s))u.push(l);return u}function Y4(s){return Gd.call(s)}function lS(s,u,l){return u=Gr(u===r?s.length-1:u,0),function(){for(var g=arguments,E=-1,C=Gr(g.length-u,0),R=V(C);++E<C;)R[E]=g[u+E];E=-1;for(var L=V(u+1);++E<u;)L[E]=g[E];return L[u]=l(R),ai(s,this,L)}}function hS(s,u){return u.length<2?s:$u(s,Gi(u,0,-1))}function J4(s,u){for(var l=s.length,g=_n(u.length,l),E=Wn(s);g--;){var C=u[g];s[g]=Ms(C,l)?E[C]:r}return s}function zw(s,u){if(!(u==="constructor"&&typeof s[u]=="function")&&u!="__proto__")return s[u]}var pS=mS(LP),kh=lO||function(s,u){return Zr.setTimeout(s,u)},qw=mS(b4);function dS(s,u,l){var g=u+"";return qw(s,j4(g,X4(U4(g),l)))}function mS(s){var u=0,l=0;return function(){var g=mO(),E=Nt-(g-l);if(l=g,E>0){if(++u>=vt)return arguments[0]}else u=0;return s.apply(r,arguments)}}function wm(s,u){var l=-1,g=s.length,E=g-1;for(u=u===r?g:u;++l<u;){var C=Dw(l,E),R=s[C];s[C]=s[l],s[l]=R}return s.length=u,s}var yS=V4(function(s){var u=[];return s.charCodeAt(0)===46&&u.push(""),s.replace(mf,function(l,g,E,C){u.push(E?C.replace(j,"$1"):g||l)}),u});function os(s){if(typeof s=="string"||fi(s))return s;var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function qu(s){if(s!=null){try{return Hd.call(s)}catch{}try{return s+""}catch{}}return""}function X4(s,u){return qi(Wt,function(l){var g="_."+l[0];u&l[1]&&!$d(s,g)&&s.push(g)}),s.sort()}function gS(s){if(s instanceof Rt)return s.clone();var u=new Vi(s.__wrapped__,s.__chain__);return u.__actions__=Wn(s.__actions__),u.__index__=s.__index__,u.__values__=s.__values__,u}function Q4(s,u,l){(l?kn(s,u,l):u===r)?u=1:u=Gr(_t(u),0);var g=s==null?0:s.length;if(!g||u<1)return[];for(var E=0,C=0,R=V(em(g/u));E<g;)R[C++]=Gi(s,E,E+=u);return R}function Z4(s){for(var u=-1,l=s==null?0:s.length,g=0,E=[];++u<l;){var C=s[u];C&&(E[g++]=C)}return E}function eL(){var s=arguments.length;if(!s)return[];for(var u=V(s-1),l=arguments[0],g=s;g--;)u[g-1]=arguments[g];return Ca(bt(l)?Wn(l):[l],ln(u,1))}var tL=Dt(function(s,u){return Lr(s)?Sh(s,ln(u,1,Lr,!0)):[]}),rL=Dt(function(s,u){var l=Yi(u);return Lr(l)&&(l=r),Lr(s)?Sh(s,ln(u,1,Lr,!0),it(l,2)):[]}),nL=Dt(function(s,u){var l=Yi(u);return Lr(l)&&(l=r),Lr(s)?Sh(s,ln(u,1,Lr,!0),r,l):[]});function iL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),Gi(s,u<0?0:u,g)):[]}function oL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Gi(s,0,u<0?0:u)):[]}function sL(s,u){return s&&s.length?fm(s,it(u,3),!0,!0):[]}function aL(s,u){return s&&s.length?fm(s,it(u,3),!0):[]}function uL(s,u,l,g){var E=s==null?0:s.length;return E?(l&&typeof l!="number"&&kn(s,u,l)&&(l=0,g=E),e4(s,u,l,g)):[]}function wS(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var E=l==null?0:_t(l);return E<0&&(E=Gr(g+E,0)),zd(s,it(u,3),E)}function bS(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var E=g-1;return l!==r&&(E=_t(l),E=l<0?Gr(g+E,0):_n(E,g-1)),zd(s,it(u,3),E,!0)}function vS(s){var u=s==null?0:s.length;return u?ln(s,1):[]}function cL(s){var u=s==null?0:s.length;return u?ln(s,Mt):[]}function fL(s,u){var l=s==null?0:s.length;return l?(u=u===r?1:_t(u),ln(s,u)):[]}function lL(s){for(var u=-1,l=s==null?0:s.length,g={};++u<l;){var E=s[u];g[E[0]]=E[1]}return g}function _S(s){return s&&s.length?s[0]:r}function hL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var E=l==null?0:_t(l);return E<0&&(E=Gr(g+E,0)),yf(s,u,E)}function pL(s){var u=s==null?0:s.length;return u?Gi(s,0,-1):[]}var dL=Dt(function(s){var u=pr(s,kw);return u.length&&u[0]===s[0]?_w(u):[]}),mL=Dt(function(s){var u=Yi(s),l=pr(s,kw);return u===Yi(l)?u=r:l.pop(),l.length&&l[0]===s[0]?_w(l,it(u,2)):[]}),yL=Dt(function(s){var u=Yi(s),l=pr(s,kw);return u=typeof u=="function"?u:r,u&&l.pop(),l.length&&l[0]===s[0]?_w(l,r,u):[]});function gL(s,u){return s==null?"":pO.call(s,u)}function Yi(s){var u=s==null?0:s.length;return u?s[u-1]:r}function wL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var E=g;return l!==r&&(E=_t(l),E=E<0?Gr(g+E,0):_n(E,g-1)),u===u?XB(s,u,E):zd(s,tP,E,!0)}function bL(s,u){return s&&s.length?FP(s,_t(u)):r}var vL=Dt(xS);function xS(s,u){return s&&s.length&&u&&u.length?Sw(s,u):s}function _L(s,u,l){return s&&s.length&&u&&u.length?Sw(s,u,it(l,2)):s}function xL(s,u,l){return s&&s.length&&u&&u.length?Sw(s,u,r,l):s}var EL=Us(function(s,u){var l=s==null?0:s.length,g=gw(s,u);return OP(s,pr(u,function(E){return Ms(E,l)?+E:E}).sort(WP)),g});function PL(s,u){var l=[];if(!(s&&s.length))return l;var g=-1,E=[],C=s.length;for(u=it(u,3);++g<C;){var R=s[g];u(R,g,s)&&(l.push(R),E.push(g))}return OP(s,E),l}function Ww(s){return s==null?s:gO.call(s)}function SL(s,u,l){var g=s==null?0:s.length;return g?(l&&typeof l!="number"&&kn(s,u,l)?(u=0,l=g):(u=u==null?0:_t(u),l=l===r?g:_t(l)),Gi(s,u,l)):[]}function DL(s,u){return cm(s,u)}function AL(s,u,l){return Cw(s,u,it(l,2))}function CL(s,u){var l=s==null?0:s.length;if(l){var g=cm(s,u);if(g<l&&Po(s[g],u))return g}return-1}function IL(s,u){return cm(s,u,!0)}function TL(s,u,l){return Cw(s,u,it(l,2),!0)}function kL(s,u){var l=s==null?0:s.length;if(l){var g=cm(s,u,!0)-1;if(Po(s[g],u))return g}return-1}function FL(s){return s&&s.length?NP(s):[]}function RL(s,u){return s&&s.length?NP(s,it(u,2)):[]}function BL(s){var u=s==null?0:s.length;return u?Gi(s,1,u):[]}function OL(s,u,l){return s&&s.length?(u=l||u===r?1:_t(u),Gi(s,0,u<0?0:u)):[]}function LL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Gi(s,u<0?0:u,g)):[]}function NL(s,u){return s&&s.length?fm(s,it(u,3),!1,!0):[]}function UL(s,u){return s&&s.length?fm(s,it(u,3)):[]}var ML=Dt(function(s){return Ra(ln(s,1,Lr,!0))}),KL=Dt(function(s){var u=Yi(s);return Lr(u)&&(u=r),Ra(ln(s,1,Lr,!0),it(u,2))}),jL=Dt(function(s){var u=Yi(s);return u=typeof u=="function"?u:r,Ra(ln(s,1,Lr,!0),r,u)});function $L(s){return s&&s.length?Ra(s):[]}function zL(s,u){return s&&s.length?Ra(s,it(u,2)):[]}function qL(s,u){return u=typeof u=="function"?u:r,s&&s.length?Ra(s,r,u):[]}function Vw(s){if(!(s&&s.length))return[];var u=0;return s=Aa(s,function(l){if(Lr(l))return u=Gr(l.length,u),!0}),cw(u,function(l){return pr(s,sw(l))})}function ES(s,u){if(!(s&&s.length))return[];var l=Vw(s);return u==null?l:pr(l,function(g){return ai(u,r,g)})}var WL=Dt(function(s,u){return Lr(s)?Sh(s,u):[]}),VL=Dt(function(s){return Tw(Aa(s,Lr))}),HL=Dt(function(s){var u=Yi(s);return Lr(u)&&(u=r),Tw(Aa(s,Lr),it(u,2))}),GL=Dt(function(s){var u=Yi(s);return u=typeof u=="function"?u:r,Tw(Aa(s,Lr),r,u)}),YL=Dt(Vw);function JL(s,u){return jP(s||[],u||[],Ph)}function XL(s,u){return jP(s||[],u||[],Ch)}var QL=Dt(function(s){var u=s.length,l=u>1?s[u-1]:r;return l=typeof l=="function"?(s.pop(),l):r,ES(s,l)});function PS(s){var u=D(s);return u.__chain__=!0,u}function ZL(s,u){return u(s),s}function bm(s,u){return u(s)}var eN=Us(function(s){var u=s.length,l=u?s[0]:0,g=this.__wrapped__,E=function(C){return gw(C,s)};return u>1||this.__actions__.length||!(g instanceof Rt)||!Ms(l)?this.thru(E):(g=g.slice(l,+l+(u?1:0)),g.__actions__.push({func:bm,args:[E],thisArg:r}),new Vi(g,this.__chain__).thru(function(C){return u&&!C.length&&C.push(r),C}))});function tN(){return PS(this)}function rN(){return new Vi(this.value(),this.__chain__)}function nN(){this.__values__===r&&(this.__values__=US(this.value()));var s=this.__index__>=this.__values__.length,u=s?r:this.__values__[this.__index__++];return{done:s,value:u}}function iN(){return this}function oN(s){for(var u,l=this;l instanceof im;){var g=gS(l);g.__index__=0,g.__values__=r,u?E.__wrapped__=g:u=g;var E=g;l=l.__wrapped__}return E.__wrapped__=s,u}function sN(){var s=this.__wrapped__;if(s instanceof Rt){var u=s;return this.__actions__.length&&(u=new Rt(this)),u=u.reverse(),u.__actions__.push({func:bm,args:[Ww],thisArg:r}),new Vi(u,this.__chain__)}return this.thru(Ww)}function aN(){return KP(this.__wrapped__,this.__actions__)}var uN=lm(function(s,u,l){Jt.call(s,l)?++s[l]:Ls(s,l,1)});function cN(s,u,l){var g=bt(s)?ZE:ZO;return l&&kn(s,u,l)&&(u=r),g(s,it(u,3))}function fN(s,u){var l=bt(s)?Aa:EP;return l(s,it(u,3))}var lN=XP(wS),hN=XP(bS);function pN(s,u){return ln(vm(s,u),1)}function dN(s,u){return ln(vm(s,u),Mt)}function mN(s,u,l){return l=l===r?1:_t(l),ln(vm(s,u),l)}function SS(s,u){var l=bt(s)?qi:Fa;return l(s,it(u,3))}function DS(s,u){var l=bt(s)?BB:xP;return l(s,it(u,3))}var yN=lm(function(s,u,l){Jt.call(s,l)?s[l].push(u):Ls(s,l,[u])});function gN(s,u,l,g){s=Vn(s)?s:Af(s),l=l&&!g?_t(l):0;var E=s.length;return l<0&&(l=Gr(E+l,0)),Sm(s)?l<=E&&s.indexOf(u,l)>-1:!!E&&yf(s,u,l)>-1}var wN=Dt(function(s,u,l){var g=-1,E=typeof u=="function",C=Vn(s)?V(s.length):[];return Fa(s,function(R){C[++g]=E?ai(u,R,l):Dh(R,u,l)}),C}),bN=lm(function(s,u,l){Ls(s,l,u)});function vm(s,u){var l=bt(s)?pr:IP;return l(s,it(u,3))}function vN(s,u,l,g){return s==null?[]:(bt(u)||(u=u==null?[]:[u]),l=g?r:l,bt(l)||(l=l==null?[]:[l]),RP(s,u,l))}var _N=lm(function(s,u,l){s[l?0:1].push(u)},function(){return[[],[]]});function xN(s,u,l){var g=bt(s)?iw:nP,E=arguments.length<3;return g(s,it(u,4),l,E,Fa)}function EN(s,u,l){var g=bt(s)?OB:nP,E=arguments.length<3;return g(s,it(u,4),l,E,xP)}function PN(s,u){var l=bt(s)?Aa:EP;return l(s,Em(it(u,3)))}function SN(s){var u=bt(s)?wP:g4;return u(s)}function DN(s,u,l){(l?kn(s,u,l):u===r)?u=1:u=_t(u);var g=bt(s)?GO:w4;return g(s,u)}function AN(s){var u=bt(s)?YO:v4;return u(s)}function CN(s){if(s==null)return 0;if(Vn(s))return Sm(s)?wf(s):s.length;var u=xn(s);return u==Vr||u==ur?s.size:Ew(s).length}function IN(s,u,l){var g=bt(s)?ow:_4;return l&&kn(s,u,l)&&(u=r),g(s,it(u,3))}var TN=Dt(function(s,u){if(s==null)return[];var l=u.length;return l>1&&kn(s,u[0],u[1])?u=[]:l>2&&kn(u[0],u[1],u[2])&&(u=[u[0]]),RP(s,ln(u,1),[])}),_m=fO||function(){return Zr.Date.now()};function kN(s,u){if(typeof u!="function")throw new Wi(i);return s=_t(s),function(){if(--s<1)return u.apply(this,arguments)}}function AS(s,u,l){return u=l?r:u,u=s&&u==null?s.length:u,Ns(s,Pe,r,r,r,r,u)}function CS(s,u){var l;if(typeof u!="function")throw new Wi(i);return s=_t(s),function(){return--s>0&&(l=u.apply(this,arguments)),s<=1&&(u=r),l}}var Hw=Dt(function(s,u,l){var g=F;if(l.length){var E=Ia(l,Sf(Hw));g|=re}return Ns(s,g,u,l,E)}),IS=Dt(function(s,u,l){var g=F|N;if(l.length){var E=Ia(l,Sf(IS));g|=re}return Ns(u,g,s,l,E)});function TS(s,u,l){u=l?r:u;var g=Ns(s,pe,r,r,r,r,r,u);return g.placeholder=TS.placeholder,g}function kS(s,u,l){u=l?r:u;var g=Ns(s,De,r,r,r,r,r,u);return g.placeholder=kS.placeholder,g}function FS(s,u,l){var g,E,C,R,L,K,se=0,ae=!1,de=!1,Ce=!0;if(typeof s!="function")throw new Wi(i);u=Ji(u)||0,vr(l)&&(ae=!!l.leading,de="maxWait"in l,C=de?Gr(Ji(l.maxWait)||0,u):C,Ce="trailing"in l?!!l.trailing:Ce);function He(Nr){var So=g,$s=E;return g=E=r,se=Nr,R=s.apply($s,So),R}function st(Nr){return se=Nr,L=kh(It,u),ae?He(Nr):R}function xt(Nr){var So=Nr-K,$s=Nr-se,XS=u-So;return de?_n(XS,C-$s):XS}function at(Nr){var So=Nr-K,$s=Nr-se;return K===r||So>=u||So<0||de&&$s>=C}function It(){var Nr=_m();if(at(Nr))return Lt(Nr);L=kh(It,xt(Nr))}function Lt(Nr){return L=r,Ce&&g?He(Nr):(g=E=r,R)}function li(){L!==r&&$P(L),se=0,g=K=E=L=r}function Fn(){return L===r?R:Lt(_m())}function hi(){var Nr=_m(),So=at(Nr);if(g=arguments,E=this,K=Nr,So){if(L===r)return st(K);if(de)return $P(L),L=kh(It,u),He(K)}return L===r&&(L=kh(It,u)),R}return hi.cancel=li,hi.flush=Fn,hi}var FN=Dt(function(s,u){return _P(s,1,u)}),RN=Dt(function(s,u,l){return _P(s,Ji(u)||0,l)});function BN(s){return Ns(s,ge)}function xm(s,u){if(typeof s!="function"||u!=null&&typeof u!="function")throw new Wi(i);var l=function(){var g=arguments,E=u?u.apply(this,g):g[0],C=l.cache;if(C.has(E))return C.get(E);var R=s.apply(this,g);return l.cache=C.set(E,R)||C,R};return l.cache=new(xm.Cache||Os),l}xm.Cache=Os;function Em(s){if(typeof s!="function")throw new Wi(i);return function(){var u=arguments;switch(u.length){case 0:return!s.call(this);case 1:return!s.call(this,u[0]);case 2:return!s.call(this,u[0],u[1]);case 3:return!s.call(this,u[0],u[1],u[2])}return!s.apply(this,u)}}function ON(s){return CS(2,s)}var LN=x4(function(s,u){u=u.length==1&&bt(u[0])?pr(u[0],ui(it())):pr(ln(u,1),ui(it()));var l=u.length;return Dt(function(g){for(var E=-1,C=_n(g.length,l);++E<C;)g[E]=u[E].call(this,g[E]);return ai(s,this,g)})}),Gw=Dt(function(s,u){var l=Ia(u,Sf(Gw));return Ns(s,re,r,u,l)}),RS=Dt(function(s,u){var l=Ia(u,Sf(RS));return Ns(s,be,r,u,l)}),NN=Us(function(s,u){return Ns(s,Y,r,r,r,u)});function UN(s,u){if(typeof s!="function")throw new Wi(i);return u=u===r?u:_t(u),Dt(s,u)}function MN(s,u){if(typeof s!="function")throw new Wi(i);return u=u==null?0:Gr(_t(u),0),Dt(function(l){var g=l[u],E=Oa(l,0,u);return g&&Ca(E,g),ai(s,this,E)})}function KN(s,u,l){var g=!0,E=!0;if(typeof s!="function")throw new Wi(i);return vr(l)&&(g="leading"in l?!!l.leading:g,E="trailing"in l?!!l.trailing:E),FS(s,u,{leading:g,maxWait:u,trailing:E})}function jN(s){return AS(s,1)}function $N(s,u){return Gw(Fw(u),s)}function zN(){if(!arguments.length)return[];var s=arguments[0];return bt(s)?s:[s]}function qN(s){return Hi(s,w)}function WN(s,u){return u=typeof u=="function"?u:r,Hi(s,w,u)}function VN(s){return Hi(s,d|w)}function HN(s,u){return u=typeof u=="function"?u:r,Hi(s,d|w,u)}function GN(s,u){return u==null||vP(s,u,en(u))}function Po(s,u){return s===u||s!==s&&u!==u}var YN=mm(vw),JN=mm(function(s,u){return s>=u}),Wu=DP(function(){return arguments}())?DP:function(s){return Sr(s)&&Jt.call(s,"callee")&&!hP.call(s,"callee")},bt=V.isArray,XN=HE?ui(HE):o4;function Vn(s){return s!=null&&Pm(s.length)&&!Ks(s)}function Lr(s){return Sr(s)&&Vn(s)}function QN(s){return s===!0||s===!1||Sr(s)&&Tn(s)==Ui}var La=hO||ob,ZN=GE?ui(GE):s4;function eU(s){return Sr(s)&&s.nodeType===1&&!Fh(s)}function tU(s){if(s==null)return!0;if(Vn(s)&&(bt(s)||typeof s=="string"||typeof s.splice=="function"||La(s)||Df(s)||Wu(s)))return!s.length;var u=xn(s);if(u==Vr||u==ur)return!s.size;if(Th(s))return!Ew(s).length;for(var l in s)if(Jt.call(s,l))return!1;return!0}function rU(s,u){return Ah(s,u)}function nU(s,u,l){l=typeof l=="function"?l:r;var g=l?l(s,u):r;return g===r?Ah(s,u,r,l):!!g}function Yw(s){if(!Sr(s))return!1;var u=Tn(s);return u==Br||u==rs||typeof s.message=="string"&&typeof s.name=="string"&&!Fh(s)}function iU(s){return typeof s=="number"&&dP(s)}function Ks(s){if(!vr(s))return!1;var u=Tn(s);return u==Ki||u==bn||u==Xr||u==Sa}function BS(s){return typeof s=="number"&&s==_t(s)}function Pm(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=jr}function vr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Sr(s){return s!=null&&typeof s=="object"}var OS=YE?ui(YE):u4;function oU(s,u){return s===u||xw(s,u,Mw(u))}function sU(s,u,l){return l=typeof l=="function"?l:r,xw(s,u,Mw(u),l)}function aU(s){return LS(s)&&s!=+s}function uU(s){if(W4(s))throw new gt(n);return AP(s)}function cU(s){return s===null}function fU(s){return s==null}function LS(s){return typeof s=="number"||Sr(s)&&Tn(s)==go}function Fh(s){if(!Sr(s)||Tn(s)!=In)return!1;var u=Xd(s);if(u===null)return!0;var l=Jt.call(u,"constructor")&&u.constructor;return typeof l=="function"&&l instanceof l&&Hd.call(l)==sO}var Jw=JE?ui(JE):c4;function lU(s){return BS(s)&&s>=-jr&&s<=jr}var NS=XE?ui(XE):f4;function Sm(s){return typeof s=="string"||!bt(s)&&Sr(s)&&Tn(s)==zn}function fi(s){return typeof s=="symbol"||Sr(s)&&Tn(s)==qn}var Df=QE?ui(QE):l4;function hU(s){return s===r}function pU(s){return Sr(s)&&xn(s)==cn}function dU(s){return Sr(s)&&Tn(s)==$}var mU=mm(Pw),yU=mm(function(s,u){return s<=u});function US(s){if(!s)return[];if(Vn(s))return Sm(s)?xo(s):Wn(s);if(bh&&s[bh])return GB(s[bh]());var u=xn(s),l=u==Vr?lw:u==ur?qd:Af;return l(s)}function js(s){if(!s)return s===0?s:0;if(s=Ji(s),s===Mt||s===-Mt){var u=s<0?-1:1;return u*Cn}return s===s?s:0}function _t(s){var u=js(s),l=u%1;return u===u?l?u-l:u:0}function MS(s){return s?ju(_t(s),0,Wr):0}function Ji(s){if(typeof s=="number")return s;if(fi(s))return Rr;if(vr(s)){var u=typeof s.valueOf=="function"?s.valueOf():s;s=vr(u)?u+"":u}if(typeof s!="string")return s===0?s:+s;s=iP(s);var l=Ae.test(s);return l||Te.test(s)?kB(s.slice(2),l?2:8):Ke.test(s)?Rr:+s}function KS(s){return is(s,Hn(s))}function gU(s){return s?ju(_t(s),-jr,jr):s===0?s:0}function Vt(s){return s==null?"":ci(s)}var wU=Ef(function(s,u){if(Th(u)||Vn(u)){is(u,en(u),s);return}for(var l in u)Jt.call(u,l)&&Ph(s,l,u[l])}),jS=Ef(function(s,u){is(u,Hn(u),s)}),Dm=Ef(function(s,u,l,g){is(u,Hn(u),s,g)}),bU=Ef(function(s,u,l,g){is(u,en(u),s,g)}),vU=Us(gw);function _U(s,u){var l=xf(s);return u==null?l:bP(l,u)}var xU=Dt(function(s,u){s=ir(s);var l=-1,g=u.length,E=g>2?u[2]:r;for(E&&kn(u[0],u[1],E)&&(g=1);++l<g;)for(var C=u[l],R=Hn(C),L=-1,K=R.length;++L<K;){var se=R[L],ae=s[se];(ae===r||Po(ae,bf[se])&&!Jt.call(s,se))&&(s[se]=C[se])}return s}),EU=Dt(function(s){return s.push(r,iS),ai($S,r,s)});function PU(s,u){return eP(s,it(u,3),ns)}function SU(s,u){return eP(s,it(u,3),bw)}function DU(s,u){return s==null?s:ww(s,it(u,3),Hn)}function AU(s,u){return s==null?s:PP(s,it(u,3),Hn)}function CU(s,u){return s&&ns(s,it(u,3))}function IU(s,u){return s&&bw(s,it(u,3))}function TU(s){return s==null?[]:am(s,en(s))}function kU(s){return s==null?[]:am(s,Hn(s))}function Xw(s,u,l){var g=s==null?r:$u(s,u);return g===r?l:g}function FU(s,u){return s!=null&&aS(s,u,t4)}function Qw(s,u){return s!=null&&aS(s,u,r4)}var RU=ZP(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Gd.call(u)),s[u]=l},eb(Gn)),BU=ZP(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Gd.call(u)),Jt.call(s,u)?s[u].push(l):s[u]=[l]},it),OU=Dt(Dh);function en(s){return Vn(s)?gP(s):Ew(s)}function Hn(s){return Vn(s)?gP(s,!0):h4(s)}function LU(s,u){var l={};return u=it(u,3),ns(s,function(g,E,C){Ls(l,u(g,E,C),g)}),l}function NU(s,u){var l={};return u=it(u,3),ns(s,function(g,E,C){Ls(l,E,u(g,E,C))}),l}var UU=Ef(function(s,u,l){um(s,u,l)}),$S=Ef(function(s,u,l,g){um(s,u,l,g)}),MU=Us(function(s,u){var l={};if(s==null)return l;var g=!1;u=pr(u,function(C){return C=Ba(C,s),g||(g=C.length>1),C}),is(s,Nw(s),l),g&&(l=Hi(l,d|m|w,R4));for(var E=u.length;E--;)Iw(l,u[E]);return l});function KU(s,u){return zS(s,Em(it(u)))}var jU=Us(function(s,u){return s==null?{}:d4(s,u)});function zS(s,u){if(s==null)return{};var l=pr(Nw(s),function(g){return[g]});return u=it(u),BP(s,l,function(g,E){return u(g,E[0])})}function $U(s,u,l){u=Ba(u,s);var g=-1,E=u.length;for(E||(E=1,s=r);++g<E;){var C=s==null?r:s[os(u[g])];C===r&&(g=E,C=l),s=Ks(C)?C.call(s):C}return s}function zU(s,u,l){return s==null?s:Ch(s,u,l)}function qU(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:Ch(s,u,l,g)}var qS=rS(en),WS=rS(Hn);function WU(s,u,l){var g=bt(s),E=g||La(s)||Df(s);if(u=it(u,4),l==null){var C=s&&s.constructor;E?l=g?new C:[]:vr(s)?l=Ks(C)?xf(Xd(s)):{}:l={}}return(E?qi:ns)(s,function(R,L,K){return u(l,R,L,K)}),l}function VU(s,u){return s==null?!0:Iw(s,u)}function HU(s,u,l){return s==null?s:MP(s,u,Fw(l))}function GU(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:MP(s,u,Fw(l),g)}function Af(s){return s==null?[]:fw(s,en(s))}function YU(s){return s==null?[]:fw(s,Hn(s))}function JU(s,u,l){return l===r&&(l=u,u=r),l!==r&&(l=Ji(l),l=l===l?l:0),u!==r&&(u=Ji(u),u=u===u?u:0),ju(Ji(s),u,l)}function XU(s,u,l){return u=js(u),l===r?(l=u,u=0):l=js(l),s=Ji(s),n4(s,u,l)}function QU(s,u,l){if(l&&typeof l!="boolean"&&kn(s,u,l)&&(u=l=r),l===r&&(typeof u=="boolean"?(l=u,u=r):typeof s=="boolean"&&(l=s,s=r)),s===r&&u===r?(s=0,u=1):(s=js(s),u===r?(u=s,s=0):u=js(u)),s>u){var g=s;s=u,u=g}if(l||s%1||u%1){var E=mP();return _n(s+E*(u-s+TB("1e-"+((E+"").length-1))),u)}return Dw(s,u)}var ZU=Pf(function(s,u,l){return u=u.toLowerCase(),s+(l?VS(u):u)});function VS(s){return Zw(Vt(s).toLowerCase())}function HS(s){return s=Vt(s),s&&s.replace(ot,zB).replace(vB,"")}function eM(s,u,l){s=Vt(s),u=ci(u);var g=s.length;l=l===r?g:ju(_t(l),0,g);var E=l;return l-=u.length,l>=0&&s.slice(l,E)==u}function tM(s){return s=Vt(s),s&&yh.test(s)?s.replace(Ru,qB):s}function rM(s){return s=Vt(s),s&&fn.test(s)?s.replace(Lu,"\\$&"):s}var nM=Pf(function(s,u,l){return s+(l?"-":"")+u.toLowerCase()}),iM=Pf(function(s,u,l){return s+(l?" ":"")+u.toLowerCase()}),oM=JP("toLowerCase");function sM(s,u,l){s=Vt(s),u=_t(u);var g=u?wf(s):0;if(!u||g>=u)return s;var E=(u-g)/2;return dm(tm(E),l)+s+dm(em(E),l)}function aM(s,u,l){s=Vt(s),u=_t(u);var g=u?wf(s):0;return u&&g<u?s+dm(u-g,l):s}function uM(s,u,l){s=Vt(s),u=_t(u);var g=u?wf(s):0;return u&&g<u?dm(u-g,l)+s:s}function cM(s,u,l){return l||u==null?u=0:u&&(u=+u),yO(Vt(s).replace(Da,""),u||0)}function fM(s,u,l){return(l?kn(s,u,l):u===r)?u=1:u=_t(u),Aw(Vt(s),u)}function lM(){var s=arguments,u=Vt(s[0]);return s.length<3?u:u.replace(s[1],s[2])}var hM=Pf(function(s,u,l){return s+(l?"_":"")+u.toLowerCase()});function pM(s,u,l){return l&&typeof l!="number"&&kn(s,u,l)&&(u=l=r),l=l===r?Wr:l>>>0,l?(s=Vt(s),s&&(typeof u=="string"||u!=null&&!Jw(u))&&(u=ci(u),!u&&gf(s))?Oa(xo(s),0,l):s.split(u,l)):[]}var dM=Pf(function(s,u,l){return s+(l?" ":"")+Zw(u)});function mM(s,u,l){return s=Vt(s),l=l==null?0:ju(_t(l),0,s.length),u=ci(u),s.slice(l,l+u.length)==u}function yM(s,u,l){var g=D.templateSettings;l&&kn(s,u,l)&&(u=r),s=Vt(s),u=Dm({},u,g,nS);var E=Dm({},u.imports,g.imports,nS),C=en(E),R=fw(E,C),L,K,se=0,ae=u.interpolate||ct,de="__p += '",Ce=hw((u.escape||ct).source+"|"+ae.source+"|"+(ae===_o?oe:ct).source+"|"+(u.evaluate||ct).source+"|$","g"),He="//# sourceURL="+(Jt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++SB+"]")+`
`;s.replace(Ce,function(at,It,Lt,li,Fn,hi){return Lt||(Lt=li),de+=s.slice(se,hi).replace(lt,WB),It&&(L=!0,de+=`' +
__e(`+It+`) +
'`),Fn&&(K=!0,de+=`';
`+Fn+`;
__p += '`),Lt&&(de+=`' +
((__t = (`+Lt+`)) == null ? '' : __t) +
'`),se=hi+at.length,at}),de+=`';
`;var st=Jt.call(u,"variable")&&u.variable;if(!st)de=`with (obj) {
`+de+`
}
`;else if(M.test(st))throw new gt(o);de=(K?de.replace(bo,""):de).replace(Fs,"$1").replace(vo,"$1;"),de="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var xt=YS(function(){return zt(C,He+"return "+de).apply(r,R)});if(xt.source=de,Yw(xt))throw xt;return xt}function gM(s){return Vt(s).toLowerCase()}function wM(s){return Vt(s).toUpperCase()}function bM(s,u,l){if(s=Vt(s),s&&(l||u===r))return iP(s);if(!s||!(u=ci(u)))return s;var g=xo(s),E=xo(u),C=oP(g,E),R=sP(g,E)+1;return Oa(g,C,R).join("")}function vM(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.slice(0,uP(s)+1);if(!s||!(u=ci(u)))return s;var g=xo(s),E=sP(g,xo(u))+1;return Oa(g,0,E).join("")}function _M(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.replace(Da,"");if(!s||!(u=ci(u)))return s;var g=xo(s),E=oP(g,xo(u));return Oa(g,E).join("")}function xM(s,u){var l=_e,g=Me;if(vr(u)){var E="separator"in u?u.separator:E;l="length"in u?_t(u.length):l,g="omission"in u?ci(u.omission):g}s=Vt(s);var C=s.length;if(gf(s)){var R=xo(s);C=R.length}if(l>=C)return s;var L=l-wf(g);if(L<1)return g;var K=R?Oa(R,0,L).join(""):s.slice(0,L);if(E===r)return K+g;if(R&&(L+=K.length-L),Jw(E)){if(s.slice(L).search(E)){var se,ae=K;for(E.global||(E=hw(E.source,Vt(ye.exec(E))+"g")),E.lastIndex=0;se=E.exec(ae);)var de=se.index;K=K.slice(0,de===r?L:de)}}else if(s.indexOf(ci(E),L)!=L){var Ce=K.lastIndexOf(E);Ce>-1&&(K=K.slice(0,Ce))}return K+g}function EM(s){return s=Vt(s),s&&ji.test(s)?s.replace(Rs,QB):s}var PM=Pf(function(s,u,l){return s+(l?" ":"")+u.toUpperCase()}),Zw=JP("toUpperCase");function GS(s,u,l){return s=Vt(s),u=l?r:u,u===r?HB(s)?tO(s):UB(s):s.match(u)||[]}var YS=Dt(function(s,u){try{return ai(s,r,u)}catch(l){return Yw(l)?l:new gt(l)}}),SM=Us(function(s,u){return qi(u,function(l){l=os(l),Ls(s,l,Hw(s[l],s))}),s});function DM(s){var u=s==null?0:s.length,l=it();return s=u?pr(s,function(g){if(typeof g[1]!="function")throw new Wi(i);return[l(g[0]),g[1]]}):[],Dt(function(g){for(var E=-1;++E<u;){var C=s[E];if(ai(C[0],this,g))return ai(C[1],this,g)}})}function AM(s){return QO(Hi(s,d))}function eb(s){return function(){return s}}function CM(s,u){return s==null||s!==s?u:s}var IM=QP(),TM=QP(!0);function Gn(s){return s}function tb(s){return CP(typeof s=="function"?s:Hi(s,d))}function kM(s){return TP(Hi(s,d))}function FM(s,u){return kP(s,Hi(u,d))}var RM=Dt(function(s,u){return function(l){return Dh(l,s,u)}}),BM=Dt(function(s,u){return function(l){return Dh(s,l,u)}});function rb(s,u,l){var g=en(u),E=am(u,g);l==null&&!(vr(u)&&(E.length||!g.length))&&(l=u,u=s,s=this,E=am(u,en(u)));var C=!(vr(l)&&"chain"in l)||!!l.chain,R=Ks(s);return qi(E,function(L){var K=u[L];s[L]=K,R&&(s.prototype[L]=function(){var se=this.__chain__;if(C||se){var ae=s(this.__wrapped__),de=ae.__actions__=Wn(this.__actions__);return de.push({func:K,args:arguments,thisArg:s}),ae.__chain__=se,ae}return K.apply(s,Ca([this.value()],arguments))})}),s}function OM(){return Zr._===this&&(Zr._=aO),this}function nb(){}function LM(s){return s=_t(s),Dt(function(u){return FP(u,s)})}var NM=Bw(pr),UM=Bw(ZE),MM=Bw(ow);function JS(s){return jw(s)?sw(os(s)):m4(s)}function KM(s){return function(u){return s==null?r:$u(s,u)}}var jM=eS(),$M=eS(!0);function ib(){return[]}function ob(){return!1}function zM(){return{}}function qM(){return""}function WM(){return!0}function VM(s,u){if(s=_t(s),s<1||s>jr)return[];var l=Wr,g=_n(s,Wr);u=it(u),s-=Wr;for(var E=cw(g,u);++l<s;)u(l);return E}function HM(s){return bt(s)?pr(s,os):fi(s)?[s]:Wn(yS(Vt(s)))}function GM(s){var u=++oO;return Vt(s)+u}var YM=pm(function(s,u){return s+u},0),JM=Ow("ceil"),XM=pm(function(s,u){return s/u},1),QM=Ow("floor");function ZM(s){return s&&s.length?sm(s,Gn,vw):r}function e5(s,u){return s&&s.length?sm(s,it(u,2),vw):r}function t5(s){return rP(s,Gn)}function r5(s,u){return rP(s,it(u,2))}function n5(s){return s&&s.length?sm(s,Gn,Pw):r}function i5(s,u){return s&&s.length?sm(s,it(u,2),Pw):r}var o5=pm(function(s,u){return s*u},1),s5=Ow("round"),a5=pm(function(s,u){return s-u},0);function u5(s){return s&&s.length?uw(s,Gn):0}function c5(s,u){return s&&s.length?uw(s,it(u,2)):0}return D.after=kN,D.ary=AS,D.assign=wU,D.assignIn=jS,D.assignInWith=Dm,D.assignWith=bU,D.at=vU,D.before=CS,D.bind=Hw,D.bindAll=SM,D.bindKey=IS,D.castArray=zN,D.chain=PS,D.chunk=Q4,D.compact=Z4,D.concat=eL,D.cond=DM,D.conforms=AM,D.constant=eb,D.countBy=uN,D.create=_U,D.curry=TS,D.curryRight=kS,D.debounce=FS,D.defaults=xU,D.defaultsDeep=EU,D.defer=FN,D.delay=RN,D.difference=tL,D.differenceBy=rL,D.differenceWith=nL,D.drop=iL,D.dropRight=oL,D.dropRightWhile=sL,D.dropWhile=aL,D.fill=uL,D.filter=fN,D.flatMap=pN,D.flatMapDeep=dN,D.flatMapDepth=mN,D.flatten=vS,D.flattenDeep=cL,D.flattenDepth=fL,D.flip=BN,D.flow=IM,D.flowRight=TM,D.fromPairs=lL,D.functions=TU,D.functionsIn=kU,D.groupBy=yN,D.initial=pL,D.intersection=dL,D.intersectionBy=mL,D.intersectionWith=yL,D.invert=RU,D.invertBy=BU,D.invokeMap=wN,D.iteratee=tb,D.keyBy=bN,D.keys=en,D.keysIn=Hn,D.map=vm,D.mapKeys=LU,D.mapValues=NU,D.matches=kM,D.matchesProperty=FM,D.memoize=xm,D.merge=UU,D.mergeWith=$S,D.method=RM,D.methodOf=BM,D.mixin=rb,D.negate=Em,D.nthArg=LM,D.omit=MU,D.omitBy=KU,D.once=ON,D.orderBy=vN,D.over=NM,D.overArgs=LN,D.overEvery=UM,D.overSome=MM,D.partial=Gw,D.partialRight=RS,D.partition=_N,D.pick=jU,D.pickBy=zS,D.property=JS,D.propertyOf=KM,D.pull=vL,D.pullAll=xS,D.pullAllBy=_L,D.pullAllWith=xL,D.pullAt=EL,D.range=jM,D.rangeRight=$M,D.rearg=NN,D.reject=PN,D.remove=PL,D.rest=UN,D.reverse=Ww,D.sampleSize=DN,D.set=zU,D.setWith=qU,D.shuffle=AN,D.slice=SL,D.sortBy=TN,D.sortedUniq=FL,D.sortedUniqBy=RL,D.split=pM,D.spread=MN,D.tail=BL,D.take=OL,D.takeRight=LL,D.takeRightWhile=NL,D.takeWhile=UL,D.tap=ZL,D.throttle=KN,D.thru=bm,D.toArray=US,D.toPairs=qS,D.toPairsIn=WS,D.toPath=HM,D.toPlainObject=KS,D.transform=WU,D.unary=jN,D.union=ML,D.unionBy=KL,D.unionWith=jL,D.uniq=$L,D.uniqBy=zL,D.uniqWith=qL,D.unset=VU,D.unzip=Vw,D.unzipWith=ES,D.update=HU,D.updateWith=GU,D.values=Af,D.valuesIn=YU,D.without=WL,D.words=GS,D.wrap=$N,D.xor=VL,D.xorBy=HL,D.xorWith=GL,D.zip=YL,D.zipObject=JL,D.zipObjectDeep=XL,D.zipWith=QL,D.entries=qS,D.entriesIn=WS,D.extend=jS,D.extendWith=Dm,rb(D,D),D.add=YM,D.attempt=YS,D.camelCase=ZU,D.capitalize=VS,D.ceil=JM,D.clamp=JU,D.clone=qN,D.cloneDeep=VN,D.cloneDeepWith=HN,D.cloneWith=WN,D.conformsTo=GN,D.deburr=HS,D.defaultTo=CM,D.divide=XM,D.endsWith=eM,D.eq=Po,D.escape=tM,D.escapeRegExp=rM,D.every=cN,D.find=lN,D.findIndex=wS,D.findKey=PU,D.findLast=hN,D.findLastIndex=bS,D.findLastKey=SU,D.floor=QM,D.forEach=SS,D.forEachRight=DS,D.forIn=DU,D.forInRight=AU,D.forOwn=CU,D.forOwnRight=IU,D.get=Xw,D.gt=YN,D.gte=JN,D.has=FU,D.hasIn=Qw,D.head=_S,D.identity=Gn,D.includes=gN,D.indexOf=hL,D.inRange=XU,D.invoke=OU,D.isArguments=Wu,D.isArray=bt,D.isArrayBuffer=XN,D.isArrayLike=Vn,D.isArrayLikeObject=Lr,D.isBoolean=QN,D.isBuffer=La,D.isDate=ZN,D.isElement=eU,D.isEmpty=tU,D.isEqual=rU,D.isEqualWith=nU,D.isError=Yw,D.isFinite=iU,D.isFunction=Ks,D.isInteger=BS,D.isLength=Pm,D.isMap=OS,D.isMatch=oU,D.isMatchWith=sU,D.isNaN=aU,D.isNative=uU,D.isNil=fU,D.isNull=cU,D.isNumber=LS,D.isObject=vr,D.isObjectLike=Sr,D.isPlainObject=Fh,D.isRegExp=Jw,D.isSafeInteger=lU,D.isSet=NS,D.isString=Sm,D.isSymbol=fi,D.isTypedArray=Df,D.isUndefined=hU,D.isWeakMap=pU,D.isWeakSet=dU,D.join=gL,D.kebabCase=nM,D.last=Yi,D.lastIndexOf=wL,D.lowerCase=iM,D.lowerFirst=oM,D.lt=mU,D.lte=yU,D.max=ZM,D.maxBy=e5,D.mean=t5,D.meanBy=r5,D.min=n5,D.minBy=i5,D.stubArray=ib,D.stubFalse=ob,D.stubObject=zM,D.stubString=qM,D.stubTrue=WM,D.multiply=o5,D.nth=bL,D.noConflict=OM,D.noop=nb,D.now=_m,D.pad=sM,D.padEnd=aM,D.padStart=uM,D.parseInt=cM,D.random=QU,D.reduce=xN,D.reduceRight=EN,D.repeat=fM,D.replace=lM,D.result=$U,D.round=s5,D.runInContext=U,D.sample=SN,D.size=CN,D.snakeCase=hM,D.some=IN,D.sortedIndex=DL,D.sortedIndexBy=AL,D.sortedIndexOf=CL,D.sortedLastIndex=IL,D.sortedLastIndexBy=TL,D.sortedLastIndexOf=kL,D.startCase=dM,D.startsWith=mM,D.subtract=a5,D.sum=u5,D.sumBy=c5,D.template=yM,D.times=VM,D.toFinite=js,D.toInteger=_t,D.toLength=MS,D.toLower=gM,D.toNumber=Ji,D.toSafeInteger=gU,D.toString=Vt,D.toUpper=wM,D.trim=bM,D.trimEnd=vM,D.trimStart=_M,D.truncate=xM,D.unescape=EM,D.uniqueId=GM,D.upperCase=PM,D.upperFirst=Zw,D.each=SS,D.eachRight=DS,D.first=_S,rb(D,function(){var s={};return ns(D,function(u,l){Jt.call(D.prototype,l)||(s[l]=u)}),s}(),{chain:!1}),D.VERSION=e,qi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){D[s].placeholder=D}),qi(["drop","take"],function(s,u){Rt.prototype[s]=function(l){l=l===r?1:Gr(_t(l),0);var g=this.__filtered__&&!u?new Rt(this):this.clone();return g.__filtered__?g.__takeCount__=_n(l,g.__takeCount__):g.__views__.push({size:_n(l,Wr),type:s+(g.__dir__<0?"Right":"")}),g},Rt.prototype[s+"Right"]=function(l){return this.reverse()[s](l).reverse()}}),qi(["filter","map","takeWhile"],function(s,u){var l=u+1,g=l==Bt||l==hr;Rt.prototype[s]=function(E){var C=this.clone();return C.__iteratees__.push({iteratee:it(E,3),type:l}),C.__filtered__=C.__filtered__||g,C}}),qi(["head","last"],function(s,u){var l="take"+(u?"Right":"");Rt.prototype[s]=function(){return this[l](1).value()[0]}}),qi(["initial","tail"],function(s,u){var l="drop"+(u?"":"Right");Rt.prototype[s]=function(){return this.__filtered__?new Rt(this):this[l](1)}}),Rt.prototype.compact=function(){return this.filter(Gn)},Rt.prototype.find=function(s){return this.filter(s).head()},Rt.prototype.findLast=function(s){return this.reverse().find(s)},Rt.prototype.invokeMap=Dt(function(s,u){return typeof s=="function"?new Rt(this):this.map(function(l){return Dh(l,s,u)})}),Rt.prototype.reject=function(s){return this.filter(Em(it(s)))},Rt.prototype.slice=function(s,u){s=_t(s);var l=this;return l.__filtered__&&(s>0||u<0)?new Rt(l):(s<0?l=l.takeRight(-s):s&&(l=l.drop(s)),u!==r&&(u=_t(u),l=u<0?l.dropRight(-u):l.take(u-s)),l)},Rt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Rt.prototype.toArray=function(){return this.take(Wr)},ns(Rt.prototype,function(s,u){var l=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),E=D[g?"take"+(u=="last"?"Right":""):u],C=g||/^find/.test(u);!E||(D.prototype[u]=function(){var R=this.__wrapped__,L=g?[1]:arguments,K=R instanceof Rt,se=L[0],ae=K||bt(R),de=function(It){var Lt=E.apply(D,Ca([It],L));return g&&Ce?Lt[0]:Lt};ae&&l&&typeof se=="function"&&se.length!=1&&(K=ae=!1);var Ce=this.__chain__,He=!!this.__actions__.length,st=C&&!Ce,xt=K&&!He;if(!C&&ae){R=xt?R:new Rt(this);var at=s.apply(R,L);return at.__actions__.push({func:bm,args:[de],thisArg:r}),new Vi(at,Ce)}return st&&xt?s.apply(this,L):(at=this.thru(de),st?g?at.value()[0]:at.value():at)})}),qi(["pop","push","shift","sort","splice","unshift"],function(s){var u=Wd[s],l=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);D.prototype[s]=function(){var E=arguments;if(g&&!this.__chain__){var C=this.value();return u.apply(bt(C)?C:[],E)}return this[l](function(R){return u.apply(bt(R)?R:[],E)})}}),ns(Rt.prototype,function(s,u){var l=D[u];if(l){var g=l.name+"";Jt.call(_f,g)||(_f[g]=[]),_f[g].push({name:u,func:l})}}),_f[hm(r,N).name]=[{name:"wrapper",func:r}],Rt.prototype.clone=EO,Rt.prototype.reverse=PO,Rt.prototype.value=SO,D.prototype.at=eN,D.prototype.chain=tN,D.prototype.commit=rN,D.prototype.next=nN,D.prototype.plant=oN,D.prototype.reverse=sN,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=aN,D.prototype.first=D.prototype.head,bh&&(D.prototype[bh]=iN),D},Ta=rO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Zr._=Ta,define(function(){return Ta})):Nu?((Nu.exports=Ta)._=Ta,tw._=Ta):Zr._=Ta}).call(fl)});var h8=ce(Un=>{"use strict";h();p();var xz=Un&&Un.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ll=Un&&Un.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hl=Un&&Un.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},e_=Un&&Un.__param||function(r,e){return function(t,n){e(t,n,r)}},Ez=Un&&Un.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},l8=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});var Pz=l8(Bo()),t_=l8(Qv()),ra=vi(),Sz=Oy(),r_=function(){function r(){this._content=[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),r.prototype.get=function(e){return this._content[e]},r.prototype.add=function(e){var t=Sz.sortedIndexBy(this._content,e,function(n){return n.frequency});this._content.splice(t,0,e)},r.prototype.remove=function(e){this._content.splice(e,1)},r.prototype.popMin=function(){return this._content.shift()},r.prototype.indexOf=function(e){return this._content.findIndex(function(t){return t.value===e})},r.prototype.clear=function(){this._content=[]},r}(),Dz=function(r){xz(e,r);function e(t,n,i){var o=r.call(this)||this;return o._k=t,o._errorRate=n,o._accuracy=i,o._sketch=t_.default.create(n,i),o._heap=new r_,o}return e.prototype.add=function(t){this._sketch.update(t);var n=this._sketch.count(t);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var i=this._heap.indexOf(t);i>-1&&this._heap.remove(i),this._heap.add({value:t,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=t_.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],n=this._heap.length-1;n>=0;n--){var i=this._heap.get(n);t.push({value:i.value,frequency:i.frequency,rank:this._heap.length-n})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var n,i;return Ez(this,function(o){switch(o.label){case 0:n=t.length-1,o.label=1;case 1:return n>=0?(i=t.get(n),[4,{value:i.value,frequency:i.frequency,rank:t.length-n}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},ll([ra.Field(),hl("design:type",Number)],e.prototype,"_k",void 0),ll([ra.Field(),hl("design:type",Number)],e.prototype,"_errorRate",void 0),ll([ra.Field(),hl("design:type",Number)],e.prototype,"_accuracy",void 0),ll([ra.Field(),hl("design:type",t_.default)],e.prototype,"_sketch",void 0),ll([ra.Field(function(t){return t.content},function(t){var n=new r_;return n.content=t,n}),hl("design:type",r_)],e.prototype,"_heap",void 0),e=ll([ra.AutoExportable("TopK",["_seed"]),e_(0,ra.Parameter("_k")),e_(1,ra.Parameter("_errorRate")),e_(2,ra.Parameter("_accuracy")),hl("design:paramtypes",[Number,Number,Number])],e),e}(Pz.default);Un.default=Dz});var n_=ce(yn=>{"use strict";h();p();var m8=yn&&yn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ly=yn&&yn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ny=yn&&yn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},p8=yn&&yn.__param||function(r,e){return function(t,n){e(t,n,r)}},Az=yn&&yn.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Cz=yn&&yn.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Az(arguments[e]));return r},Iz=yn&&yn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yn,"__esModule",{value:!0});var Tz=Iz(Bo()),pl=vi(),kz=oo(),Fz=Oy(),Rz=function(r){m8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function d8(r,e){return(e.a*r+e.b)%e.c}var Bz=function(r){m8(e,r);function e(t,n){var i=r.call(this)||this;return i._nbHashes=t,i._hashFunctions=n,i._signature=kz.allocateArray(i._nbHashes,1/0),i}return Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],d8(t,this._hashFunctions[n]))},e.prototype.bulkLoad=function(t){for(var n=this,i=function(c){var f=t.map(function(d){return d8(d,n._hashFunctions[c])});o._signature[c]=Math.min.apply(Math,Cz([o._signature[c]],f))},o=this,a=0;a<this._nbHashes;a++)i(a)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new Rz("Cannot compute a Jaccard similairty with a MinHash that contains no values");return Fz.intersection(this._signature,t._signature).length/this._nbHashes},Ly([pl.Field(),Ny("design:type",Number)],e.prototype,"_nbHashes",void 0),Ly([pl.Field(),Ny("design:type",Array)],e.prototype,"_hashFunctions",void 0),Ly([pl.Field(),Ny("design:type",Array)],e.prototype,"_signature",void 0),e=Ly([pl.AutoExportable("MinHash",["_seed"]),p8(0,pl.Parameter("_nbHashes")),p8(1,pl.Parameter("_hashFunctions")),Ny("design:paramtypes",[Number,Array])],e),e}(Tz.default);yn.MinHash=Bz});var g8=ce(i_=>{"use strict";h();p();Object.defineProperty(i_,"__esModule",{value:!0});var Oz=n_(),y8=Oy();function Lz(r){if(r!==2&&r%2===0)return!1;for(var e=2;e<Math.sqrt(r);e++)if(r%e===0)return!1;return!0}function Nz(r){for(var e=0;;){if(Lz(r+e))return r+e;e++}}var Uz=function(){function r(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var n=Nz(this._maxValue),i=0;i<this._nbHashes;i++){var o=y8.random(0,this._maxValue,!1),a=y8.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:a,c:n})}}return r.prototype.create=function(){return new Oz.MinHash(this._nbHashes,this._hashFunctions)},r}();i_.default=Uz});var b8=ce((Rae,w8)=>{h();p();function Mz(r,e){return r===e||r!==r&&e!==e}w8.exports=Mz});var P8=ce((Lae,E8)=>{h();p();var v8=1/0,Kz=17976931348623157e292,_8=0/0,jz="[object Symbol]",$z=/^\s+|\s+$/g,zz=/^[-+]0x[0-9a-f]+$/i,qz=/^0b[01]+$/i,Wz=/^0o[0-7]+$/i,Vz=parseInt;function Hz(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function Gz(r,e,t){if(e!==e)return Hz(r,Yz,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function Yz(r){return r!==r}var Jz=Object.prototype,Xz=Jz.toString,Qz=Math.max;function Zz(r,e,t){var n=r?r.length:0;if(!n)return-1;var i=t==null?0:nq(t);return i<0&&(i=Qz(n+i,0)),Gz(r,e,i)}function x8(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function eq(r){return!!r&&typeof r=="object"}function tq(r){return typeof r=="symbol"||eq(r)&&Xz.call(r)==jz}function rq(r){if(!r)return r===0?r:0;if(r=iq(r),r===v8||r===-v8){var e=r<0?-1:1;return e*Kz}return r===r?r:0}function nq(r){var e=rq(r),t=e%1;return e===e?t?e-t:e:0}function iq(r){if(typeof r=="number")return r;if(tq(r))return _8;if(x8(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=x8(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace($z,"");var t=qz.test(r);return t||Wz.test(r)?Vz(r.slice(2),t?2:8):zz.test(r)?_8:+r}E8.exports=Zz});var A8=ce(Oo=>{"use strict";h();p();var oq=Oo&&Oo.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sq=Oo&&Oo.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},D8=Oo&&Oo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},aq=Oo&&Oo.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Oo,"__esModule",{value:!0});var uq=D8(b8()),o_=D8(P8()),S8=aq(oo()),cq=vi(),fq=vi(),lq=function(){function r(t){this._elements=S8.allocateArray(t,null),this._size=t,this._length=0}e=r,Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.isFree=function(){return this._length<this._size},r.prototype.nextEmptySlot=function(){return o_.default(this._elements,null)},r.prototype.at=function(t){return this._elements[t]},r.prototype.add=function(t){return t===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),t),this._length++,!0)},r.prototype.remove=function(t){var n=o_.default(this._elements,t);return n<=-1?!1:(this.unset(n),!0)},r.prototype.has=function(t){return o_.default(this._elements,t)>-1},r.prototype.set=function(t,n){this._elements[t]=n},r.prototype.unset=function(t){this._elements[t]=null,this._length--},r.prototype.swapRandom=function(t,n){n===void 0&&(n=Math.random);var i=S8.randomInt(0,this._length-1,n),o=this._elements[i];return this._elements[i]=t,o},r.prototype.swap=function(t,n){var i=this._elements[t];return this._elements[t]=n,i},r.prototype.equals=function(t){return this._size!==t.size||this._length!==t.length?!1:this._elements.every(function(n,i){return uq.default(t.at(i),n)})};var e;return r=e=oq([cq.Exportable({export:fq.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type!=="Bucket"||"_size"in t,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new e(t._size);return t._elements.forEach(function(i,o){i!==null&&(n._elements[o]=i,n._length++)}),n}}),sq("design:paramtypes",[Number])],r),r}();Oo.default=lq});var k8=ce(Lo=>{"use strict";h();p();var hq=Lo&&Lo.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pq=Lo&&Lo.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dq=Lo&&Lo.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},T8=Lo&&Lo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lo,"__esModule",{value:!0});var mq=T8(Bo()),C8=T8(A8()),I8=vi(),Pp=oo();function yq(r,e){var t=Math.ceil(Math.log2(1/e)+Math.log2(2*r));return Math.ceil(t/4)}var gq=function(r){hq(e,r);function e(n,i,o,a){a===void 0&&(a=500);var c=r.call(this)||this;return c._filter=Pp.allocateArray(n,function(){return new C8.default(o)}),c._size=n,c._bucketSize=o,c._fingerprintLength=i,c._length=0,c._maxKicks=a,c}t=e,e.create=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=yq(o,i),f=Math.ceil(n/o/.955);return new t(f,c,o,a)},e.from=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Array.from(n),f=t.create(c.length,i,o,a);return c.forEach(function(d){return f.add(d)}),f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);var a=this._locations(n);if(this._filter[a.firstIndex].isFree())this._filter[a.firstIndex].add(a.fingerprint);else if(this._filter[a.secondIndex].isFree())this._filter[a.secondIndex].add(a.fingerprint);else{for(var c=this.random()<.5?a.firstIndex:a.secondIndex,f=a.fingerprint,d=[],m=0;m<this._maxKicks;m++){var w=Pp.randomInt(0,this._filter[c].length-1,this.random),x=this._filter[c].at(w);d.push([c,w,x]),this._filter[c].set(w,f),f=x;var T=Pp.hashAsInt(f,this.seed,64);if(c=Math.abs(c^Math.abs(T))%this._filter.length,this._filter[c].isFree())return this._filter[c].add(f),this._length++,!0}if(!o)for(var F=d.length-1;F>=0;F--){var N=d[F];this._filter[N[0]].set(N[1],N[2])}if(i)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},e.prototype.remove=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)?(this._filter[i.firstIndex].remove(i.fingerprint),this._length--,!0):this._filter[i.secondIndex].has(i.fingerprint)?(this._filter[i.secondIndex].remove(i.fingerprint),this._length--,!0):!1},e.prototype.has=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)||this._filter[i.secondIndex].has(i.fingerprint)},e.prototype.rate=function(){var n=this._computeHashTableLoad(),i=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*i)},e.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,i=this._filter.reduce(function(o,a){return o+a.length},0);return{used:i,free:n-i,size:n,load:i/n}},e.prototype._locations=function(n){var i=Pp.hashIntAndString(n,this.seed,16,64),o=i.int;if(this._fingerprintLength>i.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+i.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var a=i.string.substring(0,this._fingerprintLength),c=Math.abs(o),f=Math.abs(Pp.hashAsInt(a,this.seed,64)),d=Math.abs(c^f),m={fingerprint:a,firstIndex:c%this._size,secondIndex:d%this._size};return m},e.prototype.equals=function(n){for(var i=0,o=!0;o&&i<this._filter.length;){var a=this._filter[i];n._filter[i].equals(a)||(o=!1),i++}return o};var t;return e=t=pq([I8.Exportable({export:I8.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var i=new t(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return i._length=n._length,i._filter=n._filter.map(function(o){var a=new C8.default(o._size);return o._elements.forEach(function(c,f){c!==null&&(a._elements[f]=c,a._length++)}),a}),i.seed=n.seed,i}}),dq("design:paramtypes",[Number,Number,Number,Number])],e),e}(mq.default);Lo.default=gq});var a_=ce(Si=>{"use strict";h();p();var wq=Si&&Si.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uy=Si&&Si.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},My=Si&&Si.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},s_=Si&&Si.__param||function(r,e){return function(t,n){e(t,n,r)}},bq=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var vc=dc(),Sp=oo(),_c=vi(),vq=bq(Bo()),_q=Symbol.for("nodejs.util.inspect.custom"),xq=function(r){wq(e,r);function e(n,i,o){var a=r.call(this)||this;return a._idSum=n,a._hashSum=i,a._count=o,a}t=e,e.empty=function(){return new t(vc.Buffer.allocUnsafe(0).fill(0),vc.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[_q]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i){this._idSum=Sp.xorBuffer(this._idSum,n),this._hashSum=Sp.xorBuffer(this._hashSum,i),this._count++},e.prototype.xorm=function(n){return new t(Sp.xorBuffer(this._idSum,n.idSum),Sp.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},e.prototype.isEmpty=function(){return this._idSum.equals(vc.Buffer.from(""))&&this._hashSum.equals(vc.Buffer.from(""))&&this._count===0},e.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Sp.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(vc.Buffer.from(n.first))};var t;return Uy([_c.Field(function(n){return n.toString()},vc.Buffer.from),My("design:type",Object)],e.prototype,"_idSum",void 0),Uy([_c.Field(function(n){return n.toString()},vc.Buffer.from),My("design:type",Object)],e.prototype,"_hashSum",void 0),Uy([_c.Field(),My("design:type",Number)],e.prototype,"_count",void 0),e=t=Uy([_c.AutoExportable("Cell",["_seed"]),s_(0,_c.Parameter("_idSum")),s_(1,_c.Parameter("_hashSum")),s_(2,_c.Parameter("_count")),My("design:paramtypes",[Object,Object,Number])],e),e}(vq.default);Si.default=xq});var L8=ce(Mn=>{"use strict";h();p();var Eq=Mn&&Mn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ky=Mn&&Mn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jy=Mn&&Mn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},F8=Mn&&Mn.__param||function(r,e){return function(t,n){e(t,n,r)}},R8=Mn&&Mn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},O8=Mn&&Mn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mn,"__esModule",{value:!0});var xc=dc(),Pq=O8(Bo()),$y=O8(a_()),dl=vi(),na=oo(),B8=Ty(),Sq=function(r){Eq(e,r);function e(n,i){i===void 0&&(i=3);var o=r.call(this)||this;if(xc.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(i<=0)throw new Error("The hashCount must be a non-zero, positive integer");return o._size=n,o._hashCount=i,o._elements=na.allocateArray(o._size,function(){return $y.default.empty()}),o}t=e,e.create=function(n,i){var o=B8.optimalFilterSize(n,i),a=B8.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce(function(n,i){return n+i.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=na.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=na.getDistinctIndices(i.string.first,this._size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]].add(n,xc.Buffer.from(i.string.first))},e.prototype.remove=function(n){for(var i=na.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=na.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]]=this._elements[o[a]].xorm(new $y.default(xc.Buffer.from(n),xc.Buffer.from(i.string.first),1));return!0},e.prototype.has=function(n){for(var i=na.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=na.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a){if(this._elements[o[a]].count===0)return!1;if(this._elements[o[a]].count===1)return!!this._elements[o[a]].idSum.equals(n)}return!0},e.prototype.listEntries=function(){var n=this,i=[];return function(){var o,a,c;return R8(this,function(f){switch(f.label){case 0:o=function(d){var m;return R8(this,function(w){switch(w.label){case 0:return m=n._elements[d],m.count>0&&i.findIndex(function(x){return x.equals(m.idSum)})===-1?n.has(m.idSum)?(i.push(m.idSum),[4,m.idSum]):[3,2]:[3,3];case 1:return w.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},a=0,f.label=1;case 1:return a<n._elements.length-1?[5,o(a)]:[3,4];case 2:if(c=f.sent(),typeof c=="object")return[2,c.value];f.label=3;case 3:return a++,[3,1];case 4:return[2,!0]}})}()},e.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var i=new t(n._size,n._hashCount);i.seed=this.seed;for(var o=0;o<this.size;++o)i._elements[o]=this._elements[o].xorm(n._elements[o]);return i},e.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var i=0;i<n._elements.length;++i)if(!n._elements[i].equals(this._elements[i]))return!1;return!0},e.prototype.decode=function(n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);for(var o=[],a=null,c=0;c<this._elements.length;++c)a=this._elements[c],a.isPure()&&o.push(c);for(;o.length!==0;){a=this._elements[o.pop()];var f=a.idSum,d=a.count;if(a.isPure()){if(d===1)n.push(f);else if(d===-1)i.push(f);else throw new Error("Please report, not possible");for(var m=na.allInOneHashTwice(JSON.stringify(f.toJSON()),this.seed),w=na.getDistinctIndices(m.string.first,this._size,this._hashCount,this.seed),c=0;c<w.length;++c)this._elements[w[c]]=this._elements[w[c]].xorm(new $y.default(f,xc.Buffer.from(m.string.first),d)),this._elements[w[c]].isPure()&&o.push(w[c])}}return this._elements.findIndex(function(x){return!x.isEmpty()})>-1?{success:!1,reason:{cell:a,iblt:this},additional:n,missing:i}:{success:!0,additional:n,missing:i}};var t;return Ky([dl.Field(),jy("design:type",Number)],e.prototype,"_size",void 0),Ky([dl.Field(),jy("design:type",Number)],e.prototype,"_hashCount",void 0),Ky([dl.Field(void 0,function(n){return n.map(function(i){var o=new $y.default(xc.Buffer.from(i._idSum),xc.Buffer.from(i._hashSum),i._count);return o.seed=i._seed,o})}),jy("design:type",Array)],e.prototype,"_elements",void 0),e=t=Ky([dl.AutoExportable("InvertibleBloomFilter",["_seed"]),F8(0,dl.Parameter("_size")),F8(1,dl.Parameter("_hashCount")),jy("design:paramtypes",[Number,Number])],e),e}(Pq.default);Mn.default=Sq});var N8=ce(Di=>{"use strict";h();p();Object.defineProperty(Di,"__esModule",{value:!0});var Dq=n8();Di.BloomFilter=Dq.default;var Aq=s8();Di.CountingBloomFilter=Aq.default;var Cq=a8();Di.PartitionedBloomFilter=Cq.default;var Iq=Qv();Di.CountMinSketch=Iq.default;var Tq=f8();Di.HyperLogLog=Tq.default;var kq=h8();Di.TopK=kq.default;var Fq=n_();Di.MinHash=Fq.MinHash;var Rq=g8();Di.MinHashFactory=Rq.default;var Bq=k8();Di.CuckooFilter=Bq.default;var Oq=L8();Di.InvertibleBloomFilter=Oq.default;var Lq=a_();Di.Cell=Lq.default});var CI=ce((Zle,og)=>{h();p();(function(r){"use strict";var e=function(b){var S,P=new Float64Array(16);if(b)for(S=0;S<b.length;S++)P[S]=b[S];return P},t=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=e(),a=e([1]),c=e([56129,1]),f=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(b,S,P,y){b[S]=P>>24&255,b[S+1]=P>>16&255,b[S+2]=P>>8&255,b[S+3]=P&255,b[S+4]=y>>24&255,b[S+5]=y>>16&255,b[S+6]=y>>8&255,b[S+7]=y&255}function F(b,S,P,y,I){var M,j=0;for(M=0;M<I;M++)j|=b[S+M]^P[y+M];return(1&j-1>>>8)-1}function N(b,S,P,y){return F(b,S,P,y,16)}function ue(b,S,P,y){return F(b,S,P,y,32)}function pe(b,S,P,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,j=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,oe=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,ye=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Ct=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Te=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,lt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,et=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,ft=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Fe=oe,Re=ye,Ee=Ke,q=Ae,W=Ct,le=Te,ne=rt,ie=ot,_=ct,k=lt,A=et,B=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Re^=v<<7|v>>>32-7,v=Re+Ie|0,le^=v<<9|v>>>32-9,v=le+Re|0,k^=v<<13|v>>>32-13,v=k+le|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,ne^=v<<7|v>>>32-7,v=ne+Ee|0,A^=v<<9|v>>>32-9,v=A+ne|0,ze^=v<<13|v>>>32-13,v=ze+A|0,Ee^=v<<18|v>>>32-18,v=ie+q|0,B^=v<<7|v>>>32-7,v=B+ie|0,xe^=v<<9|v>>>32-9,v=xe+B|0,q^=v<<13|v>>>32-13,v=q+xe|0,ie^=v<<18|v>>>32-18,v=O+_|0,Fe^=v<<7|v>>>32-7,v=Fe+O|0,W^=v<<9|v>>>32-9,v=W+Fe|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Fe|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Fe^=v<<13|v>>>32-13,v=Fe+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Re|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Re^=v<<13|v>>>32-13,v=Re+W|0,Ee^=v<<18|v>>>32-18,v=ie+ne|0,_^=v<<7|v>>>32-7,v=_+ie|0,le^=v<<9|v>>>32-9,v=le+_|0,ne^=v<<13|v>>>32-13,v=ne+le|0,ie^=v<<18|v>>>32-18,v=O+B|0,k^=v<<7|v>>>32-7,v=k+O|0,A^=v<<9|v>>>32-9,v=A+k|0,B^=v<<13|v>>>32-13,v=B+A|0,O^=v<<18|v>>>32-18;Ie=Ie+I|0,ze=ze+M|0,xe=xe+j|0,Fe=Fe+oe|0,Re=Re+ye|0,Ee=Ee+Ke|0,q=q+Ae|0,W=W+Ct|0,le=le+Te|0,ne=ne+rt|0,ie=ie+ot|0,_=_+ct|0,k=k+lt|0,A=A+et|0,B=B+ft|0,O=O+nt|0,b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=ze>>>0&255,b[5]=ze>>>8&255,b[6]=ze>>>16&255,b[7]=ze>>>24&255,b[8]=xe>>>0&255,b[9]=xe>>>8&255,b[10]=xe>>>16&255,b[11]=xe>>>24&255,b[12]=Fe>>>0&255,b[13]=Fe>>>8&255,b[14]=Fe>>>16&255,b[15]=Fe>>>24&255,b[16]=Re>>>0&255,b[17]=Re>>>8&255,b[18]=Re>>>16&255,b[19]=Re>>>24&255,b[20]=Ee>>>0&255,b[21]=Ee>>>8&255,b[22]=Ee>>>16&255,b[23]=Ee>>>24&255,b[24]=q>>>0&255,b[25]=q>>>8&255,b[26]=q>>>16&255,b[27]=q>>>24&255,b[28]=W>>>0&255,b[29]=W>>>8&255,b[30]=W>>>16&255,b[31]=W>>>24&255,b[32]=le>>>0&255,b[33]=le>>>8&255,b[34]=le>>>16&255,b[35]=le>>>24&255,b[36]=ne>>>0&255,b[37]=ne>>>8&255,b[38]=ne>>>16&255,b[39]=ne>>>24&255,b[40]=ie>>>0&255,b[41]=ie>>>8&255,b[42]=ie>>>16&255,b[43]=ie>>>24&255,b[44]=_>>>0&255,b[45]=_>>>8&255,b[46]=_>>>16&255,b[47]=_>>>24&255,b[48]=k>>>0&255,b[49]=k>>>8&255,b[50]=k>>>16&255,b[51]=k>>>24&255,b[52]=A>>>0&255,b[53]=A>>>8&255,b[54]=A>>>16&255,b[55]=A>>>24&255,b[56]=B>>>0&255,b[57]=B>>>8&255,b[58]=B>>>16&255,b[59]=B>>>24&255,b[60]=O>>>0&255,b[61]=O>>>8&255,b[62]=O>>>16&255,b[63]=O>>>24&255}function De(b,S,P,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,j=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,oe=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,ye=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Ct=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Te=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,lt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,et=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,ft=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Fe=oe,Re=ye,Ee=Ke,q=Ae,W=Ct,le=Te,ne=rt,ie=ot,_=ct,k=lt,A=et,B=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Re^=v<<7|v>>>32-7,v=Re+Ie|0,le^=v<<9|v>>>32-9,v=le+Re|0,k^=v<<13|v>>>32-13,v=k+le|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,ne^=v<<7|v>>>32-7,v=ne+Ee|0,A^=v<<9|v>>>32-9,v=A+ne|0,ze^=v<<13|v>>>32-13,v=ze+A|0,Ee^=v<<18|v>>>32-18,v=ie+q|0,B^=v<<7|v>>>32-7,v=B+ie|0,xe^=v<<9|v>>>32-9,v=xe+B|0,q^=v<<13|v>>>32-13,v=q+xe|0,ie^=v<<18|v>>>32-18,v=O+_|0,Fe^=v<<7|v>>>32-7,v=Fe+O|0,W^=v<<9|v>>>32-9,v=W+Fe|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Fe|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Fe^=v<<13|v>>>32-13,v=Fe+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Re|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Re^=v<<13|v>>>32-13,v=Re+W|0,Ee^=v<<18|v>>>32-18,v=ie+ne|0,_^=v<<7|v>>>32-7,v=_+ie|0,le^=v<<9|v>>>32-9,v=le+_|0,ne^=v<<13|v>>>32-13,v=ne+le|0,ie^=v<<18|v>>>32-18,v=O+B|0,k^=v<<7|v>>>32-7,v=k+O|0,A^=v<<9|v>>>32-9,v=A+k|0,B^=v<<13|v>>>32-13,v=B+A|0,O^=v<<18|v>>>32-18;b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=Ee>>>0&255,b[5]=Ee>>>8&255,b[6]=Ee>>>16&255,b[7]=Ee>>>24&255,b[8]=ie>>>0&255,b[9]=ie>>>8&255,b[10]=ie>>>16&255,b[11]=ie>>>24&255,b[12]=O>>>0&255,b[13]=O>>>8&255,b[14]=O>>>16&255,b[15]=O>>>24&255,b[16]=q>>>0&255,b[17]=q>>>8&255,b[18]=q>>>16&255,b[19]=q>>>24&255,b[20]=W>>>0&255,b[21]=W>>>8&255,b[22]=W>>>16&255,b[23]=W>>>24&255,b[24]=le>>>0&255,b[25]=le>>>8&255,b[26]=le>>>16&255,b[27]=le>>>24&255,b[28]=ne>>>0&255,b[29]=ne>>>8&255,b[30]=ne>>>16&255,b[31]=ne>>>24&255}function re(b,S,P,y){pe(b,S,P,y)}function be(b,S,P,y){De(b,S,P,y)}var Pe=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Y(b,S,P,y,I,M,j){var oe=new Uint8Array(16),ye=new Uint8Array(64),Ke,Ae;for(Ae=0;Ae<16;Ae++)oe[Ae]=0;for(Ae=0;Ae<8;Ae++)oe[Ae]=M[Ae];for(;I>=64;){for(re(ye,oe,j,Pe),Ae=0;Ae<64;Ae++)b[S+Ae]=P[y+Ae]^ye[Ae];for(Ke=1,Ae=8;Ae<16;Ae++)Ke=Ke+(oe[Ae]&255)|0,oe[Ae]=Ke&255,Ke>>>=8;I-=64,S+=64,y+=64}if(I>0)for(re(ye,oe,j,Pe),Ae=0;Ae<I;Ae++)b[S+Ae]=P[y+Ae]^ye[Ae];return 0}function ge(b,S,P,y,I){var M=new Uint8Array(16),j=new Uint8Array(64),oe,ye;for(ye=0;ye<16;ye++)M[ye]=0;for(ye=0;ye<8;ye++)M[ye]=y[ye];for(;P>=64;){for(re(j,M,I,Pe),ye=0;ye<64;ye++)b[S+ye]=j[ye];for(oe=1,ye=8;ye<16;ye++)oe=oe+(M[ye]&255)|0,M[ye]=oe&255,oe>>>=8;P-=64,S+=64}if(P>0)for(re(j,M,I,Pe),ye=0;ye<P;ye++)b[S+ye]=j[ye];return 0}function _e(b,S,P,y,I){var M=new Uint8Array(32);be(M,y,I,Pe);for(var j=new Uint8Array(8),oe=0;oe<8;oe++)j[oe]=y[oe+16];return ge(b,S,P,j,M)}function Me(b,S,P,y,I,M,j){var oe=new Uint8Array(32);be(oe,M,j,Pe);for(var ye=new Uint8Array(8),Ke=0;Ke<8;Ke++)ye[Ke]=M[Ke+16];return Y(b,S,P,y,I,ye,oe)}var vt=function(b){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var S,P,y,I,M,j,oe,ye;S=b[0]&255|(b[1]&255)<<8,this.r[0]=S&8191,P=b[2]&255|(b[3]&255)<<8,this.r[1]=(S>>>13|P<<3)&8191,y=b[4]&255|(b[5]&255)<<8,this.r[2]=(P>>>10|y<<6)&7939,I=b[6]&255|(b[7]&255)<<8,this.r[3]=(y>>>7|I<<9)&8191,M=b[8]&255|(b[9]&255)<<8,this.r[4]=(I>>>4|M<<12)&255,this.r[5]=M>>>1&8190,j=b[10]&255|(b[11]&255)<<8,this.r[6]=(M>>>14|j<<2)&8191,oe=b[12]&255|(b[13]&255)<<8,this.r[7]=(j>>>11|oe<<5)&8065,ye=b[14]&255|(b[15]&255)<<8,this.r[8]=(oe>>>8|ye<<8)&8191,this.r[9]=ye>>>5&127,this.pad[0]=b[16]&255|(b[17]&255)<<8,this.pad[1]=b[18]&255|(b[19]&255)<<8,this.pad[2]=b[20]&255|(b[21]&255)<<8,this.pad[3]=b[22]&255|(b[23]&255)<<8,this.pad[4]=b[24]&255|(b[25]&255)<<8,this.pad[5]=b[26]&255|(b[27]&255)<<8,this.pad[6]=b[28]&255|(b[29]&255)<<8,this.pad[7]=b[30]&255|(b[31]&255)<<8};vt.prototype.blocks=function(b,S,P){for(var y=this.fin?0:2048,I,M,j,oe,ye,Ke,Ae,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Fe=this.h[0],Re=this.h[1],Ee=this.h[2],q=this.h[3],W=this.h[4],le=this.h[5],ne=this.h[6],ie=this.h[7],_=this.h[8],k=this.h[9],A=this.r[0],B=this.r[1],O=this.r[2],v=this.r[3],z=this.r[4],H=this.r[5],X=this.r[6],G=this.r[7],te=this.r[8],me=this.r[9];P>=16;)I=b[S+0]&255|(b[S+1]&255)<<8,Fe+=I&8191,M=b[S+2]&255|(b[S+3]&255)<<8,Re+=(I>>>13|M<<3)&8191,j=b[S+4]&255|(b[S+5]&255)<<8,Ee+=(M>>>10|j<<6)&8191,oe=b[S+6]&255|(b[S+7]&255)<<8,q+=(j>>>7|oe<<9)&8191,ye=b[S+8]&255|(b[S+9]&255)<<8,W+=(oe>>>4|ye<<12)&8191,le+=ye>>>1&8191,Ke=b[S+10]&255|(b[S+11]&255)<<8,ne+=(ye>>>14|Ke<<2)&8191,Ae=b[S+12]&255|(b[S+13]&255)<<8,ie+=(Ke>>>11|Ae<<5)&8191,Ct=b[S+14]&255|(b[S+15]&255)<<8,_+=(Ae>>>8|Ct<<8)&8191,k+=Ct>>>5|y,Te=0,rt=Te,rt+=Fe*A,rt+=Re*(5*me),rt+=Ee*(5*te),rt+=q*(5*G),rt+=W*(5*X),Te=rt>>>13,rt&=8191,rt+=le*(5*H),rt+=ne*(5*z),rt+=ie*(5*v),rt+=_*(5*O),rt+=k*(5*B),Te+=rt>>>13,rt&=8191,ot=Te,ot+=Fe*B,ot+=Re*A,ot+=Ee*(5*me),ot+=q*(5*te),ot+=W*(5*G),Te=ot>>>13,ot&=8191,ot+=le*(5*X),ot+=ne*(5*H),ot+=ie*(5*z),ot+=_*(5*v),ot+=k*(5*O),Te+=ot>>>13,ot&=8191,ct=Te,ct+=Fe*O,ct+=Re*B,ct+=Ee*A,ct+=q*(5*me),ct+=W*(5*te),Te=ct>>>13,ct&=8191,ct+=le*(5*G),ct+=ne*(5*X),ct+=ie*(5*H),ct+=_*(5*z),ct+=k*(5*v),Te+=ct>>>13,ct&=8191,lt=Te,lt+=Fe*v,lt+=Re*O,lt+=Ee*B,lt+=q*A,lt+=W*(5*me),Te=lt>>>13,lt&=8191,lt+=le*(5*te),lt+=ne*(5*G),lt+=ie*(5*X),lt+=_*(5*H),lt+=k*(5*z),Te+=lt>>>13,lt&=8191,et=Te,et+=Fe*z,et+=Re*v,et+=Ee*O,et+=q*B,et+=W*A,Te=et>>>13,et&=8191,et+=le*(5*me),et+=ne*(5*te),et+=ie*(5*G),et+=_*(5*X),et+=k*(5*H),Te+=et>>>13,et&=8191,ft=Te,ft+=Fe*H,ft+=Re*z,ft+=Ee*v,ft+=q*O,ft+=W*B,Te=ft>>>13,ft&=8191,ft+=le*A,ft+=ne*(5*me),ft+=ie*(5*te),ft+=_*(5*G),ft+=k*(5*X),Te+=ft>>>13,ft&=8191,nt=Te,nt+=Fe*X,nt+=Re*H,nt+=Ee*z,nt+=q*v,nt+=W*O,Te=nt>>>13,nt&=8191,nt+=le*B,nt+=ne*A,nt+=ie*(5*me),nt+=_*(5*te),nt+=k*(5*G),Te+=nt>>>13,nt&=8191,Ie=Te,Ie+=Fe*G,Ie+=Re*X,Ie+=Ee*H,Ie+=q*z,Ie+=W*v,Te=Ie>>>13,Ie&=8191,Ie+=le*O,Ie+=ne*B,Ie+=ie*A,Ie+=_*(5*me),Ie+=k*(5*te),Te+=Ie>>>13,Ie&=8191,ze=Te,ze+=Fe*te,ze+=Re*G,ze+=Ee*X,ze+=q*H,ze+=W*z,Te=ze>>>13,ze&=8191,ze+=le*v,ze+=ne*O,ze+=ie*B,ze+=_*A,ze+=k*(5*me),Te+=ze>>>13,ze&=8191,xe=Te,xe+=Fe*me,xe+=Re*te,xe+=Ee*G,xe+=q*X,xe+=W*H,Te=xe>>>13,xe&=8191,xe+=le*z,xe+=ne*v,xe+=ie*O,xe+=_*B,xe+=k*A,Te+=xe>>>13,xe&=8191,Te=(Te<<2)+Te|0,Te=Te+rt|0,rt=Te&8191,Te=Te>>>13,ot+=Te,Fe=rt,Re=ot,Ee=ct,q=lt,W=et,le=ft,ne=nt,ie=Ie,_=ze,k=xe,S+=16,P-=16;this.h[0]=Fe,this.h[1]=Re,this.h[2]=Ee,this.h[3]=q,this.h[4]=W,this.h[5]=le,this.h[6]=ne,this.h[7]=ie,this.h[8]=_,this.h[9]=k},vt.prototype.finish=function(b,S){var P=new Uint16Array(10),y,I,M,j;if(this.leftover){for(j=this.leftover,this.buffer[j++]=1;j<16;j++)this.buffer[j]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(y=this.h[1]>>>13,this.h[1]&=8191,j=2;j<10;j++)this.h[j]+=y,y=this.h[j]>>>13,this.h[j]&=8191;for(this.h[0]+=y*5,y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=y,y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=y,P[0]=this.h[0]+5,y=P[0]>>>13,P[0]&=8191,j=1;j<10;j++)P[j]=this.h[j]+y,y=P[j]>>>13,P[j]&=8191;for(P[9]-=1<<13,I=(y^1)-1,j=0;j<10;j++)P[j]&=I;for(I=~I,j=0;j<10;j++)this.h[j]=this.h[j]&I|P[j];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,M=this.h[0]+this.pad[0],this.h[0]=M&65535,j=1;j<8;j++)M=(this.h[j]+this.pad[j]|0)+(M>>>16)|0,this.h[j]=M&65535;b[S+0]=this.h[0]>>>0&255,b[S+1]=this.h[0]>>>8&255,b[S+2]=this.h[1]>>>0&255,b[S+3]=this.h[1]>>>8&255,b[S+4]=this.h[2]>>>0&255,b[S+5]=this.h[2]>>>8&255,b[S+6]=this.h[3]>>>0&255,b[S+7]=this.h[3]>>>8&255,b[S+8]=this.h[4]>>>0&255,b[S+9]=this.h[4]>>>8&255,b[S+10]=this.h[5]>>>0&255,b[S+11]=this.h[5]>>>8&255,b[S+12]=this.h[6]>>>0&255,b[S+13]=this.h[6]>>>8&255,b[S+14]=this.h[7]>>>0&255,b[S+15]=this.h[7]>>>8&255},vt.prototype.update=function(b,S,P){var y,I;if(this.leftover){for(I=16-this.leftover,I>P&&(I=P),y=0;y<I;y++)this.buffer[this.leftover+y]=b[S+y];if(P-=I,S+=I,this.leftover+=I,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(P>=16&&(I=P-P%16,this.blocks(b,S,I),S+=I,P-=I),P){for(y=0;y<P;y++)this.buffer[this.leftover+y]=b[S+y];this.leftover+=P}};function Nt(b,S,P,y,I,M){var j=new vt(M);return j.update(P,y,I),j.finish(b,S),0}function Bt(b,S,P,y,I,M){var j=new Uint8Array(16);return Nt(j,0,P,y,I,M),N(b,S,j,0)}function qt(b,S,P,y,I){var M;if(P<32)return-1;for(Me(b,0,S,0,P,y,I),Nt(b,16,b,32,P-32,b),M=0;M<16;M++)b[M]=0;return 0}function hr(b,S,P,y,I){var M,j=new Uint8Array(32);if(P<32||(_e(j,0,32,y,I),Bt(S,16,S,32,P-32,j)!==0))return-1;for(Me(b,0,S,0,P,y,I),M=0;M<32;M++)b[M]=0;return 0}function Mt(b,S){var P;for(P=0;P<16;P++)b[P]=S[P]|0}function jr(b){var S,P,y=1;for(S=0;S<16;S++)P=b[S]+y+65535,y=Math.floor(P/65536),b[S]=P-y*65536;b[0]+=y-1+37*(y-1)}function Cn(b,S,P){for(var y,I=~(P-1),M=0;M<16;M++)y=I&(b[M]^S[M]),b[M]^=y,S[M]^=y}function Rr(b,S){var P,y,I,M=e(),j=e();for(P=0;P<16;P++)j[P]=S[P];for(jr(j),jr(j),jr(j),y=0;y<2;y++){for(M[0]=j[0]-65517,P=1;P<15;P++)M[P]=j[P]-65535-(M[P-1]>>16&1),M[P-1]&=65535;M[15]=j[15]-32767-(M[14]>>16&1),I=M[15]>>16&1,M[14]&=65535,Cn(j,M,1-I)}for(P=0;P<16;P++)b[2*P]=j[P]&255,b[2*P+1]=j[P]>>8}function Wr(b,S){var P=new Uint8Array(32),y=new Uint8Array(32);return Rr(P,b),Rr(y,S),ue(P,0,y,0)}function ks(b){var S=new Uint8Array(32);return Rr(S,b),S[0]&1}function nr(b,S){var P;for(P=0;P<16;P++)b[P]=S[2*P]+(S[2*P+1]<<8);b[15]&=32767}function Wt(b,S,P){for(var y=0;y<16;y++)b[y]=S[y]+P[y]}function wr(b,S,P){for(var y=0;y<16;y++)b[y]=S[y]-P[y]}function Ve(b,S,P){var y,I,M=0,j=0,oe=0,ye=0,Ke=0,Ae=0,Ct=0,Te=0,rt=0,ot=0,ct=0,lt=0,et=0,ft=0,nt=0,Ie=0,ze=0,xe=0,Fe=0,Re=0,Ee=0,q=0,W=0,le=0,ne=0,ie=0,_=0,k=0,A=0,B=0,O=0,v=P[0],z=P[1],H=P[2],X=P[3],G=P[4],te=P[5],me=P[6],$e=P[7],Le=P[8],Qe=P[9],dt=P[10],mt=P[11],Ot=P[12],cr=P[13],br=P[14],Or=P[15];y=S[0],M+=y*v,j+=y*z,oe+=y*H,ye+=y*X,Ke+=y*G,Ae+=y*te,Ct+=y*me,Te+=y*$e,rt+=y*Le,ot+=y*Qe,ct+=y*dt,lt+=y*mt,et+=y*Ot,ft+=y*cr,nt+=y*br,Ie+=y*Or,y=S[1],j+=y*v,oe+=y*z,ye+=y*H,Ke+=y*X,Ae+=y*G,Ct+=y*te,Te+=y*me,rt+=y*$e,ot+=y*Le,ct+=y*Qe,lt+=y*dt,et+=y*mt,ft+=y*Ot,nt+=y*cr,Ie+=y*br,ze+=y*Or,y=S[2],oe+=y*v,ye+=y*z,Ke+=y*H,Ae+=y*X,Ct+=y*G,Te+=y*te,rt+=y*me,ot+=y*$e,ct+=y*Le,lt+=y*Qe,et+=y*dt,ft+=y*mt,nt+=y*Ot,Ie+=y*cr,ze+=y*br,xe+=y*Or,y=S[3],ye+=y*v,Ke+=y*z,Ae+=y*H,Ct+=y*X,Te+=y*G,rt+=y*te,ot+=y*me,ct+=y*$e,lt+=y*Le,et+=y*Qe,ft+=y*dt,nt+=y*mt,Ie+=y*Ot,ze+=y*cr,xe+=y*br,Fe+=y*Or,y=S[4],Ke+=y*v,Ae+=y*z,Ct+=y*H,Te+=y*X,rt+=y*G,ot+=y*te,ct+=y*me,lt+=y*$e,et+=y*Le,ft+=y*Qe,nt+=y*dt,Ie+=y*mt,ze+=y*Ot,xe+=y*cr,Fe+=y*br,Re+=y*Or,y=S[5],Ae+=y*v,Ct+=y*z,Te+=y*H,rt+=y*X,ot+=y*G,ct+=y*te,lt+=y*me,et+=y*$e,ft+=y*Le,nt+=y*Qe,Ie+=y*dt,ze+=y*mt,xe+=y*Ot,Fe+=y*cr,Re+=y*br,Ee+=y*Or,y=S[6],Ct+=y*v,Te+=y*z,rt+=y*H,ot+=y*X,ct+=y*G,lt+=y*te,et+=y*me,ft+=y*$e,nt+=y*Le,Ie+=y*Qe,ze+=y*dt,xe+=y*mt,Fe+=y*Ot,Re+=y*cr,Ee+=y*br,q+=y*Or,y=S[7],Te+=y*v,rt+=y*z,ot+=y*H,ct+=y*X,lt+=y*G,et+=y*te,ft+=y*me,nt+=y*$e,Ie+=y*Le,ze+=y*Qe,xe+=y*dt,Fe+=y*mt,Re+=y*Ot,Ee+=y*cr,q+=y*br,W+=y*Or,y=S[8],rt+=y*v,ot+=y*z,ct+=y*H,lt+=y*X,et+=y*G,ft+=y*te,nt+=y*me,Ie+=y*$e,ze+=y*Le,xe+=y*Qe,Fe+=y*dt,Re+=y*mt,Ee+=y*Ot,q+=y*cr,W+=y*br,le+=y*Or,y=S[9],ot+=y*v,ct+=y*z,lt+=y*H,et+=y*X,ft+=y*G,nt+=y*te,Ie+=y*me,ze+=y*$e,xe+=y*Le,Fe+=y*Qe,Re+=y*dt,Ee+=y*mt,q+=y*Ot,W+=y*cr,le+=y*br,ne+=y*Or,y=S[10],ct+=y*v,lt+=y*z,et+=y*H,ft+=y*X,nt+=y*G,Ie+=y*te,ze+=y*me,xe+=y*$e,Fe+=y*Le,Re+=y*Qe,Ee+=y*dt,q+=y*mt,W+=y*Ot,le+=y*cr,ne+=y*br,ie+=y*Or,y=S[11],lt+=y*v,et+=y*z,ft+=y*H,nt+=y*X,Ie+=y*G,ze+=y*te,xe+=y*me,Fe+=y*$e,Re+=y*Le,Ee+=y*Qe,q+=y*dt,W+=y*mt,le+=y*Ot,ne+=y*cr,ie+=y*br,_+=y*Or,y=S[12],et+=y*v,ft+=y*z,nt+=y*H,Ie+=y*X,ze+=y*G,xe+=y*te,Fe+=y*me,Re+=y*$e,Ee+=y*Le,q+=y*Qe,W+=y*dt,le+=y*mt,ne+=y*Ot,ie+=y*cr,_+=y*br,k+=y*Or,y=S[13],ft+=y*v,nt+=y*z,Ie+=y*H,ze+=y*X,xe+=y*G,Fe+=y*te,Re+=y*me,Ee+=y*$e,q+=y*Le,W+=y*Qe,le+=y*dt,ne+=y*mt,ie+=y*Ot,_+=y*cr,k+=y*br,A+=y*Or,y=S[14],nt+=y*v,Ie+=y*z,ze+=y*H,xe+=y*X,Fe+=y*G,Re+=y*te,Ee+=y*me,q+=y*$e,W+=y*Le,le+=y*Qe,ne+=y*dt,ie+=y*mt,_+=y*Ot,k+=y*cr,A+=y*br,B+=y*Or,y=S[15],Ie+=y*v,ze+=y*z,xe+=y*H,Fe+=y*X,Re+=y*G,Ee+=y*te,q+=y*me,W+=y*$e,le+=y*Le,ne+=y*Qe,ie+=y*dt,_+=y*mt,k+=y*Ot,A+=y*cr,B+=y*br,O+=y*Or,M+=38*ze,j+=38*xe,oe+=38*Fe,ye+=38*Re,Ke+=38*Ee,Ae+=38*q,Ct+=38*W,Te+=38*le,rt+=38*ne,ot+=38*ie,ct+=38*_,lt+=38*k,et+=38*A,ft+=38*B,nt+=38*O,I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=Ae+I+65535,I=Math.floor(y/65536),Ae=y-I*65536,y=Ct+I+65535,I=Math.floor(y/65536),Ct=y-I*65536,y=Te+I+65535,I=Math.floor(y/65536),Te=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=Ae+I+65535,I=Math.floor(y/65536),Ae=y-I*65536,y=Ct+I+65535,I=Math.floor(y/65536),Ct=y-I*65536,y=Te+I+65535,I=Math.floor(y/65536),Te=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),b[0]=M,b[1]=j,b[2]=oe,b[3]=ye,b[4]=Ke,b[5]=Ae,b[6]=Ct,b[7]=Te,b[8]=rt,b[9]=ot,b[10]=ct,b[11]=lt,b[12]=et,b[13]=ft,b[14]=nt,b[15]=Ie}function Xr(b,S){Ve(b,S,S)}function Ui(b,S){var P=e(),y;for(y=0;y<16;y++)P[y]=S[y];for(y=253;y>=0;y--)Xr(P,P),y!==2&&y!==4&&Ve(P,P,S);for(y=0;y<16;y++)b[y]=P[y]}function Mi(b,S){var P=e(),y;for(y=0;y<16;y++)P[y]=S[y];for(y=250;y>=0;y--)Xr(P,P),y!==1&&Ve(P,P,S);for(y=0;y<16;y++)b[y]=P[y]}function rs(b,S,P){var y=new Uint8Array(32),I=new Float64Array(80),M,j,oe=e(),ye=e(),Ke=e(),Ae=e(),Ct=e(),Te=e();for(j=0;j<31;j++)y[j]=S[j];for(y[31]=S[31]&127|64,y[0]&=248,nr(I,P),j=0;j<16;j++)ye[j]=I[j],Ae[j]=oe[j]=Ke[j]=0;for(oe[0]=Ae[0]=1,j=254;j>=0;--j)M=y[j>>>3]>>>(j&7)&1,Cn(oe,ye,M),Cn(Ke,Ae,M),Wt(Ct,oe,Ke),wr(oe,oe,Ke),Wt(Ke,ye,Ae),wr(ye,ye,Ae),Xr(Ae,Ct),Xr(Te,oe),Ve(oe,Ke,oe),Ve(Ke,ye,Ct),Wt(Ct,oe,Ke),wr(oe,oe,Ke),Xr(ye,oe),wr(Ke,Ae,Te),Ve(oe,Ke,c),Wt(oe,oe,Ae),Ve(Ke,Ke,oe),Ve(oe,Ae,Te),Ve(Ae,ye,I),Xr(ye,Ct),Cn(oe,ye,M),Cn(Ke,Ae,M);for(j=0;j<16;j++)I[j+16]=oe[j],I[j+32]=Ke[j],I[j+48]=ye[j],I[j+64]=Ae[j];var rt=I.subarray(32),ot=I.subarray(16);return Ui(rt,rt),Ve(ot,ot,rt),Rr(b,ot),0}function Br(b,S){return rs(b,S,i)}function Ki(b,S){return t(S,32),Br(b,S)}function bn(b,S,P){var y=new Uint8Array(32);return rs(y,P,S),be(b,n,y,Pe)}var Vr=qt,go=hr;function Pa(b,S,P,y,I,M){var j=new Uint8Array(32);return bn(j,I,M),Vr(b,S,P,y,j)}function In(b,S,P,y,I,M){var j=new Uint8Array(32);return bn(j,I,M),go(b,S,P,y,j)}var vn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Sa(b,S,P,y){for(var I=new Int32Array(16),M=new Int32Array(16),j,oe,ye,Ke,Ae,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Fe,Re,Ee,q,W,le,ne,ie,_,k=b[0],A=b[1],B=b[2],O=b[3],v=b[4],z=b[5],H=b[6],X=b[7],G=S[0],te=S[1],me=S[2],$e=S[3],Le=S[4],Qe=S[5],dt=S[6],mt=S[7],Ot=0;y>=128;){for(Re=0;Re<16;Re++)Ee=8*Re+Ot,I[Re]=P[Ee+0]<<24|P[Ee+1]<<16|P[Ee+2]<<8|P[Ee+3],M[Re]=P[Ee+4]<<24|P[Ee+5]<<16|P[Ee+6]<<8|P[Ee+7];for(Re=0;Re<80;Re++)if(j=k,oe=A,ye=B,Ke=O,Ae=v,Ct=z,Te=H,rt=X,ot=G,ct=te,lt=me,et=$e,ft=Le,nt=Qe,Ie=dt,ze=mt,q=X,W=mt,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=(v>>>14|Le<<32-14)^(v>>>18|Le<<32-18)^(Le>>>41-32|v<<32-(41-32)),W=(Le>>>14|v<<32-14)^(Le>>>18|v<<32-18)^(v>>>41-32|Le<<32-(41-32)),le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=v&z^~v&H,W=Le&Qe^~Le&dt,le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=vn[Re*2],W=vn[Re*2+1],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=I[Re%16],W=M[Re%16],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,xe=ie&65535|_<<16,Fe=le&65535|ne<<16,q=xe,W=Fe,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=(k>>>28|G<<32-28)^(G>>>34-32|k<<32-(34-32))^(G>>>39-32|k<<32-(39-32)),W=(G>>>28|k<<32-28)^(k>>>34-32|G<<32-(34-32))^(k>>>39-32|G<<32-(39-32)),le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=k&A^k&B^A&B,W=G&te^G&me^te&me,le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,rt=ie&65535|_<<16,ze=le&65535|ne<<16,q=Ke,W=et,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=xe,W=Fe,le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,Ke=ie&65535|_<<16,et=le&65535|ne<<16,A=j,B=oe,O=ye,v=Ke,z=Ae,H=Ct,X=Te,k=rt,te=ot,me=ct,$e=lt,Le=et,Qe=ft,dt=nt,mt=Ie,G=ze,Re%16===15)for(Ee=0;Ee<16;Ee++)q=I[Ee],W=M[Ee],le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=I[(Ee+9)%16],W=M[(Ee+9)%16],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,xe=I[(Ee+1)%16],Fe=M[(Ee+1)%16],q=(xe>>>1|Fe<<32-1)^(xe>>>8|Fe<<32-8)^xe>>>7,W=(Fe>>>1|xe<<32-1)^(Fe>>>8|xe<<32-8)^(Fe>>>7|xe<<32-7),le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,xe=I[(Ee+14)%16],Fe=M[(Ee+14)%16],q=(xe>>>19|Fe<<32-19)^(Fe>>>61-32|xe<<32-(61-32))^xe>>>6,W=(Fe>>>19|xe<<32-19)^(xe>>>61-32|Fe<<32-(61-32))^(Fe>>>6|xe<<32-6),le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,I[Ee]=ie&65535|_<<16,M[Ee]=le&65535|ne<<16;q=k,W=G,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[0],W=S[0],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[0]=k=ie&65535|_<<16,S[0]=G=le&65535|ne<<16,q=A,W=te,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[1],W=S[1],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[1]=A=ie&65535|_<<16,S[1]=te=le&65535|ne<<16,q=B,W=me,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[2],W=S[2],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[2]=B=ie&65535|_<<16,S[2]=me=le&65535|ne<<16,q=O,W=$e,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[3],W=S[3],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[3]=O=ie&65535|_<<16,S[3]=$e=le&65535|ne<<16,q=v,W=Le,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[4],W=S[4],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[4]=v=ie&65535|_<<16,S[4]=Le=le&65535|ne<<16,q=z,W=Qe,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[5],W=S[5],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[5]=z=ie&65535|_<<16,S[5]=Qe=le&65535|ne<<16,q=H,W=dt,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[6],W=S[6],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[6]=H=ie&65535|_<<16,S[6]=dt=le&65535|ne<<16,q=X,W=mt,le=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[7],W=S[7],le+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=le>>>16,ie+=ne>>>16,_+=ie>>>16,b[7]=X=ie&65535|_<<16,S[7]=mt=le&65535|ne<<16,Ot+=128,y-=128}return y}function Qr(b,S,P){var y=new Int32Array(8),I=new Int32Array(8),M=new Uint8Array(256),j,oe=P;for(y[0]=1779033703,y[1]=3144134277,y[2]=1013904242,y[3]=2773480762,y[4]=1359893119,y[5]=2600822924,y[6]=528734635,y[7]=1541459225,I[0]=4089235720,I[1]=2227873595,I[2]=4271175723,I[3]=1595750129,I[4]=2917565137,I[5]=725511199,I[6]=4215389547,I[7]=327033209,Sa(y,I,S,P),P%=128,j=0;j<P;j++)M[j]=S[oe-P+j];for(M[P]=128,P=256-128*(P<112?1:0),M[P-9]=0,T(M,P-8,oe/536870912|0,oe<<3),Sa(y,I,M,P),j=0;j<8;j++)T(b,8*j,y[j],I[j]);return 0}function ur(b,S){var P=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e(),Ke=e(),Ae=e();wr(P,b[1],b[0]),wr(Ae,S[1],S[0]),Ve(P,P,Ae),Wt(y,b[0],b[1]),Wt(Ae,S[0],S[1]),Ve(y,y,Ae),Ve(I,b[3],S[3]),Ve(I,I,d),Ve(M,b[2],S[2]),Wt(M,M,M),wr(j,y,P),wr(oe,M,I),Wt(ye,M,I),Wt(Ke,y,P),Ve(b[0],j,oe),Ve(b[1],Ke,ye),Ve(b[2],ye,oe),Ve(b[3],j,Ke)}function zn(b,S,P){var y;for(y=0;y<4;y++)Cn(b[y],S[y],P)}function qn(b,S){var P=e(),y=e(),I=e();Ui(I,S[2]),Ve(P,S[0],I),Ve(y,S[1],I),Rr(b,y),b[31]^=ks(P)<<7}function wo(b,S,P){var y,I;for(Mt(b[0],o),Mt(b[1],a),Mt(b[2],a),Mt(b[3],o),I=255;I>=0;--I)y=P[I/8|0]>>(I&7)&1,zn(b,S,y),ur(S,b),ur(b,b),zn(b,S,y)}function cn(b,S){var P=[e(),e(),e(),e()];Mt(P[0],m),Mt(P[1],w),Mt(P[2],a),Ve(P[3],m,w),wo(b,P,S)}function $(b,S,P){var y=new Uint8Array(64),I=[e(),e(),e(),e()],M;for(P||t(S,32),Qr(y,S,32),y[0]&=248,y[31]&=127,y[31]|=64,cn(I,y),qn(b,I),M=0;M<32;M++)S[M+32]=b[M];return 0}var J=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function he(b,S){var P,y,I,M;for(y=63;y>=32;--y){for(P=0,I=y-32,M=y-12;I<M;++I)S[I]+=P-16*S[y]*J[I-(y-32)],P=Math.floor((S[I]+128)/256),S[I]-=P*256;S[I]+=P,S[y]=0}for(P=0,I=0;I<32;I++)S[I]+=P-(S[31]>>4)*J[I],P=S[I]>>8,S[I]&=255;for(I=0;I<32;I++)S[I]-=P*J[I];for(y=0;y<32;y++)S[y+1]+=S[y]>>8,b[y]=S[y]&255}function ve(b){var S=new Float64Array(64),P;for(P=0;P<64;P++)S[P]=b[P];for(P=0;P<64;P++)b[P]=0;he(b,S)}function je(b,S,P,y){var I=new Uint8Array(64),M=new Uint8Array(64),j=new Uint8Array(64),oe,ye,Ke=new Float64Array(64),Ae=[e(),e(),e(),e()];Qr(I,y,32),I[0]&=248,I[31]&=127,I[31]|=64;var Ct=P+64;for(oe=0;oe<P;oe++)b[64+oe]=S[oe];for(oe=0;oe<32;oe++)b[32+oe]=I[32+oe];for(Qr(j,b.subarray(32),P+32),ve(j),cn(Ae,j),qn(b,Ae),oe=32;oe<64;oe++)b[oe]=y[oe];for(Qr(M,b,P+64),ve(M),oe=0;oe<64;oe++)Ke[oe]=0;for(oe=0;oe<32;oe++)Ke[oe]=j[oe];for(oe=0;oe<32;oe++)for(ye=0;ye<32;ye++)Ke[oe+ye]+=M[oe]*I[ye];return he(b.subarray(32),Ke),Ct}function or(b,S){var P=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e();return Mt(b[2],a),nr(b[1],S),Xr(I,b[1]),Ve(M,I,f),wr(I,I,b[2]),Wt(M,b[2],M),Xr(j,M),Xr(oe,j),Ve(ye,oe,j),Ve(P,ye,I),Ve(P,P,M),Mi(P,P),Ve(P,P,I),Ve(P,P,M),Ve(P,P,M),Ve(b[0],P,M),Xr(y,b[0]),Ve(y,y,M),Wr(y,I)&&Ve(b[0],b[0],x),Xr(y,b[0]),Ve(y,y,M),Wr(y,I)?-1:(ks(b[0])===S[31]>>7&&wr(b[0],o,b[0]),Ve(b[3],b[0],b[1]),0)}function tt(b,S,P,y){var I,M=new Uint8Array(32),j=new Uint8Array(64),oe=[e(),e(),e(),e()],ye=[e(),e(),e(),e()];if(P<64||or(ye,y))return-1;for(I=0;I<P;I++)b[I]=S[I];for(I=0;I<32;I++)b[I+32]=y[I];if(Qr(j,b,P),ve(j),wo(oe,ye,j),cn(ye,S.subarray(32)),ur(oe,ye),qn(M,oe),P-=64,ue(S,0,M,0)){for(I=0;I<P;I++)b[I]=0;return-1}for(I=0;I<P;I++)b[I]=S[I+64];return P}var ut=32,qe=24,yt=32,pt=16,Pr=32,bo=32,Fs=32,vo=32,Rs=32,Ru=qe,ji=yt,yh=pt,si=64,$i=32,_o=64,Bu=32,Ou=64;r.lowlevel={crypto_core_hsalsa20:be,crypto_stream_xor:Me,crypto_stream:_e,crypto_stream_salsa20_xor:Y,crypto_stream_salsa20:ge,crypto_onetimeauth:Nt,crypto_onetimeauth_verify:Bt,crypto_verify_16:N,crypto_verify_32:ue,crypto_secretbox:qt,crypto_secretbox_open:hr,crypto_scalarmult:rs,crypto_scalarmult_base:Br,crypto_box_beforenm:bn,crypto_box_afternm:Vr,crypto_box:Pa,crypto_box_open:In,crypto_box_keypair:Ki,crypto_hash:Qr,crypto_sign:je,crypto_sign_keypair:$,crypto_sign_open:tt,crypto_secretbox_KEYBYTES:ut,crypto_secretbox_NONCEBYTES:qe,crypto_secretbox_ZEROBYTES:yt,crypto_secretbox_BOXZEROBYTES:pt,crypto_scalarmult_BYTES:Pr,crypto_scalarmult_SCALARBYTES:bo,crypto_box_PUBLICKEYBYTES:Fs,crypto_box_SECRETKEYBYTES:vo,crypto_box_BEFORENMBYTES:Rs,crypto_box_NONCEBYTES:Ru,crypto_box_ZEROBYTES:ji,crypto_box_BOXZEROBYTES:yh,crypto_sign_BYTES:si,crypto_sign_PUBLICKEYBYTES:$i,crypto_sign_SECRETKEYBYTES:_o,crypto_sign_SEEDBYTES:Bu,crypto_hash_BYTES:Ou,gf:e,D:f,L:J,pack25519:Rr,unpack25519:nr,M:Ve,A:Wt,S:Xr,Z:wr,pow2523:Mi,add:ur,set25519:Mt,modL:he,scalarmult:wo,scalarbase:cn};function mf(b,S){if(b.length!==ut)throw new Error("bad key size");if(S.length!==qe)throw new Error("bad nonce size")}function Lu(b,S){if(b.length!==Fs)throw new Error("bad public key size");if(S.length!==vo)throw new Error("bad secret key size")}function fn(){for(var b=0;b<arguments.length;b++)if(!(arguments[b]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Da(b){for(var S=0;S<b.length;S++)b[S]=0}r.randomBytes=function(b){var S=new Uint8Array(b);return t(S,b),S},r.secretbox=function(b,S,P){fn(b,S,P),mf(P,S);for(var y=new Uint8Array(yt+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+yt]=b[M];return qt(I,y,y.length,S,P),I.subarray(pt)},r.secretbox.open=function(b,S,P){fn(b,S,P),mf(P,S);for(var y=new Uint8Array(pt+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+pt]=b[M];return y.length<32||hr(I,y,y.length,S,P)!==0?null:I.subarray(yt)},r.secretbox.keyLength=ut,r.secretbox.nonceLength=qe,r.secretbox.overheadLength=pt,r.scalarMult=function(b,S){if(fn(b,S),b.length!==bo)throw new Error("bad n size");if(S.length!==Pr)throw new Error("bad p size");var P=new Uint8Array(Pr);return rs(P,b,S),P},r.scalarMult.base=function(b){if(fn(b),b.length!==bo)throw new Error("bad n size");var S=new Uint8Array(Pr);return Br(S,b),S},r.scalarMult.scalarLength=bo,r.scalarMult.groupElementLength=Pr,r.box=function(b,S,P,y){var I=r.box.before(P,y);return r.secretbox(b,S,I)},r.box.before=function(b,S){fn(b,S),Lu(b,S);var P=new Uint8Array(Rs);return bn(P,b,S),P},r.box.after=r.secretbox,r.box.open=function(b,S,P,y){var I=r.box.before(P,y);return r.secretbox.open(b,S,I)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var b=new Uint8Array(Fs),S=new Uint8Array(vo);return Ki(b,S),{publicKey:b,secretKey:S}},r.box.keyPair.fromSecretKey=function(b){if(fn(b),b.length!==vo)throw new Error("bad secret key size");var S=new Uint8Array(Fs);return Br(S,b),{publicKey:S,secretKey:new Uint8Array(b)}},r.box.publicKeyLength=Fs,r.box.secretKeyLength=vo,r.box.sharedKeyLength=Rs,r.box.nonceLength=Ru,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(b,S){if(fn(b,S),S.length!==_o)throw new Error("bad secret key size");var P=new Uint8Array(si+b.length);return je(P,b,b.length,S),P},r.sign.open=function(b,S){if(fn(b,S),S.length!==$i)throw new Error("bad public key size");var P=new Uint8Array(b.length),y=tt(P,b,b.length,S);if(y<0)return null;for(var I=new Uint8Array(y),M=0;M<I.length;M++)I[M]=P[M];return I},r.sign.detached=function(b,S){for(var P=r.sign(b,S),y=new Uint8Array(si),I=0;I<y.length;I++)y[I]=P[I];return y},r.sign.detached.verify=function(b,S,P){if(fn(b,S,P),S.length!==si)throw new Error("bad signature size");if(P.length!==$i)throw new Error("bad public key size");var y=new Uint8Array(si+b.length),I=new Uint8Array(si+b.length),M;for(M=0;M<si;M++)y[M]=S[M];for(M=0;M<b.length;M++)y[M+si]=b[M];return tt(I,y,y.length,P)>=0},r.sign.keyPair=function(){var b=new Uint8Array($i),S=new Uint8Array(_o);return $(b,S),{publicKey:b,secretKey:S}},r.sign.keyPair.fromSecretKey=function(b){if(fn(b),b.length!==_o)throw new Error("bad secret key size");for(var S=new Uint8Array($i),P=0;P<S.length;P++)S[P]=b[32+P];return{publicKey:S,secretKey:new Uint8Array(b)}},r.sign.keyPair.fromSeed=function(b){if(fn(b),b.length!==Bu)throw new Error("bad seed size");for(var S=new Uint8Array($i),P=new Uint8Array(_o),y=0;y<32;y++)P[y]=b[y];return $(S,P,!0),{publicKey:S,secretKey:P}},r.sign.publicKeyLength=$i,r.sign.secretKeyLength=_o,r.sign.seedLength=Bu,r.sign.signatureLength=si,r.hash=function(b){fn(b);var S=new Uint8Array(Ou);return Qr(S,b,b.length),S},r.hash.hashLength=Ou,r.verify=function(b,S){return fn(b,S),b.length===0||S.length===0||b.length!==S.length?!1:F(b,0,S,0,b.length)===0},r.setPRNG=function(b){t=b},function(){var b=typeof self<"u"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var S=65536;r.setPRNG(function(P,y){var I,M=new Uint8Array(y);for(I=0;I<y;I+=S)b.getRandomValues(M.subarray(I,I+Math.min(y-I,S)));for(I=0;I<y;I++)P[I]=M[I];Da(M)})}else typeof Vu<"u"&&(b=Jv(),b&&b.randomBytes&&r.setPRNG(function(P,y){var I,M=b.randomBytes(y);for(I=0;I<y;I++)P[I]=M[I];Da(M)}))}()})(typeof og<"u"&&og.exports?og.exports:self.nacl=self.nacl||{})});var _3=ce((Fme,v3)=>{h();p();v3.exports=nx;var b3=128,bH=127,vH=~bH,_H=Math.pow(2,31);function nx(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw nx.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=_H;)e[t++]=r&255|b3,r/=128;for(;r&vH;)e[t++]=r&255|b3,r>>>=7;return e[t]=r|0,nx.bytes=t-n+1,e}});var P3=ce((Ome,E3)=>{h();p();E3.exports=ix;var xH=128,x3=127;function ix(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c||i>49)throw ix.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&x3)<<i:(a&x3)*Math.pow(2,i),i+=7}while(a>=xH);return ix.bytes=o-n,t}});var D3=ce((Ume,S3)=>{h();p();var EH=Math.pow(2,7),PH=Math.pow(2,14),SH=Math.pow(2,21),DH=Math.pow(2,28),AH=Math.pow(2,35),CH=Math.pow(2,42),IH=Math.pow(2,49),TH=Math.pow(2,56),kH=Math.pow(2,63);S3.exports=function(r){return r<EH?1:r<PH?2:r<SH?3:r<DH?4:r<AH?5:r<CH?6:r<IH?7:r<TH?8:r<kH?9:10}});var Up=ce((jme,A3)=>{h();p();A3.exports={encode:_3(),decode:P3(),encodingLength:D3()}});var Wo=ce((gye,L3)=>{"use strict";h();p();function O3(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function GH(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return O3(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),O3(new i,t)}}L3.exports=GH});var Y3=ce((Jye,G3)=>{h();p();var Bl=1e3,Ol=Bl*60,Ll=Ol*60,Oc=Ll*24,iG=Oc*7,oG=Oc*365.25;G3.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return sG(r);if(t==="number"&&isFinite(r))return e.long?uG(r):aG(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function sG(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*oG;case"weeks":case"week":case"w":return t*iG;case"days":case"day":case"d":return t*Oc;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ll;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ol;case"seconds":case"second":case"secs":case"sec":case"s":return t*Bl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function aG(r){var e=Math.abs(r);return e>=Oc?Math.round(r/Oc)+"d":e>=Ll?Math.round(r/Ll)+"h":e>=Ol?Math.round(r/Ol)+"m":e>=Bl?Math.round(r/Bl)+"s":r+"ms"}function uG(r){var e=Math.abs(r);return e>=Oc?xg(r,e,Oc,"day"):e>=Ll?xg(r,e,Ll,"hour"):e>=Ol?xg(r,e,Ol,"minute"):e>=Bl?xg(r,e,Bl,"second"):r+" ms"}function xg(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var X3=ce((Zye,J3)=>{h();p();function cG(r){t.debug=t,t.default=t,t.coerce=f,t.disable=o,t.enable=i,t.enabled=a,t.humanize=Y3(),t.destroy=d,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let w=0;for(let x=0;x<m.length;x++)w=(w<<5)-w+m.charCodeAt(x),w|=0;return t.colors[Math.abs(w)%t.colors.length]}t.selectColor=e;function t(m){let w,x=null,T,F;function N(...ue){if(!N.enabled)return;let pe=N,De=Number(new Date),re=De-(w||De);pe.diff=re,pe.prev=w,pe.curr=De,w=De,ue[0]=t.coerce(ue[0]),typeof ue[0]!="string"&&ue.unshift("%O");let be=0;ue[0]=ue[0].replace(/%([a-zA-Z%])/g,(Y,ge)=>{if(Y==="%%")return"%";be++;let _e=t.formatters[ge];if(typeof _e=="function"){let Me=ue[be];Y=_e.call(pe,Me),ue.splice(be,1),be--}return Y}),t.formatArgs.call(pe,ue),(pe.log||t.log).apply(pe,ue)}return N.namespace=m,N.useColors=t.useColors(),N.color=t.selectColor(m),N.extend=n,N.destroy=t.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(T!==t.namespaces&&(T=t.namespaces,F=t.enabled(m)),F),set:ue=>{x=ue}}),typeof t.init=="function"&&t.init(N),N}function n(m,w){let x=t(this.namespace+(typeof w>"u"?":":w)+m);return x.log=this.log,x}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let w,x=(typeof m=="string"?m:"").split(/[\s,]+/),T=x.length;for(w=0;w<T;w++)!x[w]||(m=x[w].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(c),...t.skips.map(c).map(w=>"-"+w)].join(",");return t.enable(""),m}function a(m){if(m[m.length-1]==="*")return!0;let w,x;for(w=0,x=t.skips.length;w<x;w++)if(t.skips[w].test(m))return!1;for(w=0,x=t.names.length;w<x;w++)if(t.names[w].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function f(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}J3.exports=cG});var Vo=ce((ki,Eg)=>{h();p();ki.formatArgs=lG;ki.save=hG;ki.load=pG;ki.useColors=fG;ki.storage=dG();ki.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ki.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fG(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lG(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Eg.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}ki.log=console.debug||console.log||(()=>{});function hG(r){try{r?ki.storage.setItem("debug",r):ki.storage.removeItem("debug")}catch{}}function pG(){let r;try{r=ki.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function dG(){try{return localStorage}catch{}}Eg.exports=X3()(ki);var{formatters:mG}=Eg.exports;mG.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var c6=ce((qge,u6)=>{"use strict";h();p();u6.exports=EG;function EG(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,f){t[n]=function(m){if(o)if(o=!1,m)f(m);else{for(var w=new Array(arguments.length-1),x=0;x<w.length;)w[x++]=arguments[x];c.apply(null,w)}};try{r.apply(e||null,t)}catch(d){o&&(o=!1,f(d))}})}});var p6=ce(h6=>{"use strict";h();p();var Cg=h6;Cg.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Nl=new Array(64),l6=new Array(123);for(Ho=0;Ho<64;)l6[Nl[Ho]=Ho<26?Ho+65:Ho<52?Ho+71:Ho<62?Ho-4:Ho-59|43]=Ho++;var Ho;Cg.encode=function(e,t,n){for(var i=null,o=[],a=0,c=0,f;t<n;){var d=e[t++];switch(c){case 0:o[a++]=Nl[d>>2],f=(d&3)<<4,c=1;break;case 1:o[a++]=Nl[f|d>>4],f=(d&15)<<2,c=2;break;case 2:o[a++]=Nl[f|d>>6],o[a++]=Nl[d&63],c=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=Nl[f],o[a++]=61,c===1&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var f6="invalid encoding";Cg.decode=function(e,t,n){for(var i=n,o=0,a,c=0;c<e.length;){var f=e.charCodeAt(c++);if(f===61&&o>1)break;if((f=l6[f])===void 0)throw Error(f6);switch(o){case 0:a=f,o=1;break;case 1:t[n++]=a<<2|(f&48)>>4,a=f,o=2;break;case 2:t[n++]=(a&15)<<4|(f&60)>>2,a=f,o=3;break;case 3:t[n++]=(a&3)<<6|f,o=0;break}}if(o===1)throw Error(f6);return n-i};Cg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var m6=ce((Jge,d6)=>{"use strict";h();p();d6.exports=Ig;function Ig(){this._listeners={}}Ig.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Ig.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Ig.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var x6=ce((Zge,_6)=>{"use strict";h();p();_6.exports=y6(y6);function y6(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3]}function o(f,d,m){e[0]=f,d[m]=t[3],d[m+1]=t[2],d[m+2]=t[1],d[m+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],e[0]}function c(f,d){return t[3]=f[d],t[2]=f[d+1],t[1]=f[d+2],t[0]=f[d+3],e[0]}r.readFloatLE=n?a:c,r.readFloatBE=n?c:a}():function(){function e(n,i,o,a){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,a);else if(isNaN(i))n(2143289344,o,a);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,a);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,a);else{var f=Math.floor(Math.log(i)/Math.LN2),d=Math.round(i*Math.pow(2,-f)*8388608)&8388607;n((c<<31|f+127<<23|d)>>>0,o,a)}}r.writeFloatLE=e.bind(null,g6),r.writeFloatBE=e.bind(null,w6);function t(n,i,o){var a=n(i,o),c=(a>>31)*2+1,f=a>>>23&255,d=a&8388607;return f===255?d?NaN:c*(1/0):f===0?c*1401298464324817e-60*d:c*Math.pow(2,f-150)*(d+8388608)}r.readFloatLE=t.bind(null,b6),r.readFloatBE=t.bind(null,v6)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3],d[m+4]=t[4],d[m+5]=t[5],d[m+6]=t[6],d[m+7]=t[7]}function o(f,d,m){e[0]=f,d[m]=t[7],d[m+1]=t[6],d[m+2]=t[5],d[m+3]=t[4],d[m+4]=t[3],d[m+5]=t[2],d[m+6]=t[1],d[m+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],t[4]=f[d+4],t[5]=f[d+5],t[6]=f[d+6],t[7]=f[d+7],e[0]}function c(f,d){return t[7]=f[d],t[6]=f[d+1],t[5]=f[d+2],t[4]=f[d+3],t[3]=f[d+4],t[2]=f[d+5],t[1]=f[d+6],t[0]=f[d+7],e[0]}r.readDoubleLE=n?a:c,r.readDoubleBE=n?c:a}():function(){function e(n,i,o,a,c,f){var d=a<0?1:0;if(d&&(a=-a),a===0)n(0,c,f+i),n(1/a>0?0:2147483648,c,f+o);else if(isNaN(a))n(0,c,f+i),n(2146959360,c,f+o);else if(a>17976931348623157e292)n(0,c,f+i),n((d<<31|2146435072)>>>0,c,f+o);else{var m;if(a<22250738585072014e-324)m=a/5e-324,n(m>>>0,c,f+i),n((d<<31|m/4294967296)>>>0,c,f+o);else{var w=Math.floor(Math.log(a)/Math.LN2);w===1024&&(w=1023),m=a*Math.pow(2,-w),n(m*4503599627370496>>>0,c,f+i),n((d<<31|w+1023<<20|m*1048576&1048575)>>>0,c,f+o)}}}r.writeDoubleLE=e.bind(null,g6,0,4),r.writeDoubleBE=e.bind(null,w6,4,0);function t(n,i,o,a,c){var f=n(a,c+i),d=n(a,c+o),m=(d>>31)*2+1,w=d>>>20&2047,x=4294967296*(d&1048575)+f;return w===2047?x?NaN:m*(1/0):w===0?m*5e-324*x:m*Math.pow(2,w-1075)*(x+4503599627370496)}r.readDoubleLE=t.bind(null,b6,0,4),r.readDoubleBE=t.bind(null,v6,4,0)}(),r}function g6(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function w6(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function b6(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function v6(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var E6=ce((exports,module)=>{"use strict";h();p();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var S6=ce(P6=>{"use strict";h();p();var gx=P6;gx.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};gx.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,a=[],c=0,f;t<n;)f=e[t++],f<128?a[c++]=f:f>191&&f<224?a[c++]=(f&31)<<6|e[t++]&63:f>239&&f<365?(f=((f&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,a[c++]=55296+(f>>10),a[c++]=56320+(f&1023)):a[c++]=(f&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,a.slice(0,c))),o.join("")):String.fromCharCode.apply(String,a.slice(0,c))};gx.write=function(e,t,n){for(var i=n,o,a,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var A6=ce((a0e,D6)=>{"use strict";h();p();D6.exports=PG;function PG(r,e,t){var n=t||8192,i=n>>>1,o=null,a=n;return function(f){if(f<1||f>i)return r(f);a+f>n&&(o=r(n),a=0);var d=e.call(o,a,a+=f);return a&7&&(a=(a|7)+1),d}}});var I6=ce((f0e,C6)=>{"use strict";h();p();C6.exports=an;var Gp=fu();function an(r,e){this.lo=r>>>0,this.hi=e>>>0}var Nc=an.zero=new an(0,0);Nc.toNumber=function(){return 0};Nc.zzEncode=Nc.zzDecode=function(){return this};Nc.length=function(){return 1};var SG=an.zeroHash="\0\0\0\0\0\0\0\0";an.fromNumber=function(e){if(e===0)return Nc;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new an(n,i)};an.from=function(e){if(typeof e=="number")return an.fromNumber(e);if(Gp.isString(e))if(Gp.Long)e=Gp.Long.fromString(e);else return an.fromNumber(parseInt(e,10));return e.low||e.high?new an(e.low>>>0,e.high>>>0):Nc};an.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};an.prototype.toLong=function(e){return Gp.Long?new Gp.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var cu=String.prototype.charCodeAt;an.fromHash=function(e){return e===SG?Nc:new an((cu.call(e,0)|cu.call(e,1)<<8|cu.call(e,2)<<16|cu.call(e,3)<<24)>>>0,(cu.call(e,4)|cu.call(e,5)<<8|cu.call(e,6)<<16|cu.call(e,7)<<24)>>>0)};an.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};an.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};an.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};an.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var fu=ce(wx=>{"use strict";h();p();var Xe=wx;Xe.asPromise=c6();Xe.base64=p6();Xe.EventEmitter=m6();Xe.float=x6();Xe.inquire=E6();Xe.utf8=S6();Xe.pool=A6();Xe.LongBits=I6();Xe.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Xe.global=Xe.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||wx;Xe.emptyArray=Object.freeze?Object.freeze([]):[];Xe.emptyObject=Object.freeze?Object.freeze({}):{};Xe.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Xe.isString=function(e){return typeof e=="string"||e instanceof String};Xe.isObject=function(e){return e&&typeof e=="object"};Xe.isset=Xe.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Xe.Buffer=function(){try{var r=Xe.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Xe._Buffer_from=null;Xe._Buffer_allocUnsafe=null;Xe.newBuffer=function(e){return typeof e=="number"?Xe.Buffer?Xe._Buffer_allocUnsafe(e):new Xe.Array(e):Xe.Buffer?Xe._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Xe.Array=typeof Uint8Array<"u"?Uint8Array:Array;Xe.Long=Xe.global.dcodeIO&&Xe.global.dcodeIO.Long||Xe.global.Long||Xe.inquire("long");Xe.key2Re=/^true|false|0|1$/;Xe.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Xe.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Xe.longToHash=function(e){return e?Xe.LongBits.from(e).toHash():Xe.LongBits.zeroHash};Xe.longFromHash=function(e,t){var n=Xe.LongBits.fromHash(e);return Xe.Long?Xe.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function T6(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Xe.merge=T6;Xe.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function k6(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&T6(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Xe.newError=k6;Xe.ProtocolError=k6("ProtocolError");Xe.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Xe.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Xe.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Xe._configure=function(){var r=Xe.Buffer;if(!r){Xe._Buffer_from=Xe._Buffer_allocUnsafe=null;return}Xe._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Xe._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Sx=ce((y0e,O6)=>{"use strict";h();p();O6.exports=Ut;var lo=fu(),bx,Tg=lo.LongBits,F6=lo.base64,R6=lo.utf8;function Yp(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function _x(){}function DG(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Ut(){this.len=0,this.head=new Yp(_x,0,0),this.tail=this.head,this.states=null}var B6=function(){return lo.Buffer?function(){return(Ut.create=function(){return new bx})()}:function(){return new Ut}};Ut.create=B6();Ut.alloc=function(e){return new lo.Array(e)};lo.Array!==Array&&(Ut.alloc=lo.pool(Ut.alloc,lo.Array.prototype.subarray));Ut.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Yp(e,t,n),this.len+=t,this};function xx(r,e,t){e[t]=r&255}function AG(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function Ex(r,e){this.len=r,this.next=void 0,this.val=e}Ex.prototype=Object.create(Yp.prototype);Ex.prototype.fn=AG;Ut.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Ex((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Ut.prototype.int32=function(e){return e<0?this._push(Px,10,Tg.fromNumber(e)):this.uint32(e)};Ut.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Px(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Ut.prototype.uint64=function(e){var t=Tg.from(e);return this._push(Px,t.length(),t)};Ut.prototype.int64=Ut.prototype.uint64;Ut.prototype.sint64=function(e){var t=Tg.from(e).zzEncode();return this._push(Px,t.length(),t)};Ut.prototype.bool=function(e){return this._push(xx,1,e?1:0)};function vx(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Ut.prototype.fixed32=function(e){return this._push(vx,4,e>>>0)};Ut.prototype.sfixed32=Ut.prototype.fixed32;Ut.prototype.fixed64=function(e){var t=Tg.from(e);return this._push(vx,4,t.lo)._push(vx,4,t.hi)};Ut.prototype.sfixed64=Ut.prototype.fixed64;Ut.prototype.float=function(e){return this._push(lo.float.writeFloatLE,4,e)};Ut.prototype.double=function(e){return this._push(lo.float.writeDoubleLE,8,e)};var CG=lo.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};Ut.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(xx,1,0);if(lo.isString(e)){var n=Ut.alloc(t=F6.length(e));F6.decode(e,n,0),e=n}return this.uint32(t)._push(CG,t,e)};Ut.prototype.string=function(e){var t=R6.length(e);return t?this.uint32(t)._push(R6.write,t,e):this._push(xx,1,0)};Ut.prototype.fork=function(){return this.states=new DG(this),this.head=this.tail=new Yp(_x,0,0),this.len=0,this};Ut.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Yp(_x,0,0),this.len=0),this};Ut.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Ut.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Ut._configure=function(r){bx=r,Ut.create=B6(),bx._configure()}});var U6=ce((b0e,N6)=>{"use strict";h();p();N6.exports=_s;var L6=Sx();(_s.prototype=Object.create(L6.prototype)).constructor=_s;var lu=fu();function _s(){L6.call(this)}_s._configure=function(){_s.alloc=lu._Buffer_allocUnsafe,_s.writeBytesBuffer=lu.Buffer&&lu.Buffer.prototype instanceof Uint8Array&&lu.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};_s.prototype.bytes=function(e){lu.isString(e)&&(e=lu._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(_s.writeBytesBuffer,t,e),this};function IG(r,e,t){r.length<40?lu.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}_s.prototype.string=function(e){var t=lu.Buffer.byteLength(e);return this.uint32(t),t&&this._push(IG,t,e),this};_s._configure()});var Cx=ce((x0e,z6)=>{"use strict";h();p();z6.exports=Mr;var xs=fu(),Ax,j6=xs.LongBits,TG=xs.utf8;function Go(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Mr(r){this.buf=r,this.pos=0,this.len=r.length}var M6=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Mr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Mr(e);throw Error("illegal buffer")},$6=function(){return xs.Buffer?function(t){return(Mr.create=function(i){return xs.Buffer.isBuffer(i)?new Ax(i):M6(i)})(t)}:M6};Mr.create=$6();Mr.prototype._slice=xs.Array.prototype.subarray||xs.Array.prototype.slice;Mr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Go(this,10);return e}}();Mr.prototype.int32=function(){return this.uint32()|0};Mr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Dx(){var r=new j6(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Go(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw Go(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Mr.prototype.bool=function(){return this.uint32()!==0};function kg(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Mr.prototype.fixed32=function(){if(this.pos+4>this.len)throw Go(this,4);return kg(this.buf,this.pos+=4)};Mr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Go(this,4);return kg(this.buf,this.pos+=4)|0};function K6(){if(this.pos+8>this.len)throw Go(this,8);return new j6(kg(this.buf,this.pos+=4),kg(this.buf,this.pos+=4))}Mr.prototype.float=function(){if(this.pos+4>this.len)throw Go(this,4);var e=xs.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Mr.prototype.double=function(){if(this.pos+8>this.len)throw Go(this,4);var e=xs.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Mr.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Go(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Mr.prototype.string=function(){var e=this.bytes();return TG.read(e,0,e.length)};Mr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Go(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Go(this);while(this.buf[this.pos++]&128);return this};Mr.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Mr._configure=function(r){Ax=r,Mr.create=$6(),Ax._configure();var e=xs.Long?"toLong":"toNumber";xs.merge(Mr.prototype,{int64:function(){return Dx.call(this)[e](!1)},uint64:function(){return Dx.call(this)[e](!0)},sint64:function(){return Dx.call(this).zzDecode()[e](!1)},fixed64:function(){return K6.call(this)[e](!0)},sfixed64:function(){return K6.call(this)[e](!1)}})}});var H6=ce((S0e,V6)=>{"use strict";h();p();V6.exports=Uc;var W6=Cx();(Uc.prototype=Object.create(W6.prototype)).constructor=Uc;var q6=fu();function Uc(r){W6.call(this,r)}Uc._configure=function(){q6.Buffer&&(Uc.prototype._slice=q6.Buffer.prototype.slice)};Uc.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Uc._configure()});var Y6=ce((C0e,G6)=>{"use strict";h();p();G6.exports=Jp;var Ix=fu();(Jp.prototype=Object.create(Ix.EventEmitter.prototype)).constructor=Jp;function Jp(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Ix.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Jp.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return Ix.asPromise(r,a,e,t,n,i);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(f,d){if(f)return a.emit("error",f,e),o(f);if(d===null){a.end(!0);return}if(!(d instanceof n))try{d=n[a.responseDelimited?"decodeDelimited":"decode"](d)}catch(m){return a.emit("error",m,e),o(m)}return a.emit("data",d,e),o(null,d)})}catch(c){a.emit("error",c,e),setTimeout(function(){o(c)},0);return}};Jp.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var X6=ce(J6=>{"use strict";h();p();var kG=J6;kG.Service=Y6()});var Z6=ce((B0e,Q6)=>{"use strict";h();p();Q6.exports={}});var rT=ce(tT=>{"use strict";h();p();var ri=tT;ri.build="minimal";ri.Writer=Sx();ri.BufferWriter=U6();ri.Reader=Cx();ri.BufferReader=H6();ri.util=fu();ri.rpc=X6();ri.roots=Z6();ri.configure=eT;function eT(){ri.util._configure(),ri.Writer._configure(ri.BufferWriter),ri.Reader._configure(ri.BufferReader)}eT()});var hu=ce((K0e,nT)=>{"use strict";h();p();nT.exports=rT()});var aT=ce((Tx,sT)=>{"use strict";h();p();Object.defineProperty(Tx,"__esModule",{value:!0});Rg.BASE=2166136261;function Rg(r,e=Rg.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Tx.default=Rg;sT.exports=Rg});var LT=ce((fve,qg)=>{"use strict";h();p();qg.exports=iY;qg.exports.format=BT;qg.exports.parse=OT;var tY=/\B(?=(\d{3})+(?!\d))/g,rY=/(?:\.0*|(\.[^0]+)0+)$/,yu={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},nY=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function iY(r,e){return typeof r=="string"?OT(r):typeof r=="number"?BT(r,e):null}function BT(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,a=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!yu[c.toLowerCase()])&&(t>=yu.pb?c="PB":t>=yu.tb?c="TB":t>=yu.gb?c="GB":t>=yu.mb?c="MB":t>=yu.kb?c="KB":c="B");var f=r/yu[c.toLowerCase()],d=f.toFixed(o);return a||(d=d.replace(rY,"$1")),n&&(d=d.split(".").map(function(m,w){return w===0?m.replace(tY,n):m}).join(".")),d+i+c}function OT(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=nY.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(yu[n]*t)}});var UT=ce((pve,NT)=>{"use strict";h();p();NT.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var qT=ce(($T,zT)=>{"use strict";h();p();var Wg=UT(),{hasOwnProperty:KT}=Object.prototype,{propertyIsEnumerable:oY}=Object,Hl=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),sY=$T,MT={concatArrays:!1,ignoreUndefined:!1},Vg=r=>{let e=[];for(let t in r)KT.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)oY.call(r,n)&&e.push(n)}return e};function Gl(r){return Array.isArray(r)?aY(r):Wg(r)?uY(r):r}function aY(r){let e=r.slice(0,0);return Vg(r).forEach(t=>{Hl(e,t,Gl(r[t]))}),e}function uY(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return Vg(r).forEach(t=>{Hl(e,t,Gl(r[t]))}),e}var jT=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Hl(r,i,Yx(r[i],e[i],n)):Hl(r,i,Gl(e[i])))}),r),cY=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let a=[];for(let c=0;c<o.length;c++)!KT.call(o,c)||(a.push(String(c)),o===r?Hl(n,i++,o[c]):Hl(n,i++,Gl(o[c])));n=jT(n,o,Vg(o).filter(c=>!a.includes(c)),t)}),n};function Yx(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?cY(r,e,t):!Wg(e)||!Wg(r)?Gl(e):jT(r,e,Vg(e),t)}zT.exports=function(...r){let e=Yx(Gl(MT),this!==sY&&this||{},MT),t={_:{}};for(let n of r)if(n!==void 0){if(!Wg(n))throw new TypeError("`"+n+"` is not an Option Object");t=Yx(t,{_:n},e)}return t._}});var rk=ce((n_e,Qx)=>{"use strict";h();p();var dY=Object.prototype.hasOwnProperty,$n="~";function nd(){}Object.create&&(nd.prototype=Object.create(null),new nd().__proto__||($n=!1));function mY(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function tk(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new mY(t,n||r,i),a=$n?$n+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],o]:r._events[a].push(o):(r._events[a]=o,r._eventsCount++),r}function Xg(r,e){--r._eventsCount===0?r._events=new nd:delete r._events[e]}function Dn(){this._events=new nd,this._eventsCount=0}Dn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)dY.call(t,n)&&e.push($n?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Dn.prototype.listeners=function(e){var t=$n?$n+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Dn.prototype.listenerCount=function(e){var t=$n?$n+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Dn.prototype.emit=function(e,t,n,i,o,a){var c=$n?$n+e:e;if(!this._events[c])return!1;var f=this._events[c],d=arguments.length,m,w;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,a),!0}for(w=1,m=new Array(d-1);w<d;w++)m[w-1]=arguments[w];f.fn.apply(f.context,m)}else{var x=f.length,T;for(w=0;w<x;w++)switch(f[w].once&&this.removeListener(e,f[w].fn,void 0,!0),d){case 1:f[w].fn.call(f[w].context);break;case 2:f[w].fn.call(f[w].context,t);break;case 3:f[w].fn.call(f[w].context,t,n);break;case 4:f[w].fn.call(f[w].context,t,n,i);break;default:if(!m)for(T=1,m=new Array(d-1);T<d;T++)m[T-1]=arguments[T];f[w].fn.apply(f[w].context,m)}}return!0};Dn.prototype.on=function(e,t,n){return tk(this,e,t,n,!1)};Dn.prototype.once=function(e,t,n){return tk(this,e,t,n,!0)};Dn.prototype.removeListener=function(e,t,n,i){var o=$n?$n+e:e;if(!this._events[o])return this;if(!t)return Xg(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&Xg(this,o);else{for(var c=0,f=[],d=a.length;c<d;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&f.push(a[c]);f.length?this._events[o]=f.length===1?f[0]:f:Xg(this,o)}return this};Dn.prototype.removeAllListeners=function(e){var t;return e?(t=$n?$n+e:e,this._events[t]&&Xg(this,t)):(this._events=new nd,this._eventsCount=0),this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.addListener=Dn.prototype.on;Dn.prefixed=$n;Dn.EventEmitter=Dn;typeof Qx<"u"&&(Qx.exports=Dn)});var Nk=ce((Z1e,Lk)=>{h();p();Lk.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var Kk=ce((nEe,Mk)=>{h();p();var Uk=Nk();Mk.exports=class{constructor(e){this.hwm=e||16,this.head=new Uk(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new Uk(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var $k=ce((sEe,jk)=>{h();p();var I1=Kk();jk.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new I1,n,i,o,a=()=>{if(!t.isEmpty()){if(r.writev){let N,ue=[];for(;!t.isEmpty();){if(N=t.shift(),N.error)throw N.error;ue.push(N.value)}return{done:N.done,value:ue}}let F=t.shift();if(F.error)throw F.error;return F}return o?{done:!0}:new Promise((F,N)=>{i=ue=>(i=null,ue.error?N(ue.error):r.writev&&!ue.done?F({done:ue.done,value:[ue.value]}):F(ue),n)})},c=F=>i?i(F):(t.push(F),n),f=F=>(t=new I1,i?i({error:F}):(t.push({error:F}),n)),d=F=>o?n:c({done:!1,value:F}),m=F=>o?n:(o=!0,F?f(F):c({done:!0})),w=()=>(t=new I1,m(),{done:!0}),x=F=>(m(F),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:w,throw:x,push:d,end:m},!e)return n;let T=n;return n={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(F){return T.throw(F),e&&(e(F),e=null),{done:!0}},return(){return T.return(),e&&(e(),e=null),{done:!0}},push:d,end(F){return T.end(F),e&&(e(F),e=null),n}},n}});var T1=ce((cEe,zk)=>{"use strict";h();p();var kY=$k(),FY=async function*(...r){let e=kY();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};zk.exports=FY});var p0=ce((QEe,Qk)=>{"use strict";h();p();var qY=async r=>{for await(let e of r);};Qk.exports=qY});var d0=ce((tPe,Zk)=>{"use strict";h();p();var WY=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};Zk.exports=WY});var m0=ce((iPe,eF)=>{"use strict";h();p();var VY=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};eF.exports=VY});var O1=ce((aPe,tF)=>{"use strict";h();p();var HY=async r=>{let e=[];for await(let t of r)e.push(t);return e};tF.exports=HY});var cF=ce((qPe,uF)=>{"use strict";h();p();var QY=async function*(r,e){for await(let t of r)yield e(t)};uF.exports=QY});var pF=ce(hF=>{"use strict";h();p();hF.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var Zo=ce((lDe,dF)=>{"use strict";h();p();dF.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var q1=ce((dDe,mF)=>{"use strict";h();p();var z1=null;mF.exports=function(){return z1===null&&(z1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),z1}});var H1=ce(yF=>{"use strict";h();p();var W1=Zo(),iJ=new Set(["buffer","view","utf8"]),V1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!iJ.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new W1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new W1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new W1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};yF.Encoding=V1});var X1=ce(_0=>{"use strict";h();p();var{Buffer:Y1}=dc()||{},{Encoding:J1}=H1(),oJ=q1(),wd=class extends J1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new bd({encode:this.encode,decode:e=>this.decode(Y1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},bd=class extends J1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new wd({encode:e=>{let t=this.encode(e);return Y1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},G1=class extends J1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new wd({encode:e=>Y1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=oJ();return new bd({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};_0.BufferFormat=wd;_0.ViewFormat=bd;_0.UTF8Format=G1});var vF=ce(Qc=>{"use strict";h();p();var{Buffer:An}=dc()||{Buffer:{isBuffer:()=>!1}},{textEncoder:wF,textDecoder:gF}=q1()(),{BufferFormat:vd,ViewFormat:Q1,UTF8Format:bF}=X1(),x0=r=>r;Qc.utf8=new bF({encode:function(r){return An.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?gF.decode(r):String(r)},decode:x0,name:"utf8",createViewTranscoder(){return new Q1({encode:function(r){return ArrayBuffer.isView(r)?r:wF.encode(r)},decode:function(r){return gF.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new vd({encode:function(r){return An.isBuffer(r)?r:ArrayBuffer.isView(r)?An.from(r.buffer,r.byteOffset,r.byteLength):An.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Qc.json=new bF({encode:JSON.stringify,decode:JSON.parse,name:"json"});Qc.buffer=new vd({encode:function(r){return An.isBuffer(r)?r:ArrayBuffer.isView(r)?An.from(r.buffer,r.byteOffset,r.byteLength):An.from(String(r),"utf8")},decode:x0,name:"buffer",createViewTranscoder(){return new Q1({encode:function(r){return ArrayBuffer.isView(r)?r:An.from(String(r),"utf8")},decode:function(r){return An.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Qc.view=new Q1({encode:function(r){return ArrayBuffer.isView(r)?r:wF.encode(r)},decode:x0,name:"view",createBufferTranscoder(){return new vd({encode:function(r){return An.isBuffer(r)?r:ArrayBuffer.isView(r)?An.from(r.buffer,r.byteOffset,r.byteLength):An.from(String(r),"utf8")},decode:x0,name:`${this.name}+buffer`})}});Qc.hex=new vd({encode:function(r){return An.isBuffer(r)?r:An.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Qc.base64=new vd({encode:function(r){return An.isBuffer(r)?r:An.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var EF=ce(xF=>{"use strict";h();p();var _F=Zo(),P0=vF(),{Encoding:sJ}=H1(),{BufferFormat:aJ,ViewFormat:uJ,UTF8Format:cJ}=X1(),_d=Symbol("formats"),E0=Symbol("encodings"),fJ=new Set(["buffer","view","utf8"]),Z1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>fJ.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[E0]=new Map,this[_d]=new Set(e);for(let t in P0)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[E0].values()))}encoding(e){let t=this[E0].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=dJ[e],!t)throw new _F(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=lJ(e)}let{name:n,format:i}=t;if(!this[_d].has(i))if(this[_d].has("view"))t=t.createViewTranscoder();else if(this[_d].has("buffer"))t=t.createBufferTranscoder();else if(this[_d].has("utf8"))t=t.createUTF8Transcoder();else throw new _F(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[E0].set(o,t)}return t}};xF.Transcoder=Z1;function lJ(r){if(r instanceof sJ)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${mJ++}`;switch(hJ(r)){case"view":return new uJ({...r,name:t});case"utf8":return new cJ({...r,name:t});case"buffer":return new aJ({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function hJ(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var pJ={binary:P0.buffer,"utf-8":P0.utf8},dJ={...P0,...pJ},mJ=0});var BF=ce((IDe,eE)=>{"use strict";h();p();var th=typeof Reflect=="object"?Reflect:null,PF=th&&typeof th.apply=="function"?th.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},S0;th&&typeof th.ownKeys=="function"?S0=th.ownKeys:Object.getOwnPropertySymbols?S0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:S0=function(e){return Object.getOwnPropertyNames(e)};function yJ(r){console&&console.warn&&console.warn(r)}var DF=Number.isNaN||function(e){return e!==e};function rr(){rr.init.call(this)}eE.exports=rr;eE.exports.once=vJ;rr.EventEmitter=rr;rr.prototype._events=void 0;rr.prototype._eventsCount=0;rr.prototype._maxListeners=void 0;var SF=10;function D0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(rr,"defaultMaxListeners",{enumerable:!0,get:function(){return SF},set:function(r){if(typeof r!="number"||r<0||DF(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");SF=r}});rr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};rr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||DF(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function AF(r){return r._maxListeners===void 0?rr.defaultMaxListeners:r._maxListeners}rr.prototype.getMaxListeners=function(){return AF(this)};rr.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")PF(f,this,t);else for(var d=f.length,m=FF(f,d),n=0;n<d;++n)PF(m[n],this,t);return!0};function CF(r,e,t,n){var i,o,a;if(D0(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=AF(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=a.length,yJ(c)}return r}rr.prototype.addListener=function(e,t){return CF(this,e,t,!1)};rr.prototype.on=rr.prototype.addListener;rr.prototype.prependListener=function(e,t){return CF(this,e,t,!0)};function gJ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function IF(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=gJ.bind(n);return i.listener=t,n.wrapFn=i,i}rr.prototype.once=function(e,t){return D0(t),this.on(e,IF(this,e,t)),this};rr.prototype.prependOnceListener=function(e,t){return D0(t),this.prependListener(e,IF(this,e,t)),this};rr.prototype.removeListener=function(e,t){var n,i,o,a,c;if(D0(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():wJ(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};rr.prototype.off=rr.prototype.removeListener;rr.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function TF(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?bJ(i):FF(i,i.length)}rr.prototype.listeners=function(e){return TF(this,e,!0)};rr.prototype.rawListeners=function(e){return TF(this,e,!1)};rr.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):kF.call(r,e)};rr.prototype.listenerCount=kF;function kF(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}rr.prototype.eventNames=function(){return this._eventsCount>0?S0(this._events):[]};function FF(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function wJ(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function bJ(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function vJ(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}RF(r,e,o,{once:!0}),e!=="error"&&_J(r,i,{once:!0})})}function _J(r,e,t){typeof r.on=="function"&&RF(r,"error",e,t)}function RF(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var LF=ce((FDe,OF)=>{h();p();OF.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var xd=ce(tE=>{"use strict";h();p();var NF=LF();tE.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};tE.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){NF(()=>e(null,t))}).catch(function(t){NF(()=>e(t))})}});var A0=ce(rE=>{"use strict";h();p();rE.getCallback=function(r,e){return typeof r=="function"?r:e};rE.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Iu=ce(k0=>{"use strict";h();p();var{fromCallback:nE}=xd(),Oi=Zo(),{getOptions:iE,getCallback:UF}=A0(),Zc=Symbol("promise"),rh=Symbol("callback"),Cs=Symbol("working"),ef=Symbol("handleOne"),ga=Symbol("handleMany"),oE=Symbol("autoClose"),Au=Symbol("finishWork"),Is=Symbol("returnMany"),Pu=Symbol("closing"),Ed=Symbol("handleClose"),C0=Symbol("closed"),Pd=Symbol("closeCallbacks"),Du=Symbol("keyEncoding"),tf=Symbol("valueEncoding"),sE=Symbol("abortOnClose"),I0=Symbol("legacy"),aE=Symbol("keys"),uE=Symbol("values"),Su=Symbol("limit"),mo=Symbol("count"),T0=Object.freeze({}),xJ=()=>{},MF=!1,Sd=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[C0]=!1,this[Pd]=[],this[Cs]=!1,this[Pu]=!1,this[oE]=!1,this[rh]=null,this[ef]=this[ef].bind(this),this[ga]=this[ga].bind(this),this[Ed]=this[Ed].bind(this),this[Du]=t[Du],this[tf]=t[tf],this[I0]=n,this[Su]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[mo]=0,this[sE]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[mo]}get limit(){return this[Su]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,c)=>{o?i(o):this[I0]?a===void 0&&c===void 0?n():n([a,c]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Pu]?this.nextTick(e,new Oi("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Cs]?this.nextTick(e,new Oi("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Cs]=!0,this[rh]=e,this[mo]>=this[Su]?this.nextTick(this[ef],null):this._next(this[ef])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=UF(t,n),n=nE(n,Zc),t=iE(t,T0),Number.isInteger(e)?(this[Pu]?this.nextTick(n,new Oi("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Cs]?this.nextTick(n,new Oi("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Su]<1/0&&(e=Math.min(e,this[Su]-this[mo])),this[Cs]=!0,this[rh]=n,e<=0?this.nextTick(this[ga],null,[]):this._nextv(e,t,this[ga])),n[Zc]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Zc])}_nextv(e,t,n){let i=[],o=(a,c,f)=>{if(a)return n(a);if(this[I0]?c===void 0&&f===void 0:c===void 0)return n(null,i);i.push(this[I0]?[c,f]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=UF(e,t),t=nE(t,Zc),e=iE(e,T0),this[Pu]?this.nextTick(t,new Oi("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Cs]?this.nextTick(t,new Oi("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Cs]=!0,this[rh]=t,this[oE]=!0,this[mo]>=this[Su]?this.nextTick(this[ga],null,[]):this._all(e,this[ga])),t[Zc]}_all(e,t){let n=this[mo],i=[],o=()=>{let c=this[Su]<1/0?Math.min(1e3,this[Su]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,T0,a)},a=(c,f)=>{c?t(c):f.length===0?t(null,i):(i.push.apply(i,f),n+=f.length,o())};o()}[Au](){let e=this[rh];return this[sE]&&e===null?xJ:(this[Cs]=!1,this[rh]=null,this[Pu]&&this._close(this[Ed]),e)}[Is](e,t,n){this[oE]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=iE(t,T0),!this[Pu]){if(this[Cs])throw new Oi("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Du]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Oi("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=nE(e,Zc),this[C0]?this.nextTick(e):this[Pu]?this[Pd].push(e):(this[Pu]=!0,this[Pd].push(e),this[Cs]?this[sE]&&this[Au]()(new Oi("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Ed])),e[Zc]}_close(e){this.nextTick(e)}[Ed](){this[C0]=!0,this.db.detachResource(this);let e=this[Pd];this[Pd]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[C0]||await this.close()}}},nh=class extends Sd{constructor(e,t){super(e,t,!0),this[aE]=t.keys!==!1,this[uE]=t.values!==!1}[ef](e,t,n){let i=this[Au]();if(e)return i(e);try{t=this[aE]&&t!==void 0?this[Du].decode(t):void 0,n=this[uE]&&n!==void 0?this[tf].decode(n):void 0}catch(o){return i(new Cu("entry",o))}t===void 0&&n===void 0||this[mo]++,i(null,t,n)}[ga](e,t){let n=this[Au]();if(e)return this[Is](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[aE]&&o!==void 0?this[Du].decode(o):void 0,i[1]=this[uE]&&a!==void 0?this[tf].decode(a):void 0}}catch(i){return this[Is](n,new Cu("entries",i))}this[mo]+=t.length,this[Is](n,null,t)}end(e){return!MF&&typeof console<"u"&&(MF=!0,console.warn(new Oi("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},cE=class extends Sd{constructor(e,t){super(e,t,!1)}[ef](e,t){let n=this[Au]();if(e)return n(e);try{t=t!==void 0?this[Du].decode(t):void 0}catch(i){return n(new Cu("key",i))}t!==void 0&&this[mo]++,n(null,t)}[ga](e,t){let n=this[Au]();if(e)return this[Is](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Du].decode(o):void 0}}catch(i){return this[Is](n,new Cu("keys",i))}this[mo]+=t.length,this[Is](n,null,t)}},fE=class extends Sd{constructor(e,t){super(e,t,!1)}[ef](e,t){let n=this[Au]();if(e)return n(e);try{t=t!==void 0?this[tf].decode(t):void 0}catch(i){return n(new Cu("value",i))}t!==void 0&&this[mo]++,n(null,t)}[ga](e,t){let n=this[Au]();if(e)return this[Is](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[tf].decode(o):void 0}}catch(i){return this[Is](n,new Cu("values",i))}this[mo]+=t.length,this[Is](n,null,t)}},Cu=class extends Oi{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(nh.prototype,r.split(" ")[0],{get(){throw new Oi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Oi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});nh.keyEncoding=Du;nh.valueEncoding=tf;k0.AbstractIterator=nh;k0.AbstractKeyIterator=cE;k0.AbstractValueIterator=fE});var KF=ce(lE=>{"use strict";h();p();var{AbstractKeyIterator:EJ,AbstractValueIterator:PJ}=Iu(),rf=Symbol("iterator"),Dd=Symbol("callback"),ih=Symbol("handleOne"),nf=Symbol("handleMany"),Ad=class extends EJ{constructor(e,t){super(e,t),this[rf]=e.iterator({...t,keys:!0,values:!1}),this[ih]=this[ih].bind(this),this[nf]=this[nf].bind(this)}},F0=class extends PJ{constructor(e,t){super(e,t),this[rf]=e.iterator({...t,keys:!1,values:!0}),this[ih]=this[ih].bind(this),this[nf]=this[nf].bind(this)}};for(let r of[Ad,F0]){let e=r===Ad,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Dd]=n,this[rf].next(this[ih])},r.prototype[ih]=function(n,i,o){let a=this[Dd];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Dd]=o,this[rf].nextv(n,i,this[nf])},r.prototype._all=function(n,i){this[Dd]=i,this[rf].all(n,this[nf])},r.prototype[nf]=function(n,i){let o=this[Dd];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[rf].seek(n,i)},r.prototype._close=function(n){this[rf].close(n)}}lE.DefaultKeyIterator=Ad;lE.DefaultValueIterator=F0});var jF=ce(U0=>{"use strict";h();p();var{AbstractIterator:SJ,AbstractKeyIterator:DJ,AbstractValueIterator:AJ}=Iu(),hE=Zo(),oi=Symbol("nut"),L0=Symbol("undefer"),N0=Symbol("factory"),R0=class extends SJ{constructor(e,t){super(e,t),this[oi]=null,this[N0]=()=>e.iterator(t),this.db.defer(()=>this[L0]())}},B0=class extends DJ{constructor(e,t){super(e,t),this[oi]=null,this[N0]=()=>e.keys(t),this.db.defer(()=>this[L0]())}},O0=class extends AJ{constructor(e,t){super(e,t),this[oi]=null,this[N0]=()=>e.values(t),this.db.defer(()=>this[L0]())}};for(let r of[R0,B0,O0])r.prototype[L0]=function(){this.db.status==="open"&&(this[oi]=this[N0]())},r.prototype._next=function(e){this[oi]!==null?this[oi].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new hE("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[oi]!==null?this[oi].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new hE("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[oi]!==null?this[oi].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new hE("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[oi]!==null?this[oi]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[oi]!==null?this[oi].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};U0.DeferredIterator=R0;U0.DeferredKeyIterator=B0;U0.DeferredValueIterator=O0});var dE=ce(zF=>{"use strict";h();p();var{fromCallback:$F}=xd(),M0=Zo(),{getCallback:CJ,getOptions:IJ}=A0(),K0=Symbol("promise"),yo=Symbol("status"),oh=Symbol("operations"),Cd=Symbol("finishClose"),sh=Symbol("closeCallbacks"),pE=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[oh]=[],this[sh]=[],this[yo]="open",this[Cd]=this[Cd].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[oh].length}put(e,t,n){if(this[yo]!=="open")throw new M0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,c=o.keyEncoding(n&&n.keyEncoding),f=o.valueEncoding(n&&n.valueEncoding),d=c.format;n={...n,keyEncoding:d,valueEncoding:f.format},o!==this.db&&(n.sublevel=null);let m=o.prefixKey(c.encode(e),d),w=f.encode(t);return this._put(m,w,n),this[oh].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[yo]!=="open")throw new M0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),c=a.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),c),t),this[oh].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[yo]!=="open")throw new M0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[oh]=[],this}_clear(){}write(e,t){return t=CJ(e,t),t=$F(t,K0),e=IJ(e),this[yo]!=="open"?this.nextTick(t,new M0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[yo]="writing",this._write(e,n=>{this[yo]="closing",this[sh].push(()=>t(n)),n||this.db.emit("batch",this[oh]),this._close(this[Cd])})),t[K0]}_write(e,t){}close(e){return e=$F(e,K0),this[yo]==="closing"?this[sh].push(e):this[yo]==="closed"?this.nextTick(e):(this[sh].push(e),this[yo]!=="writing"&&(this[yo]="closing",this._close(this[Cd]))),e[K0]}_close(e){this.nextTick(e)}[Cd](){this[yo]="closed",this.db.detachResource(this);let e=this[sh];this[sh]=[];for(let t of e)t()}};zF.AbstractChainedBatch=pE});var WF=ce(qF=>{"use strict";h();p();var{AbstractChainedBatch:TJ}=dE(),kJ=Zo(),ah=Symbol("encoded"),mE=class extends TJ{constructor(e){super(e),this[ah]=[]}_put(e,t,n){this[ah].push({...n,type:"put",key:e,value:t})}_del(e,t){this[ah].push({...t,type:"del",key:e})}_clear(){this[ah]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[ah].length===0?this.nextTick(t):this.db._batch(this[ah],e,t):this.nextTick(t,new kJ("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};qF.DefaultChainedBatch=mE});var GF=ce((r2e,HF)=>{"use strict";h();p();var VF=Zo(),FJ=Object.prototype.hasOwnProperty,RJ=new Set(["lt","lte","gt","gte"]);HF.exports=function(r,e){let t={};for(let n in r)if(!!FJ.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new VF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new VF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});RJ.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var yE=ce((o2e,JF)=>{h();p();var YF;JF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(YF||(YF=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var ZF=ce((u2e,QF)=>{"use strict";h();p();var XF=yE();QF.exports=function(r,...e){e.length===0?XF(r):XF(()=>r(...e))}});var eR=ce(j0=>{"use strict";h();p();var{AbstractIterator:BJ,AbstractKeyIterator:OJ,AbstractValueIterator:LJ}=Iu(),uh=Symbol("unfix"),es=Symbol("iterator"),of=Symbol("handleOne"),Tu=Symbol("handleMany"),wa=Symbol("callback"),Id=class extends BJ{constructor(e,t,n,i){super(e,t),this[es]=n,this[uh]=i,this[of]=this[of].bind(this),this[Tu]=this[Tu].bind(this),this[wa]=null}[of](e,t,n){let i=this[wa];if(e)return i(e);t!==void 0&&(t=this[uh](t)),i(e,t,n)}[Tu](e,t){let n=this[wa];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[uh](o))}n(e,t)}},Td=class extends OJ{constructor(e,t,n,i){super(e,t),this[es]=n,this[uh]=i,this[of]=this[of].bind(this),this[Tu]=this[Tu].bind(this),this[wa]=null}[of](e,t){let n=this[wa];if(e)return n(e);t!==void 0&&(t=this[uh](t)),n(e,t)}[Tu](e,t){let n=this[wa];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[uh](o))}n(e,t)}},kd=class extends LJ{constructor(e,t,n){super(e,t),this[es]=n}};for(let r of[Id,Td])r.prototype._next=function(e){this[wa]=e,this[es].next(this[of])},r.prototype._nextv=function(e,t,n){this[wa]=n,this[es].nextv(e,t,this[Tu])},r.prototype._all=function(e,t){this[wa]=t,this[es].all(e,this[Tu])};for(let r of[kd])r.prototype._next=function(e){this[es].next(e)},r.prototype._nextv=function(e,t,n){this[es].nextv(e,t,n)},r.prototype._all=function(e,t){this[es].all(e,t)};for(let r of[Id,Td,kd])r.prototype._seek=function(e,t){this[es].seek(e,t)},r.prototype._close=function(e){this[es].close(e)};j0.AbstractSublevelIterator=Id;j0.AbstractSublevelKeyIterator=Td;j0.AbstractSublevelValueIterator=kd});var iR=ce((d2e,nR)=>{"use strict";h();p();var gE=Zo(),{Buffer:vE}=dc()||{},{AbstractSublevelIterator:NJ,AbstractSublevelKeyIterator:UJ,AbstractSublevelValueIterator:MJ}=eR(),ba=Symbol("prefix"),tR=Symbol("upperBound"),Fd=Symbol("prefixRange"),Li=Symbol("parent"),wE=Symbol("unfix"),rR=new TextEncoder,KJ={separator:"!"};nR.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new gE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new gE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?KJ:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:c,...f}=e.defaults(o);i=$J(i,a);let d=a.charCodeAt(0)+1,m=n[Li]||n;if(!rR.encode(i).every(T=>T>d&&T<127))throw new gE(`Prefix must use bytes > ${d} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(jJ(m,c),f);let w=(n.prefix||"")+a+i+a,x=w.slice(0,-1)+String.fromCharCode(d);this[Li]=m,this[ba]=new $0(w),this[tR]=new $0(x),this[wE]=new _E,this.nextTick=m.nextTick}prefixKey(n,i){if(i==="utf8")return this[ba].utf8+n;if(n.byteLength===0)return this[ba][i];if(i==="view"){let o=this[ba].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[ba].buffer;return vE.concat([o,n],o.byteLength+n.byteLength)}}[Fd](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[ba][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[tR][i]}get prefix(){return this[ba].utf8}get db(){return this[Li]}_open(n,i){this[Li].open({passive:!0},i)}_put(n,i,o,a){this[Li].put(n,i,o,a)}_get(n,i,o){this[Li].get(n,i,o)}_getMany(n,i,o){this[Li].getMany(n,i,o)}_del(n,i,o){this[Li].del(n,i,o)}_batch(n,i,o){this[Li].batch(n,i,o)}_clear(n,i){this[Fd](n,n.keyEncoding),this[Li].clear(n,i)}_iterator(n){this[Fd](n,n.keyEncoding);let i=this[Li].iterator(n),o=this[wE].get(this[ba].utf8.length,n.keyEncoding);return new NJ(this,n,i,o)}_keys(n){this[Fd](n,n.keyEncoding);let i=this[Li].keys(n),o=this[wE].get(this[ba].utf8.length,n.keyEncoding);return new UJ(this,n,i,o)}_values(n){this[Fd](n,n.keyEncoding);let i=this[Li].values(n);return new MJ(this,n,i)}}return{AbstractSublevel:e}};var jJ=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:bE(r,"utf8"),buffer:bE(r,"buffer"),view:bE(r,"view")}}},bE=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},$0=class{constructor(e){this.utf8=e,this.view=rR.encode(e),this.buffer=vE?vE.from(this.view.buffer,0,this.view.byteLength):{}}},_E=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},$J=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var DE=ce(SE=>{"use strict";h();p();var{supports:zJ}=pF(),{Transcoder:qJ}=EF(),{EventEmitter:WJ}=BF(),{fromCallback:ku}=xd(),ts=Zo(),{AbstractIterator:sf}=Iu(),{DefaultKeyIterator:VJ,DefaultValueIterator:HJ}=KF(),{DeferredIterator:GJ,DeferredKeyIterator:YJ,DeferredValueIterator:JJ}=jF(),{DefaultChainedBatch:oR}=WF(),{getCallback:af,getOptions:Fu}=A0(),z0=GF(),St=Symbol("promise"),va=Symbol("landed"),uf=Symbol("resources"),xE=Symbol("closeResources"),Rd=Symbol("operations"),Bd=Symbol("undefer"),q0=Symbol("deferOpen"),sR=Symbol("options"),Ft=Symbol("status"),cf=Symbol("defaultOptions"),ch=Symbol("transcoder"),W0=Symbol("keyEncoding"),EE=Symbol("valueEncoding"),XJ=()=>{},Od=class extends WJ{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Fu(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[uf]=new Set,this[Rd]=[],this[q0]=!0,this[sR]=a,this[Ft]="opening",this.supports=zJ(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[ch]=new qJ(QJ(this)),this[W0]=this[ch].encoding(n||"utf8"),this[EE]=this[ch].encoding(i||"utf8");for(let c of this[ch].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[cf]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[W0].commonName,valueEncoding:this[EE].commonName}),key:Object.freeze({keyEncoding:this[W0].commonName})},this.nextTick(()=>{this[q0]&&this.open({passive:!1},XJ)})}get status(){return this[Ft]}keyEncoding(e){return this[ch].encoding(e??this[W0])}valueEncoding(e){return this[ch].encoding(e??this[EE])}open(e,t){t=af(e,t),t=ku(t,St),e={...this[sR],...Fu(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[Ft]==="closing"||this[Ft]==="opening"?this.once(va,i?()=>n(i):n):this[Ft]!=="open"?t(new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[Ft]==="opening"?this.once(va,n):this.nextTick(n):this[Ft]==="closed"||this[q0]?(this[q0]=!1,this[Ft]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[Ft]="closed",this[xE](()=>{this.emit(va),n(i)}),this[Bd]();return}this[Ft]="open",this[Bd](),this.emit(va),this[Ft]==="open"&&this.emit("open"),this[Ft]==="open"&&this.emit("ready"),n()})):this[Ft]==="open"?this.nextTick(n):this.once(va,()=>this.open(e,t)),t[St]}_open(e,t){this.nextTick(t)}close(e){e=ku(e,St);let t=n=>{this[Ft]==="opening"||this[Ft]==="closing"?this.once(va,n?t(n):t):this[Ft]!=="closed"?e(new ts("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[Ft]==="open"){this[Ft]="closing",this.emit("closing");let n=i=>{this[Ft]="open",this[Bd](),this.emit(va),t(i)};this[xE](()=>{this._close(i=>{if(i)return n(i);this[Ft]="closed",this[Bd](),this.emit(va),this[Ft]==="closed"&&this.emit("closed"),t()})})}else this[Ft]==="closed"?this.nextTick(t):this.once(va,()=>this.close(e));return e[St]}[xE](e){if(this[uf].size===0)return this.nextTick(e);let t=this[uf].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[uf])o.close(i);n=!1,this[uf].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=af(t,n),n=ku(n,St),t=Fu(t,this[cf].entry),this[Ft]==="opening")return this.defer(()=>this.get(e,t,n)),n[St];if(fh(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),c=o.format,f=a.format;return(t.keyEncoding!==c||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:f})),this._get(this.prefixKey(o.encode(e),c),t,(d,m)=>{if(d)return(d.code==="LEVEL_NOT_FOUND"||d.notFound||/NotFound/i.test(d))&&(d.code||(d.code="LEVEL_NOT_FOUND"),d.notFound||(d.notFound=!0),d.status||(d.status=404)),n(d);try{m=a.decode(m)}catch(w){return n(new ts("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=af(t,n),n=ku(n,St),t=Fu(t,this[cf].entry),this[Ft]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[St];if(fh(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[St];if(e.length===0)return this.nextTick(n,null,[]),n[St];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,c=o.format;(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c}));let f=new Array(e.length);for(let d=0;d<e.length;d++){let m=e[d],w=this._checkKey(m);if(w)return this.nextTick(n,w),n[St];f[d]=this.prefixKey(i.encode(m),a)}return this._getMany(f,t,(d,m)=>{if(d)return n(d);try{for(let w=0;w<m.length;w++)m[w]!==void 0&&(m[w]=o.decode(m[w]))}catch(w){return n(new ts(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=af(n,i),i=ku(i,St),n=Fu(n,this[cf].entry),this[Ft]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[St];if(fh(this,i))return i[St];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[St];let a=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),f=a.format,d=c.format;(n.keyEncoding!==f||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:f,valueEncoding:d}));let m=this.prefixKey(a.encode(e),f),w=c.encode(t);return this._put(m,w,n,x=>{if(x)return i(x);this.emit("put",e,t),i()}),i[St]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=af(t,n),n=ku(n,St),t=Fu(t,this[cf].key),this[Ft]==="opening")return this.defer(()=>this.del(e,t,n)),n[St];if(fh(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[St]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[Ft]==="opening")return new oR(this);if(this[Ft]!=="open")throw new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=af(t,n),n=ku(n,St),t=Fu(t,this[cf].empty),this[Ft]==="opening")return this.defer(()=>this.batch(e,t,n)),n[St];if(fh(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[St];if(e.length===0)return this.nextTick(n),n[St];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...c}=t;for(let f=0;f<e.length;f++){if(typeof e[f]!="object"||e[f]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[St];let d=Object.assign({},e[f]);if(d.type!=="put"&&d.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[St];let m=this._checkKey(d.key);if(m)return this.nextTick(n,m),n[St];let w=d.sublevel!=null?d.sublevel:this,x=w.keyEncoding(d.keyEncoding||o),T=x.format;if(d.key=w.prefixKey(x.encode(d.key),T),d.keyEncoding=T,d.type==="put"){let F=this._checkValue(d.value);if(F)return this.nextTick(n,F),n[St];let N=w.valueEncoding(d.valueEncoding||a);d.value=N.encode(d.value),d.valueEncoding=N.format}w!==this&&(d.sublevel=null),i[f]=d}return this._batch(i,c,f=>{if(f)return n(f);this.emit("batch",e),n()}),n[St]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,PE.defaults(t))}_sublevel(e,t){return new PE(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=af(e,t),t=ku(t,St),e=Fu(e,this[cf].empty),this[Ft]==="opening")return this.defer(()=>this.clear(e,t)),t[St];if(fh(this,t))return t[St];let n=e,i=this.keyEncoding(e.keyEncoding);return e=z0(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[St]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=z0(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[sf.keyEncoding]=t,e[sf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new GJ(this,e);if(this[Ft]!=="open")throw new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new sf(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=z0(e,t),e[sf.keyEncoding]=t,e[sf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new YJ(this,e);if(this[Ft]!=="open")throw new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new VJ(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=z0(e,t),e[sf.keyEncoding]=t,e[sf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new JJ(this,e);if(this[Ft]!=="open")throw new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new HJ(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Rd].push(e)}[Bd](){if(this[Rd].length===0)return;let e=this[Rd];this[Rd]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[uf].add(e)}detachResource(e){this[uf].delete(e)}_chainedBatch(){return new oR(this)}_checkKey(e){if(e==null)return new ts("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ts("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Od.prototype.nextTick=ZF();var{AbstractSublevel:PE}=iR()({AbstractLevel:Od});SE.AbstractLevel=Od;SE.AbstractSublevel=PE;var fh=function(r,e){return r[Ft]!=="open"?(r.nextTick(e,new ts("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},QJ=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var AE=ce(ff=>{"use strict";h();p();ff.AbstractLevel=DE().AbstractLevel;ff.AbstractSublevel=DE().AbstractSublevel;ff.AbstractIterator=Iu().AbstractIterator;ff.AbstractKeyIterator=Iu().AbstractKeyIterator;ff.AbstractValueIterator=Iu().AbstractValueIterator;ff.AbstractChainedBatch=dE().AbstractChainedBatch});var uR=ce((E2e,aR)=>{h();p();aR.exports=eX;var ZJ=yE();function eX(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,c,f=!0,d;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function m(x){function T(){t&&t(x,n),t=null}f?ZJ(T):T()}function w(x,T,F){if(n[x]=F,T&&(c=!0),--o===0||T)m(T);else if(!c&&d<i){let N;a?(N=a[d],d+=1,r[N](function(ue,pe){w(N,ue,pe)})):(N=d,d+=1,r[N](function(ue,pe){w(N,ue,pe)}))}}d=e,o?a?a.some(function(x,T){return r[x](function(F,N){w(x,F,N)}),T===e-1}):r.some(function(x,T){return x(function(F,N){w(T,F,N)}),T===e-1}):m(null),f=!1}});var CE=ce((D2e,cR)=>{"use strict";h();p();cR.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var IE=ce((I2e,fR)=>{"use strict";h();p();var tX=new TextEncoder;fR.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):tX.encode(r)}});var mR=ce(dR=>{"use strict";h();p();var{AbstractIterator:rX}=AE(),lR=CE(),V0=IE(),Ts=Symbol("cache"),_a=Symbol("finished"),Ni=Symbol("options"),xa=Symbol("currentOptions"),lf=Symbol("position"),TE=Symbol("location"),lh=Symbol("first"),hR={},kE=class extends rX{constructor(e,t,n){super(e,n),this[Ts]=[],this[_a]=this.limit===0,this[Ni]=n,this[xa]={...n},this[lf]=void 0,this[TE]=t,this[lh]=!0}_nextv(e,t,n){if(this[lh]=!1,this[_a])return this.nextTick(n,null,[]);if(this[Ts].length>0)return e=Math.min(e,this[Ts].length),this.nextTick(n,null,this[Ts].splice(0,e));this[lf]!==void 0&&(this[Ni].reverse?(this[xa].lt=this[lf],this[xa].lte=void 0):(this[xa].gt=this[lf],this[xa].gte=void 0));let i;try{i=lR(this[xa])}catch{return this[_a]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[TE]],"readonly"),a=o.objectStore(this[TE]),c=[];if(this[Ni].reverse){let f=!this[Ni].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[f](i,"prev").onsuccess=d=>{let m=d.target.result;if(m){let{key:w,value:x}=m;this[lf]=w,c.push([this[Ni].keys&&w!==void 0?V0(w):void 0,this[Ni].values&&x!==void 0?V0(x):void 0]),c.length<e?m.continue():pR(o)}else this[_a]=!0}}else{let f,d,m=()=>{if(f===void 0||d===void 0)return;let w=Math.max(f.length,d.length);w===0||e===1/0?this[_a]=!0:this[lf]=f[w-1],c.length=w;for(let x=0;x<w;x++){let T=f[x],F=d[x];c[x]=[this[Ni].keys&&T!==void 0?V0(T):void 0,this[Ni].values&&F!==void 0?V0(F):void 0]}pR(o)};this[Ni].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=w=>{f=w.target.result,m()}:(f=[],this.nextTick(m)),this[Ni].values?a.getAll(i,e<1/0?e:void 0).onsuccess=w=>{d=w.target.result,m()}:(d=[],this.nextTick(m))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[Ts].length>0){let[t,n]=this[Ts].shift();this.nextTick(e,null,t,n)}else if(this[_a])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[lh]&&(this[lh]=!1,t=1),this._nextv(t,hR,(n,i)=>{if(n)return e(n);this[Ts]=i,this._next(e)})}}_all(e,t){this[lh]=!1;let n=this[Ts].splice(0,this[Ts].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,hR,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[lh]=!0,this[Ts]=[],this[_a]=!1,this[lf]=void 0,this[xa]={...this[Ni]};let n;try{n=lR(this[Ni])}catch{this[_a]=!0;return}n!==null&&!n.includes(e)?this[_a]=!0:this[Ni].reverse?this[xa].lte=e:this[xa].gte=e}};dR.Iterator=kE;function pR(r){typeof r.commit=="function"&&r.commit()}});var gR=ce((O2e,yR)=>{"use strict";h();p();yR.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),c=a.objectStore(t),f=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let d=c.openKeyCursor?"openKeyCursor":"openCursor",m=i.reverse?"prev":"next";c[d](n,m).onsuccess=function(w){let x=w.target.result;x&&(c.delete(x.key).onsuccess=function(){(i.limit<=0||++f<i.limit)&&x.continue()})}}});var ER=ce(xR=>{"use strict";h();p();var{AbstractLevel:nX}=AE(),wR=Zo(),iX=uR(),{fromCallback:oX}=xd(),{Iterator:sX}=mR(),bR=IE(),aX=gR(),uX=CE(),_R="level-js-",Ld=Symbol("idb"),FE=Symbol("namePrefix"),Ea=Symbol("location"),RE=Symbol("version"),hf=Symbol("store"),Nd=Symbol("onComplete"),vR=Symbol("promise"),H0=class extends nX{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new wR("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ea]=e,this[FE]=i??_R,this[RE]=parseInt(o||1,10),this[Ld]=null}get location(){return this[Ea]}get namePrefix(){return this[FE]}get version(){return this[RE]}get db(){return this[Ld]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[FE]+this[Ea],this[RE]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Ld]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[Ea])||o.createObjectStore(this[Ea])}}[hf](e){return this[Ld].transaction([this[Ea]],e).objectStore(this[Ea])}[Nd](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[hf]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[Nd](o,function(a,c){if(a)return n(a);if(c===void 0)return n(new wR("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,bR(c))})}_getMany(e,t,n){let i=this[hf]("readonly"),o=e.map(a=>c=>{let f;try{f=i.get(a)}catch(d){return c(d)}f.onsuccess=()=>{let d=f.result;c(null,d===void 0?d:bR(d))},f.onerror=d=>{d.stopPropagation(),c(f.error)}});iX(o,16,n)}_del(e,t,n){let i=this[hf]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[Nd](o,n)}_put(e,t,n,i){let o=this[hf]("readwrite"),a;try{a=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[Nd](a,i)}_iterator(e){return new sX(this,this[Ea],e)}_batch(e,t,n){let i=this[hf]("readwrite"),o=i.transaction,a=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function f(){let d=e[a++],m=d.key,w;try{w=d.type==="del"?i.delete(m):i.put(d.value,m)}catch(x){c=x,o.abort();return}a<e.length?w.onsuccess=f:typeof o.commit=="function"&&o.commit()}f()}_clear(e,t){let n,i;try{n=uX(e)}catch{return this.nextTick(t)}if(e.limit>=0)return aX(this,this[Ea],n,e,t);try{let o=this[hf]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[Nd](i,t)}_close(e){this[Ld].close(),this.nextTick(e)}};H0.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=_R),t=oX(t,vR);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[vR]};xR.BrowserLevel=H0});var SR=ce(PR=>{h();p();PR.Level=ER().BrowserLevel});h();p();h();p();h();p();h();p();h();p();h();p();function Ju(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Rh(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ju(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Bh(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Rh(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Ju(t)}h();p();h();p();h();p();h();p();var yb={};Et(yb,{identity:()=>P7});h();p();h();p();h();p();function b7(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var N=0,ue=0,pe=0,De=F.length;pe!==De&&F[pe]===0;)pe++,N++;for(var re=(De-pe)*m+1>>>0,be=new Uint8Array(re);pe!==De;){for(var Pe=F[pe],Y=0,ge=re-1;(Pe!==0||Y<ue)&&ge!==-1;ge--,Y++)Pe+=256*be[ge]>>>0,be[ge]=Pe%c>>>0,Pe=Pe/c>>>0;if(Pe!==0)throw new Error("Non-zero carry");ue=Y,pe++}for(var _e=re-ue;_e!==re&&be[_e]===0;)_e++;for(var Me=f.repeat(N);_e<re;++_e)Me+=r.charAt(be[_e]);return Me}function x(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var N=0;if(F[N]!==" "){for(var ue=0,pe=0;F[N]===f;)ue++,N++;for(var De=(F.length-N)*d+1>>>0,re=new Uint8Array(De);F[N];){var be=t[F.charCodeAt(N)];if(be===255)return;for(var Pe=0,Y=De-1;(be!==0||Pe<pe)&&Y!==-1;Y--,Pe++)be+=c*re[Y]>>>0,re[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");pe=Pe,N++}if(F[N]!==" "){for(var ge=De-pe;ge!==De&&re[ge]===0;)ge++;for(var _e=new Uint8Array(ue+(De-ge)),Me=ue;ge!==De;)_e[Me++]=re[ge++];return _e}}}function T(F){var N=x(F);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:x,decode:T}}var v7=b7,_7=v7,xD=_7;h();p();var nZ=new Uint8Array(0);var ED=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Ws=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var PD=r=>new TextEncoder().encode(r),SD=r=>new TextDecoder().decode(r);var hb=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},pb=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AD(this,e)}},db=class{constructor(e){this.decoders=e}or(e){return AD(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},AD=(r,e)=>new db({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),mb=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new hb(e,t,n),this.decoder=new pb(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Tf=({name:r,prefix:e,encode:t,decode:n})=>new mb(r,e,t,n),Ma=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=xD(t,e);return Tf({prefix:r,name:e,encode:n,decode:o=>Ws(i(o))})},x7=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},E7=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Dr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Tf({prefix:e,name:r,encode(i){return E7(i,n,t)},decode(i){return x7(i,n,t,r)}});var P7=Tf({prefix:"\0",name:"identity",encode:r=>SD(r),decode:r=>PD(r)});var gb={};Et(gb,{base2:()=>S7});h();p();var S7=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var wb={};Et(wb,{base8:()=>D7});h();p();var D7=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bb={};Et(bb,{base10:()=>A7});h();p();var A7=Ma({prefix:"9",name:"base10",alphabet:"0123456789"});var vb={};Et(vb,{base16:()=>C7,base16upper:()=>I7});h();p();var C7=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),I7=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _b={};Et(_b,{base32:()=>kf,base32hex:()=>R7,base32hexpad:()=>O7,base32hexpadupper:()=>L7,base32hexupper:()=>B7,base32pad:()=>k7,base32padupper:()=>F7,base32upper:()=>T7,base32z:()=>N7});h();p();var kf=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),T7=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),k7=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F7=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),R7=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),B7=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),O7=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),L7=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),N7=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xb={};Et(xb,{base36:()=>U7,base36upper:()=>M7});h();p();var U7=Ma({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),M7=Ma({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Eb={};Et(Eb,{base58btc:()=>us,base58flickr:()=>K7});h();p();var us=Ma({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),K7=Ma({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pb={};Et(Pb,{base64:()=>j7,base64pad:()=>$7,base64url:()=>z7,base64urlpad:()=>q7});h();p();var j7=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$7=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),z7=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),q7=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Sb={};Et(Sb,{base256emoji:()=>Y7});h();p();var CD=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),W7=CD.reduce((r,e,t)=>(r[t]=e,r),[]),V7=CD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function H7(r){return r.reduce((e,t)=>(e+=W7[t],e),"")}function G7(r){let e=[];for(let t of r){let n=V7[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Y7=Tf({prefix:"\u{1F680}",name:"base256emoji",encode:H7,decode:G7});var Ib={};Et(Ib,{sha256:()=>dK,sha512:()=>mK});h();p();h();p();h();p();h();p();h();p();var J7=kD,ID=128,X7=127,Q7=~X7,Z7=Math.pow(2,31);function kD(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Z7;)e[t++]=r&255|ID,r/=128;for(;r&Q7;)e[t++]=r&255|ID,r>>>=7;return e[t]=r|0,kD.bytes=t-n+1,e}var eK=Db,tK=128,TD=127;function Db(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Db.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&TD)<<i:(a&TD)*Math.pow(2,i),i+=7}while(a>=tK);return Db.bytes=o-n,t}var rK=Math.pow(2,7),nK=Math.pow(2,14),iK=Math.pow(2,21),oK=Math.pow(2,28),sK=Math.pow(2,35),aK=Math.pow(2,42),uK=Math.pow(2,49),cK=Math.pow(2,56),fK=Math.pow(2,63),lK=function(r){return r<rK?1:r<nK?2:r<iK?3:r<oK?4:r<sK?5:r<aK?6:r<uK?7:r<cK?8:r<fK?9:10},hK={encode:J7,decode:eK,encodingLength:lK},pK=hK,Oh=pK;var Lh=(r,e=0)=>[Oh.decode(r,e),Oh.decode.bytes],Ff=(r,e,t=0)=>(Oh.encode(r,e,t),e),Rf=r=>Oh.encodingLength(r);var Xu=(r,e)=>{let t=e.byteLength,n=Rf(r),i=n+Rf(t),o=new Uint8Array(i+t);return Ff(r,o,0),Ff(t,o,n),o.set(e,i),new Bf(r,t,e,o)},FD=r=>{let e=Ws(r),[t,n]=Lh(e),[i,o]=Lh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Bf(t,i,a,e)},RD=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&ED(r.bytes,e.bytes),Bf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Cb=({name:r,code:e,encode:t})=>new Ab(r,e,t),Ab=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Xu(this.code,t):t.then(n=>Xu(this.code,n))}else throw Error("Unknown type, must be binary type")}};var OD=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),dK=Cb({name:"sha2-256",code:18,encode:OD("SHA-256")}),mK=Cb({name:"sha2-512",code:19,encode:OD("SHA-512")});var Tb={};Et(Tb,{identity:()=>wK});h();p();var LD=0,yK="identity",ND=Ws,gK=r=>Xu(LD,ND(r)),wK={code:LD,name:yK,encode:ND,digest:gK};h();p();h();p();var uee=new TextEncoder,cee=new TextDecoder;h();p();h();p();var Yr=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Mm,byteLength:Mm,code:Um,version:Um,multihash:Um,bytes:Um,_baseCache:Mm,asCID:Mm})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Uh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==PK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Yr.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Xu(e,t);return Yr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&RD(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return xK(t,i,e||us.encoder);default:return EK(t,i,e||kf.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return DK(/^0\.0/,AK),!!(e&&(e[MD]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Yr)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new Yr(t,n,i,o||UD(t,n,i.bytes))}else if(e!=null&&e[MD]===!0){let{version:t,multihash:n,code:i}=e,o=FD(n);return Yr.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Uh)throw new Error(`Version 0 CID must use dag-pb (code: ${Uh}) block encoding`);return new Yr(e,t,n,n.bytes)}case 1:{let i=UD(e,t,n.bytes);return new Yr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Yr.create(0,Uh,e)}static createV1(e,t){return Yr.create(1,e,t)}static decode(e){let[t,n]=Yr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Yr.inspectBytes(e),n=t.size-t.multihashSize,i=Ws(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Bf(t.multihashCode,t.digestSize,o,i);return[t.version===0?Yr.createV0(a):Yr.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,x]=Lh(e.subarray(t));return t+=x,w},i=n(),o=Uh;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=_K(e,t),o=Yr.decode(i);return o._baseCache.set(n,e),o}},_K=(r,e)=>{switch(r[0]){case"Q":{let t=e||us;return[us.prefix,t.decode(`${us.prefix}${r}`)]}case us.prefix:{let t=e||us;return[us.prefix,t.decode(r)]}case kf.prefix:{let t=e||kf;return[kf.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},xK=(r,e,t)=>{let{prefix:n}=t;if(n!==us.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},EK=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Uh=112,PK=18,UD=(r,e,t)=>{let n=Rf(r),i=n+Rf(e),o=new Uint8Array(i+t.byteLength);return Ff(r,o,0),Ff(e,o,n),o.set(t,i),o},MD=Symbol.for("@ipld/js-cid/CID"),Um={writable:!1,configurable:!1,enumerable:!0},Mm={writable:!1,enumerable:!1,configurable:!1},SK="0.0.0-dev",DK=(r,e)=>{if(r.test(SK))console.warn(e);else throw new Error(e)},AK=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var kb={...yb,...gb,...wb,...bb,...vb,..._b,...xb,...Eb,...Pb,...Sb},Eee={...Ib,...Tb};function jD(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var KD=jD("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Fb=jD("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Rh(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),CK={utf8:KD,"utf-8":KD,hex:kb.base16,latin1:Fb,ascii:Fb,binary:Fb,...kb},Km=CK;function Be(r,e="utf8"){let t=Km[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ju(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function Ge(r,e="utf8"){let t=Km[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();var zE=Ze(jm(),1);h();p();h();p();var Rn={};Et(Rn,{Kind:()=>zD,RootBranch:()=>Do,appData:()=>jh,combine:()=>Of,directory:()=>Ar,file:()=>Mh,fromPosix:()=>$h,isDirectory:()=>hn,isFile:()=>cs,isOnRootBranch:()=>Lf,isPartition:()=>zh,isRootDirectory:()=>qD,isSameKind:()=>Bb,isSamePartition:()=>$m,kind:()=>zm,log:()=>Ao,map:()=>Ob,parent:()=>Lb,removePartition:()=>Qu,root:()=>Kh,terminus:()=>Nb,toPosix:()=>Cr,unwrap:()=>Zt,withPartition:()=>qm});h();p();var Do=(c=>(c.Public="public",c.Pretty="p",c.Private="private",c.PrivateLog="privateLog",c.Shared="shared",c.SharedCounter="sharedCounter",c.Version="version",c))(Do||{}),zD=(t=>(t.Directory="directory",t.File="file",t))(zD||{});function Ar(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:r}}function Mh(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:r}}function Kh(){return{directory:[]}}function jh(r,e){let t=Ar("private","Apps",r.creator,r.name);return e?Of(t,e):t}function $h(r){let e=r.replace(/^\/+/,"").split("/");return r.endsWith("/")?{directory:e.slice(0,-1)}:r===""?Kh():{file:e}}function Cr(r,{absolute:e}={absolute:!1}){let t=e?"/":"",n=Zt(r).join("/");return hn(r)?t+n+(n.length?"/":""):t+n}function Of(r,e){return Ob(t=>Zt(r).concat(t),e)}function hn(r){return!!r.directory}function cs(r){return!!r.file}function zh(r,e){return Zt(e)[0]===r}function Lf(r,e){return Zt(e)[0]===r}function qD(r){return r.directory.length===0}function $m(r,e){return Zt(r)[0]===Zt(e)[0]}function Bb(r,e){return hn(r)&&hn(e)?!0:!!(cs(r)&&cs(e))}function zm(r){return hn(r)?"directory":"file"}function Ob(r,e){return hn(e)?{directory:r(e.directory)}:cs(e)?{file:r(e.file)}:e}function Lb(r){return hn(r)&&qD(r)?null:Ar(...Zt(r).slice(0,-1))}function Qu(r){return Ob(e=>hn(r)||e.length>1?e.slice(1):e,r)}function Nb(r){let e=Zt(r);return e.length<1?null:e[e.length-1]}function Zt(r){if(hn(r))return r.directory;if(cs(r))return r.file;throw new Error("Path is neither a directory or a file")}function qm(r,e){return Of(Ar(r),e)}function Ao(r){return`[ ${r.join(", ")} ]`}async function Wm({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:bareNameFilter:${await WD(r,t)}`}async function Zu({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:readKey:${await WD(r,t)}`}async function WD(r,e){return Ge(await r.hash.sha256(Be("/"+Zt(e).join("/"),"utf8")),"base64pad")}h();p();var Vm={fs:{private:[Kh()],public:[Kh()]}};function VD(r){return`${r.creator}/${r.name}`}function Hm(r){let e=[];return r.app&&e.push(jh(r.app)),r.fs?.private&&(e=e.concat(r.fs?.private.map(t=>qm("private",t)))),r.fs?.public&&(e=e.concat(r.fs?.public.map(t=>qm("public",t)))),e}h();p();var En={};Et(En,{build:()=>Jr,decode:()=>Xn,encode:()=>rn,encodeHeader:()=>Qm,encodePayload:()=>Zm,isExpired:()=>Hs,isSelfSigned:()=>Zb,isValid:()=>$a,rootIssuer:()=>za,sign:()=>m2});h();p();h();p();h();p();h();p();var Gm={};Et(Gm,{equal:()=>TK});h();p();var TK=(r,e)=>{let t=new Uint8Array(r),n=new Uint8Array(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0};var Vs={};Et(Vs,{decode:()=>HD,encode:()=>GD,makeUrlSafe:()=>YD,makeUrlUnsafe:()=>JD,urlDecode:()=>kK,urlEncode:()=>Mb});h();p();function HD(r){return Ge(Be(r,"base64pad"))}function GD(r){return Ge(Be(r),"base64pad")}function kK(r){return HD(JD(r))}function Mb(r){return YD(GD(r))}function YD(r){return r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function JD(r){return r.replace(/_/g,"/").replace(/-/g,"+")}h();p();var XD=async r=>new Promise((e,t)=>{let n=()=>t(new Error("Failed to read file")),i=new FileReader;i.addEventListener("load",o=>{let a=o?.target?.result||null;if(a==null){n();return}if(typeof a=="string"){e(Be(a));return}e(new Uint8Array(a))}),i.addEventListener("error",()=>i.abort()),i.addEventListener("abort",n),i.readAsArrayBuffer(r)});h();p();h();p();h();p();h();p();var FK=t2,ZD=128,RK=127,BK=~RK,OK=Math.pow(2,31);function t2(r,e,t){e=e||[],t=t||0;for(var n=t;r>=OK;)e[t++]=r&255|ZD,r/=128;for(;r&BK;)e[t++]=r&255|ZD,r>>>=7;return e[t]=r|0,t2.bytes=t-n+1,e}var LK=Kb,NK=128,e2=127;function Kb(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Kb.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&e2)<<i:(a&e2)*Math.pow(2,i),i+=7}while(a>=NK);return Kb.bytes=o-n,t}var UK=Math.pow(2,7),MK=Math.pow(2,14),KK=Math.pow(2,21),jK=Math.pow(2,28),$K=Math.pow(2,35),zK=Math.pow(2,42),qK=Math.pow(2,49),WK=Math.pow(2,56),VK=Math.pow(2,63),HK=function(r){return r<UK?1:r<MK?2:r<KK?3:r<jK?4:r<$K?5:r<zK?6:r<qK?7:r<WK?8:r<VK?9:10},GK={encode:FK,decode:LK,encodingLength:HK},YK=GK,qh=YK;var Wh=(r,e=0)=>[qh.decode(r,e),qh.decode.bytes],Nf=(r,e,t=0)=>(qh.encode(r,e,t),e),Uf=r=>qh.encodingLength(r);h();p();h();p();var Dte=new Uint8Array(0);var r2=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Co=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var n2=r=>new TextEncoder().encode(r),i2=r=>new TextDecoder().decode(r);var Ka=(r,e)=>{let t=e.byteLength,n=Uf(r),i=n+Uf(t),o=new Uint8Array(i+t);return Nf(r,o,0),Nf(t,o,n),o.set(e,i),new Mf(r,t,e,o)},pn=r=>{let e=Co(r),[t,n]=Wh(e),[i,o]=Wh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Mf(t,i,a,e)},o2=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&r2(r.bytes,t.bytes)}},Mf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Vb={};Et(Vb,{base58btc:()=>Tr,base58flickr:()=>t9});h();p();h();p();h();p();function JK(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var N=0,ue=0,pe=0,De=F.length;pe!==De&&F[pe]===0;)pe++,N++;for(var re=(De-pe)*m+1>>>0,be=new Uint8Array(re);pe!==De;){for(var Pe=F[pe],Y=0,ge=re-1;(Pe!==0||Y<ue)&&ge!==-1;ge--,Y++)Pe+=256*be[ge]>>>0,be[ge]=Pe%c>>>0,Pe=Pe/c>>>0;if(Pe!==0)throw new Error("Non-zero carry");ue=Y,pe++}for(var _e=re-ue;_e!==re&&be[_e]===0;)_e++;for(var Me=f.repeat(N);_e<re;++_e)Me+=r.charAt(be[_e]);return Me}function x(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var N=0;if(F[N]!==" "){for(var ue=0,pe=0;F[N]===f;)ue++,N++;for(var De=(F.length-N)*d+1>>>0,re=new Uint8Array(De);F[N];){var be=t[F.charCodeAt(N)];if(be===255)return;for(var Pe=0,Y=De-1;(be!==0||Pe<pe)&&Y!==-1;Y--,Pe++)be+=c*re[Y]>>>0,re[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");pe=Pe,N++}if(F[N]!==" "){for(var ge=De-pe;ge!==De&&re[ge]===0;)ge++;for(var _e=new Uint8Array(ue+(De-ge)),Me=ue;ge!==De;)_e[Me++]=re[ge++];return _e}}}function T(F){var N=x(F);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:x,decode:T}}var XK=JK,QK=XK,s2=QK;h();p();var $b=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},zb=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return a2(this,e)}},qb=class{constructor(e){this.decoders=e}or(e){return a2(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},a2=(r,e)=>new qb({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Wb=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new $b(e,t,n),this.decoder=new zb(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Kf=({name:r,prefix:e,encode:t,decode:n})=>new Wb(r,e,t,n),ja=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=s2(t,e);return Kf({prefix:r,name:e,encode:n,decode:o=>Co(i(o))})},ZK=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},e9=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Ir=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Kf({prefix:e,name:r,encode(i){return e9(i,n,t)},decode(i){return ZK(i,n,t,r)}});var Tr=ja({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),t9=ja({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Gb={};Et(Gb,{base32:()=>Kt,base32hex:()=>i9,base32hexpad:()=>s9,base32hexpadupper:()=>a9,base32hexupper:()=>o9,base32pad:()=>Hb,base32padupper:()=>n9,base32upper:()=>r9,base32z:()=>u9});h();p();var Kt=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),r9=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Hb=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),n9=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i9=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),o9=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),s9=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),a9=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),u9=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});h();p();var c9=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return l9(t,Yb(r),e||Tr.encoder);default:return h9(t,Yb(r),e||Kt.encoder)}},u2=new WeakMap,Yb=r=>{let e=u2.get(r);if(e==null){let t=new Map;return u2.set(r,t),t}return e},we=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Vh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return we.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ka(e,t);return we.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return we.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&o2(e.multihash,n.multihash)}toString(e){return c9(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof we)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:a}=t;return new we(n,i,o,a||c2(n,i,o.bytes))}else if(t[d9]===!0){let{version:n,multihash:i,code:o}=t,a=pn(i);return we.create(n,o,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Vh)throw new Error(`Version 0 CID must use dag-pb (code: ${Vh}) block encoding`);return new we(e,t,n,n.bytes)}case 1:{let i=c2(e,t,n.bytes);return new we(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return we.create(0,Vh,e)}static createV1(e,t){return we.create(1,e,t)}static decode(e){let[t,n]=we.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=we.inspectBytes(e),n=t.size-t.multihashSize,i=Co(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Mf(t.multihashCode,t.digestSize,o,i);return[t.version===0?we.createV0(a):we.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,x]=Wh(e.subarray(t));return t+=x,w},i=n(),o=Vh;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=f9(e,t),o=we.decode(i);return Yb(o).set(n,e),o}},f9=(r,e)=>{switch(r[0]){case"Q":{let t=e||Tr;return[Tr.prefix,t.decode(`${Tr.prefix}${r}`)]}case Tr.prefix:{let t=e||Tr;return[Tr.prefix,t.decode(r)]}case Kt.prefix:{let t=e||Kt;return[Kt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},l9=(r,e,t)=>{let{prefix:n}=t;if(n!==Tr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},h9=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Vh=112,p9=18,c2=(r,e,t)=>{let n=Uf(r),i=n+Uf(e),o=new Uint8Array(i+t.byteLength);return Nf(r,o,0),Nf(e,o,n),o.set(t,i),o},d9=Symbol.for("@ipld/js-cid/CID");h();p();function ht(r,e){return typeof r=="object"&&r!=null&&e in r}var m9=r=>r!==void 0,Jm=r=>r!==null;var f2=r=>m9(r)&&Jm(r),Jb=r=>typeof r=="boolean";function Hh(r){return ht(r,"algorithm")&&ht(r,"extractable")&&ht(r,"type")}var Jn=r=>typeof r=="number",Ht=r=>typeof r=="string",Ye=r=>r!==null&&typeof r=="object",l2=r=>typeof Blob>"u"?!1:r instanceof Blob||Ye(r)&&r?.constructor?.name==="Blob";var Xb="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";function Ue(r){let e=we.asCID(r);if(e)return e;if(typeof r=="string")return we.parse(r);if(typeof r=="object"&&"version"in r&&"code"in r&&"multihash"in r)return we.create(r.version,r.code,r.multihash);if(typeof r=="object"&&ht(r,"version")&&ht(r,"code")&&Jn(r.code)&&ht(r,"hash")&&Ye(r.hash)&&Object.values(r.hash).every(Jn)){let t=pn(new Uint8Array(Object.values(r.hash)));return we.create(r.version,r.code,t)}if(typeof r=="object"&&ht(r,"/")&&typeof r["/"]=="string")return we.parse(r["/"]);throw new Error(`Could not decode CID: ${JSON.stringify(r)}`)}function pi(r){return typeof r=="string"?r:r.toString()}h();p();h();p();var Qb=(r,e)=>{let{[e]:t,...n}=r;return n};var h2=(r,e)=>{let t={};return Object.entries(r).forEach(([n,i])=>{t[n]=e(i,n)}),t};h();p();var ec="0.37.2",p2="0.1.7";h();p();var y9=typeof self<"u"&&typeof self.location=="object",Gh=r=>{if(!y9)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${r}`)};h();p();h();p();var Xm="did:key:z",d2=(r,e)=>Gm.equal(e,r.slice(0,e.byteLength));function jf(r,e,t){let n=r.did.keyTypes[t]?.magicBytes;if(n===null)throw new Error(`Key type '${t}' not supported, available types: ${Object.keys(r.did.keyTypes).join(", ")}`);let i=Bh([n,e]);return Xm+Ge(i,"base58btc")}function tc(r,e){if(!e.startsWith(Xm))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let t=e.substr(Xm.length),n=Be(t,"base58btc"),i=Object.entries(r.did.keyTypes).find(([o,a])=>d2(n,a.magicBytes));if(!i)throw new Error("Unsupported key algorithm.");return{publicKey:n.slice(i[1].magicBytes.length),type:i[0]}}async function Jr({addSignature:r=!0,audience:e,dependencies:t,facts:n=[],issuer:i,lifetimeInSeconds:o=120,expiration:a,potency:c="APPEND",proof:f,resource:d}){let m=Math.floor(Date.now()/1e3),w=f?typeof f=="string"?Xn(f):f:null,x={alg:await t.crypto.keystore.getUcanAlgorithm(),typ:"JWT",uav:"1.0.0"},T=a||m+o,F=m-120;if(w){let pe=w.payload;T=Math.min(pe.exp,T),F=Math.max(pe.nbf,F)}let N={aud:e,exp:T,fct:n,iss:i,nbf:F,prf:f?typeof f=="string"?f:rn(f):null,ptc:c,rsc:d||(w?w.payload.rsc:"*")},ue=r?await m2(t.crypto,x,N):null;return{header:x,payload:N,signature:ue}}function Xn(r){let e=r.split("."),t=JSON.parse(Vs.urlDecode(e[0])),n=JSON.parse(Vs.urlDecode(e[1]));return{header:t,payload:n,signature:e[2]||null}}function rn(r){let e=Qm(r.header),t=Zm(r.payload);return e+"."+t+"."+r.signature}function Qm(r){return Vs.urlEncode(JSON.stringify(r))}function Zm(r){return Vs.urlEncode(JSON.stringify({...r}))}function Hs(r){return r.payload.exp<=Math.floor(Date.now()/1e3)}function Zb(r){return r.payload.iss===r.payload.aud}async function $a(r,e){try{let t=Qm(e.header),n=Zm(e.payload),{publicKey:i,type:o}=tc(r,e.payload.iss),c=await r.did.keyTypes[o].verify({publicKey:i,message:Be(`${t}.${n}`,"utf8"),signature:Be(e.signature||"","base64url")});if(!c)return c;if(!e.payload.prf)return!0;let f=Xn(e.payload.prf),d=f.payload.aud===e.payload.iss;return d&&await $a(r,f)}catch{return!1}}function za(r,e=0){let t=typeof r=="string"?w9(r,e):r.payload;return t.prf?za(t.prf,e+1):t.iss}async function m2(r,e,t){let n=Qm(e),i=Zm(t);return Ge(await r.keystore.sign(Be(`${n}.${i}`,"utf8")),"base64url")}function w9(r,e){try{return JSON.parse(Vs.urlDecode(r.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${e} level${e===1?"":"s"} deep): \`${r}\``)}}h();p();var rc=class{constructor({storage:e,storageName:t}){this.memoryCache=[],this.dictionary={},this.storage=e,this.storageName=t}static async create(e){let t=new this.prototype.constructor(e);return t.memoryCache=await t.getAll(),t.dictionary=t.toDictionary(t.memoryCache),t}async add(e){let t=Array.isArray(e)?e:[e];this.memoryCache=[...this.memoryCache,...t],this.dictionary=this.toDictionary(this.memoryCache),await this.storage.setItem(this.storageName,this.memoryCache.map(this.toJSON).join("|||"))}clear(){return this.memoryCache=[],this.dictionary={},this.storage.removeItem(this.storageName)}find(e){return this.memoryCache.find(e)||null}getByIndex(e){return this.memoryCache[e]}async getAll(){let e=await this.storage.getItem(this.storageName);return Ht(e)?e.split("|||").map(this.fromJSON):[]}indexOf(e){return this.memoryCache.indexOf(e)}length(){return this.memoryCache.length}fromJSON(e){return JSON.parse(e)}toJSON(e){return JSON.stringify(e)}getByKey(e){return this.dictionary[e]}toDictionary(e){return e.reduce((t,n,i)=>({...t,[i.toString()]:n}),{})}};function y2({storage:r}){return ev.create({storage:r,storageName:r.KEYS.UCANS})}var ev=class extends rc{constructor(e){super(e)}fromJSON(e){return Xn(e)}toJSON(e){return rn(e)}toDictionary(e){return e.reduce((t,n)=>({...t,[rv(n.payload.rsc)]:n}),{})}async lookupFilesystemUcan(e){let t=this.getByKey("*");if(t)return t;let n=e==="*",i=n?!1:hn(e),o=n?["*"]:Zt(e),a=tv();return o.reduce((c,f,d)=>{if(c)return c;let m=d===0,w=o.slice(0,o.length-d),x=Cr(m&&!i?Mh(...w):Ar(...w));return this.getByKey(`${a}${x}`)||null},null)}async lookupAppUcan(e){return this.getByKey("*")||this.getByKey("app:*")||this.getByKey(`app:${e}`)}},g2="wnfs";function tv(r){return g2+":"}function rv(r){if(typeof r!="object")return r;let e=Array.from(Object.entries(r))[0];return e[0]+":"+(e[0]===g2?e[1].replace(/^\/+/,""):e[1])}var $f="capabilities";async function b2({capabilities:r,crypto:e,reference:t,storage:n}){if(r.ucans.length===0)throw new Error("Expected at least one UCAN");await v9({reference:t,ucans:r.ucans});let i=await t.didRoot.lookup(r.username);await r.fileSystemSecrets.reduce(async(o,a)=>{await o,await b9({accountDID:i,crypto:e,storage:n,bareNameFilter:a.bareNameFilter,readKey:a.readKey,path:a.path})},Promise.resolve())}async function b9({accountDID:r,bareNameFilter:e,crypto:t,path:n,readKey:i,storage:o}){let a=await Zu({accountDID:r,crypto:t,path:n}),c=await Wm({accountDID:r,crypto:t,path:n});await t.keystore.importSymmKey(i,a),await o.setItem(c,e)}async function v9({reference:r,ucans:e}){await r.repositories.ucans.add(e)}function v2(r,{app:e,fs:t,raw:n}){let i,o=tv(),a=r.getByKey("*");if(a&&!Hs(a)&&!Zb(a))return a;if(e){let c=o+Cr(jh(e)),f=r.getByKey(c);if(!f||Hs(f))return null;i=f}return t?.private&&!t.private.every(f=>{let d=`${o}private/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Hs(m)})||t?.public&&!t.public.every(f=>{let d=`${o}public/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Hs(m)})||n&&!n.every(f=>{let d=rv(f.rsc),m=r.getByKey(d);return i=m,m&&!Hs(m)})?null:i||null}async function _2(r,e,t){return Hm(t).reduce((n,i)=>n.then(async o=>{if(o===!1||zh("public",i))return o;let a=await Zu({accountDID:e,crypto:r,path:i});return r.keystore.keyExists(a)}),Promise.resolve(!0))}h();p();async function To(r){let e=await r.keystore.publicExchangeKey(),t=await r.keystore.getAlgorithm();return jf(r,e,t)}async function Gt(r){let e=await r.keystore.publicWriteKey(),t=await r.keystore.getAlgorithm();return jf(r,e,t)}h();p();h();p();var qa=class{constructor(){this.events=new Map;this.on=this.addListener;this.off=this.removeListener}addListener(e,t){let n=this.events.get(e);n===void 0?this.events.set(e,new Set([t])):n.add(t)}removeListener(e,t){let n=this.events.get(e);n!==void 0&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>{n.apply(this,[t])})}};function ey(){return new qa}function x2(r){return{addListener:r.addListener.bind(r),removeListener:r.removeListener.bind(r),on:r.on.bind(r),off:r.off.bind(r)}}function E2(r,e){let t=ey(),n=r.emit,i=e.emit;return r.emit=(o,a)=>{n.call(r,o,a),t.emit(o,a)},e.emit=(o,a)=>{i.call(e,o,a),t.emit(o,a)},t}h();p();var Bn={};Et(Bn,{agent:()=>Gt,didToPublicKey:()=>tc,exchange:()=>To,publicKeyToDid:()=>jf,sharing:()=>To,ucan:()=>Gt,write:()=>Gt});h();p();async function P2(r){let e={extensionId:null,connected:!1},t;return{connect:async n=>{e=await P9(n,r),t||(t=D9(e,r))},disconnect:async n=>{e=await S9(n,r),A9(r,t)}}}async function P9(r,e){let t=await zf(e);return globalThis.postMessage({id:r,type:"connect",timestamp:Date.now(),state:t}),{extensionId:r,connected:!0}}async function S9(r,e){let t=await zf(e);return globalThis.postMessage({id:r,type:"disconnect",timestamp:Date.now(),state:t}),{extensionId:r,connected:!1}}function D9(r,e){async function t(a){let{root:c,path:f}=a,d=await zf(e);globalThis.postMessage({id:r.extensionId,type:"fileSystem",timestamp:Date.now(),state:d,detail:{type:"local-change",root:c.toString(),path:f}})}async function n(a){let{root:c}=a,f=await zf(e);globalThis.postMessage({id:r.extensionId,type:"fileSystem",timestamp:Date.now(),state:f,detail:{type:"publish",root:c.toString()}})}async function i(a){let{session:c}=a;e={...e,session:c};let f=await zf(e);globalThis.postMessage({id:r.extensionId,type:"session",timestamp:Date.now(),state:f,detail:{type:"create",username:c.username}})}async function o(a){let{username:c}=a;e={...e,session:null};let f=await zf(e);globalThis.postMessage({id:r.extensionId,type:"session",timestamp:Date.now(),state:f,detail:{type:"destroy",username:c}})}return e.eventEmitters.fileSystem.on("fileSystem:local-change",t),e.eventEmitters.fileSystem.on("fileSystem:publish",n),e.eventEmitters.session.on("session:create",i),e.eventEmitters.session.on("session:destroy",o),{handleLocalChange:t,handlePublish:n,handleSessionCreate:i,handleSessionDestroy:o}}function A9(r,e){e&&(r.eventEmitters.fileSystem.removeListener("fileSystem:local-change",e.handleLocalChange),r.eventEmitters.fileSystem.removeListener("fileSystem:publish",e.handlePublish),r.eventEmitters.session.removeListener("session:create",e.handleSessionCreate),r.eventEmitters.session.removeListener("session:destroy",e.handleSessionDestroy))}async function zf(r){let{capabilities:e,dependencies:t,namespace:n,session:i}=r,o=await Gt(t.crypto),a=null,c=null,f=null;return i&&i.username&&(c=i.username,a=await t.reference.didRoot.lookup(c),f=await t.reference.dataRoot.lookup(c)),{app:{namespace:n,...e?{capabilities:e}:{}},fileSystem:{dataRootCID:f?.toString()??null},user:{username:c,accountDID:a,agentDID:o},odd:{version:ec}}}h();p();h();p();var wi={};Et(wi,{code:()=>Ha,decode:()=>no,encode:()=>ls,name:()=>tp});h();p();h();p();h();p();h();p();var I9=["string","number","bigint","symbol"],T9=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function S2(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(I9.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(k9(r))return"Buffer";let t=F9(r);return t||"Object"}function k9(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function F9(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(T9.includes(e))return e}h();p();var Z=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Z.uint=new Z(0,"uint",!0);Z.negint=new Z(1,"negint",!0);Z.bytes=new Z(2,"bytes",!0);Z.string=new Z(3,"string",!0);Z.array=new Z(4,"array",!1);Z.map=new Z(5,"map",!1);Z.tag=new Z(6,"tag",!1);Z.float=new Z(7,"float",!0);Z.false=new Z(7,"false",!0);Z.true=new Z(7,"true",!0);Z.null=new Z(7,"null",!0);Z.undefined=new Z(7,"undefined",!0);Z.break=new Z(7,"break",!0);var ke=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};h();p();h();p();var qf=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",R9=new TextDecoder,B9=new TextEncoder;function ty(r){return qf&&globalThis.Buffer.isBuffer(r)}function nv(r){return r instanceof Uint8Array?ty(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var I2=qf?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):A2(r,e,t):(r,e,t)=>t-e>64?R9.decode(r.subarray(e,t)):A2(r,e,t),T2=qf?r=>r.length>64?globalThis.Buffer.from(r):D2(r):r=>r.length>64?B9.encode(r):D2(r),fs=r=>Uint8Array.from(r),Wf=qf?(r,e,t)=>ty(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),k2=qf?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),nv(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},F2=qf?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function R2(r,e){if(ty(r)&&ty(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function D2(r,e=1/0){let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function A2(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let c,f,d,m;switch(a){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(m=(i&31)<<6|c&63,m>127&&(o=m));break;case 3:c=r[e+1],f=r[e+2],(c&192)===128&&(f&192)===128&&(m=(i&15)<<12|(c&63)<<6|f&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:c=r[e+1],f=r[e+2],d=r[e+3],(c&192)===128&&(f&192)===128&&(d&192)===128&&(m=(i&15)<<18|(c&63)<<12|(f&63)<<6|d&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=a}return O9(n)}var C2=4096;function O9(r){let e=r.length;if(e<=C2)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=C2));return t}var L9=256,Yh=class{constructor(e=L9){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=F2(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Wf(n,0,this.cursor)}else t=k2(this.chunks,this.cursor);return e&&this.reset(),t}};h();p();var wt="CBOR decode error:",iv="CBOR encode error:",Jh=[];Jh[23]=1;Jh[24]=2;Jh[25]=3;Jh[26]=5;Jh[27]=9;function Gs(r,e,t){if(r.length-e<t)throw new Error(`${wt} not enough data for type`)}h();p();h();p();var nn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function di(r,e,t){Gs(r,e,1);let n=r[e];if(t.strict===!0&&n<nn[0])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function mi(r,e,t){Gs(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<nn[1])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function yi(r,e,t){Gs(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<nn[2])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function gi(r,e,t){Gs(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<nn[3])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${wt} integers outside of the safe integer range are not supported`)}function B2(r,e,t,n){return new ke(Z.uint,di(r,e+1,n),2)}function O2(r,e,t,n){return new ke(Z.uint,mi(r,e+1,n),3)}function L2(r,e,t,n){return new ke(Z.uint,yi(r,e+1,n),5)}function N2(r,e,t,n){return new ke(Z.uint,gi(r,e+1,n),9)}function eo(r,e){return dn(r,0,e.value)}function dn(r,e,t){if(t<nn[0]){let n=Number(t);r.push([e|n])}else if(t<nn[1]){let n=Number(t);r.push([e|24,n])}else if(t<nn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<nn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<nn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${wt} encountered BigInt larger than allowable range`)}}eo.encodedSize=function(e){return dn.encodedSize(e.value)};dn.encodedSize=function(e){return e<nn[0]?1:e<nn[1]?2:e<nn[2]?3:e<nn[3]?5:9};eo.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};h();p();function U2(r,e,t,n){return new ke(Z.negint,-1-di(r,e+1,n),2)}function M2(r,e,t,n){return new ke(Z.negint,-1-mi(r,e+1,n),3)}function K2(r,e,t,n){return new ke(Z.negint,-1-yi(r,e+1,n),5)}var ov=BigInt(-1),j2=BigInt(1);function $2(r,e,t,n){let i=gi(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new ke(Z.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${wt} integers outside of the safe integer range are not supported`);return new ke(Z.negint,ov-BigInt(i),9)}function ry(r,e){let t=e.value,n=typeof t=="bigint"?t*ov-j2:t*-1-1;dn(r,e.type.majorEncoded,n)}ry.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*ov-j2:t*-1-1;return n<nn[0]?1:n<nn[1]?2:n<nn[2]?3:n<nn[3]?5:9};ry.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};h();p();function Xh(r,e,t,n){Gs(r,e,t+n);let i=Wf(r,e+t,e+t+n);return new ke(Z.bytes,i,t+n)}function z2(r,e,t,n){return Xh(r,e,1,t)}function q2(r,e,t,n){return Xh(r,e,2,di(r,e+1,n))}function W2(r,e,t,n){return Xh(r,e,3,mi(r,e+1,n))}function V2(r,e,t,n){return Xh(r,e,5,yi(r,e+1,n))}function H2(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer bytes lengths not supported`);return Xh(r,e,9,i)}function ny(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Z.string?T2(r.value):r.value),r.encodedBytes}function Vf(r,e){let t=ny(e);dn(r,e.type.majorEncoded,t.length),r.push(t)}Vf.encodedSize=function(e){let t=ny(e);return dn.encodedSize(t.length)+t.length};Vf.compareTokens=function(e,t){return U9(ny(e),ny(t))};function U9(r,e){return r.length<e.length?-1:r.length>e.length?1:R2(r,e)}h();p();function Qh(r,e,t,n,i){let o=t+n;Gs(r,e,o);let a=new ke(Z.string,I2(r,e+t,e+o),o);return i.retainStringBytes===!0&&(a.byteValue=Wf(r,e+t,e+o)),a}function G2(r,e,t,n){return Qh(r,e,1,t,n)}function Y2(r,e,t,n){return Qh(r,e,2,di(r,e+1,n),n)}function J2(r,e,t,n){return Qh(r,e,3,mi(r,e+1,n),n)}function X2(r,e,t,n){return Qh(r,e,5,yi(r,e+1,n),n)}function Q2(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer string lengths not supported`);return Qh(r,e,9,i,n)}var Z2=Vf;h();p();function Hf(r,e,t,n){return new ke(Z.array,n,t)}function eA(r,e,t,n){return Hf(r,e,1,t)}function tA(r,e,t,n){return Hf(r,e,2,di(r,e+1,n))}function rA(r,e,t,n){return Hf(r,e,3,mi(r,e+1,n))}function nA(r,e,t,n){return Hf(r,e,5,yi(r,e+1,n))}function iA(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer array lengths not supported`);return Hf(r,e,9,i)}function oA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Hf(r,e,1,1/0)}function iy(r,e){dn(r,Z.array.majorEncoded,e.value)}iy.compareTokens=eo.compareTokens;iy.encodedSize=function(e){return dn.encodedSize(e.value)};h();p();function Gf(r,e,t,n){return new ke(Z.map,n,t)}function sA(r,e,t,n){return Gf(r,e,1,t)}function aA(r,e,t,n){return Gf(r,e,2,di(r,e+1,n))}function uA(r,e,t,n){return Gf(r,e,3,mi(r,e+1,n))}function cA(r,e,t,n){return Gf(r,e,5,yi(r,e+1,n))}function fA(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer map lengths not supported`);return Gf(r,e,9,i)}function lA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Gf(r,e,1,1/0)}function oy(r,e){dn(r,Z.map.majorEncoded,e.value)}oy.compareTokens=eo.compareTokens;oy.encodedSize=function(e){return dn.encodedSize(e.value)};h();p();function hA(r,e,t,n){return new ke(Z.tag,t,1)}function pA(r,e,t,n){return new ke(Z.tag,di(r,e+1,n),2)}function dA(r,e,t,n){return new ke(Z.tag,mi(r,e+1,n),3)}function mA(r,e,t,n){return new ke(Z.tag,yi(r,e+1,n),5)}function yA(r,e,t,n){return new ke(Z.tag,gi(r,e+1,n),9)}function sy(r,e){dn(r,Z.tag.majorEncoded,e.value)}sy.compareTokens=eo.compareTokens;sy.encodedSize=function(e){return dn.encodedSize(e.value)};h();p();var q9=20,W9=21,V9=22,H9=23;function gA(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${wt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new ke(Z.null,null,1):new ke(Z.undefined,void 0,1)}function wA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return new ke(Z.break,void 0,1)}function sv(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${wt} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${wt} Infinity values are not supported`)}return new ke(Z.float,r,e)}function bA(r,e,t,n){return sv(av(r,e+1),3,n)}function vA(r,e,t,n){return sv(uv(r,e+1),5,n)}function _A(r,e,t,n){return sv(SA(r,e+1),9,n)}function ay(r,e,t){let n=e.value;if(n===!1)r.push([Z.float.majorEncoded|q9]);else if(n===!0)r.push([Z.float.majorEncoded|W9]);else if(n===null)r.push([Z.float.majorEncoded|V9]);else if(n===void 0)r.push([Z.float.majorEncoded|H9]);else{let i,o=!1;(!t||t.float64!==!0)&&(EA(n),i=av(ko,1),n===i||Number.isNaN(n)?(ko[0]=249,r.push(ko.slice(0,3)),o=!0):(PA(n),i=uv(ko,1),n===i&&(ko[0]=250,r.push(ko.slice(0,5)),o=!0))),o||(G9(n),i=SA(ko,1),ko[0]=251,r.push(ko.slice(0,9)))}}ay.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){EA(n);let i=av(ko,1);if(n===i||Number.isNaN(n))return 3;if(PA(n),i=uv(ko,1),n===i)return 5}return 9};var xA=new ArrayBuffer(9),to=new DataView(xA,1),ko=new Uint8Array(xA,0);function EA(r){if(r===1/0)to.setUint16(0,31744,!1);else if(r===-1/0)to.setUint16(0,64512,!1);else if(Number.isNaN(r))to.setUint16(0,32256,!1);else{to.setFloat32(0,r);let e=to.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)to.setUint16(0,31744,!1);else if(t===0)to.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?to.setUint16(0,0):i<-14?to.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):to.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function av(r,e){if(r.length-e<2)throw new Error(`${wt} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function PA(r){to.setFloat32(0,r,!1)}function uv(r,e){if(r.length-e<4)throw new Error(`${wt} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function G9(r){to.setFloat64(0,r,!1)}function SA(r,e){if(r.length-e<8)throw new Error(`${wt} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}ay.compareTokens=eo.compareTokens;function jt(r,e,t){throw new Error(`${wt} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function uy(r){return()=>{throw new Error(`${wt} ${r}`)}}var Se=[];for(let r=0;r<=23;r++)Se[r]=jt;Se[24]=B2;Se[25]=O2;Se[26]=L2;Se[27]=N2;Se[28]=jt;Se[29]=jt;Se[30]=jt;Se[31]=jt;for(let r=32;r<=55;r++)Se[r]=jt;Se[56]=U2;Se[57]=M2;Se[58]=K2;Se[59]=$2;Se[60]=jt;Se[61]=jt;Se[62]=jt;Se[63]=jt;for(let r=64;r<=87;r++)Se[r]=z2;Se[88]=q2;Se[89]=W2;Se[90]=V2;Se[91]=H2;Se[92]=jt;Se[93]=jt;Se[94]=jt;Se[95]=uy("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Se[r]=G2;Se[120]=Y2;Se[121]=J2;Se[122]=X2;Se[123]=Q2;Se[124]=jt;Se[125]=jt;Se[126]=jt;Se[127]=uy("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Se[r]=eA;Se[152]=tA;Se[153]=rA;Se[154]=nA;Se[155]=iA;Se[156]=jt;Se[157]=jt;Se[158]=jt;Se[159]=oA;for(let r=160;r<=183;r++)Se[r]=sA;Se[184]=aA;Se[185]=uA;Se[186]=cA;Se[187]=fA;Se[188]=jt;Se[189]=jt;Se[190]=jt;Se[191]=lA;for(let r=192;r<=215;r++)Se[r]=hA;Se[216]=pA;Se[217]=dA;Se[218]=mA;Se[219]=yA;Se[220]=jt;Se[221]=jt;Se[222]=jt;Se[223]=jt;for(let r=224;r<=243;r++)Se[r]=uy("simple values are not supported");Se[244]=jt;Se[245]=jt;Se[246]=jt;Se[247]=gA;Se[248]=uy("simple values are not supported");Se[249]=bA;Se[250]=vA;Se[251]=_A;Se[252]=jt;Se[253]=jt;Se[254]=jt;Se[255]=wA;var Fo=[];for(let r=0;r<24;r++)Fo[r]=new ke(Z.uint,r,1);for(let r=-1;r>=-24;r--)Fo[31-r]=new ke(Z.negint,r,1);Fo[64]=new ke(Z.bytes,new Uint8Array(0),1);Fo[96]=new ke(Z.string,"",1);Fo[128]=new ke(Z.array,0,1);Fo[160]=new ke(Z.map,0,1);Fo[244]=new ke(Z.false,!1,1);Fo[245]=new ke(Z.true,!0,1);Fo[246]=new ke(Z.null,null,1);function DA(r){switch(r.type){case Z.false:return fs([244]);case Z.true:return fs([245]);case Z.null:return fs([246]);case Z.bytes:return r.value.length?void 0:fs([64]);case Z.string:return r.value===""?fs([96]):void 0;case Z.array:return r.value===0?fs([128]):void 0;case Z.map:return r.value===0?fs([160]):void 0;case Z.uint:return r.value<24?fs([Number(r.value)]):void 0;case Z.negint:if(r.value>=-24)return fs([31-Number(r.value)])}}var J9={float64:!1,mapSorter:Z9,quickEncodeToken:DA};function X9(){let r=[];return r[Z.uint.major]=eo,r[Z.negint.major]=ry,r[Z.bytes.major]=Vf,r[Z.string.major]=Z2,r[Z.array.major]=iy,r[Z.map.major]=oy,r[Z.tag.major]=sy,r[Z.float.major]=ay,r}var AA=X9(),cv=new Yh,Yf=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${iv} object contains circular references`);return new Yf(t,e)}},Wa={null:new ke(Z.null,null),undefined:new ke(Z.undefined,void 0),true:new ke(Z.true,!0),false:new ke(Z.false,!1),emptyArray:new ke(Z.array,0),emptyMap:new ke(Z.map,0)},Va={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new ke(Z.float,r):r>=0?new ke(Z.uint,r):new ke(Z.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new ke(Z.uint,r):new ke(Z.negint,r)},Uint8Array(r,e,t,n){return new ke(Z.bytes,r)},string(r,e,t,n){return new ke(Z.string,r)},boolean(r,e,t,n){return r?Wa.true:Wa.false},null(r,e,t,n){return Wa.null},undefined(r,e,t,n){return Wa.undefined},ArrayBuffer(r,e,t,n){return new ke(Z.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new ke(Z.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Wa.emptyArray,new ke(Z.break)]:Wa.emptyArray;n=Yf.createCheck(n,r);let i=[],o=0;for(let a of r)i[o++]=cy(a,t,n);return t.addBreakTokens?[new ke(Z.array,r.length),i,new ke(Z.break)]:[new ke(Z.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),a=i?r.size:o.length;if(!a)return t.addBreakTokens===!0?[Wa.emptyMap,new ke(Z.break)]:Wa.emptyMap;n=Yf.createCheck(n,r);let c=[],f=0;for(let d of o)c[f++]=[cy(d,t,n),cy(i?r.get(d):r[d],t,n)];return Q9(c,t),t.addBreakTokens?[new ke(Z.map,a),c,new ke(Z.break)]:[new ke(Z.map,a),c]}};Va.Map=Va.Object;Va.Buffer=Va.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Va[`${r}Array`]=Va.DataView;function cy(r,e={},t){let n=S2(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Va[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let o=Va[n];if(!o)throw new Error(`${iv} unsupported type: ${n}`);return o(r,n,e,t)}function Q9(r,e){e.mapSorter&&r.sort(e.mapSorter)}function Z9(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=AA[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function CA(r,e,t,n){if(Array.isArray(e))for(let i of e)CA(r,i,t,n);else t[e.type.major](r,e,n)}function ej(r,e,t){let n=cy(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let a=o.encodedSize(n,t),c=new Yh(a);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return nv(c.chunks[0])}}return cv.reset(),CA(cv,n,e,t),cv.toBytes(!0)}function Ys(r,e){return e=Object.assign({},J9,e),ej(r,AA,e)}h();p();var tj={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},fv=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Fo[e];if(t===void 0){let n=Se[e];if(!n)throw new Error(`${wt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Zh=Symbol.for("DONE"),fy=Symbol.for("BREAK");function rj(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=ep(e,t);if(o===fy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed array`)}if(o===Zh)throw new Error(`${wt} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function nj(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<r.value;a++){let c=ep(e,t);if(c===fy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed map`)}if(c===Zh)throw new Error(`${wt} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${wt} non-string keys not supported (got ${typeof c})`);let f=ep(e,t);if(f===Zh)throw new Error(`${wt} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?o.set(c,f):i[c]=f}return n?o:i}function ep(r,e){if(r.done())return Zh;let t=r.next();if(t.type===Z.break)return fy;if(t.type.terminal)return t.value;if(t.type===Z.array)return rj(t,r,e);if(t.type===Z.map)return nj(t,r,e);if(t.type===Z.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=ep(r,e);return e.tags[t.value](n)}throw new Error(`${wt} tag not supported (${t.value})`)}throw new Error("unsupported")}function ro(r,e){if(!(r instanceof Uint8Array))throw new Error(`${wt} data to decode must be a Uint8Array`);e=Object.assign({},tj,e);let t=e.tokenizer||new fv(r,e),n=ep(t,e);if(n===Zh)throw new Error(`${wt} did not find any content to decode`);if(n===fy)throw new Error(`${wt} got unexpected break`);if(!t.done())throw new Error(`${wt} too many terminals, data makes no sense`);return n}var IA=42;function ij(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let e=we.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new ke(Z.tag,IA),new ke(Z.bytes,t)]}function oj(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function sj(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var aj={float64:!0,typeEncoders:{Object:ij,undefined:oj,number:sj}};function uj(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return we.decode(r.subarray(1))}var TA={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};TA.tags[IA]=uj;var tp="dag-cbor",Ha=113,ls=r=>Ys(r,aj),no=r=>ro(r,TA);var Tt={};Et(Tt,{DEFAULT_AES_ALG:()=>Ja,getEncryptedFile:()=>xv,getFile:()=>ap,getFileSystemLinks:()=>Dj,getSimpleLinks:()=>rl,putEncryptedFile:()=>Ev,putFile:()=>uc,putLinks:()=>cc});h();p();var bi={};Et(bi,{code:()=>mn,createLink:()=>ic,createNode:()=>hy,decode:()=>Ya,encode:()=>Ga,name:()=>np,prepare:()=>dv,validate:()=>mv});h();p();h();p();var cj=new TextDecoder;function hv(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function ly(r,e){let t;[t,e]=hv(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function kA(r,e){let t;return[t,e]=hv(r,e),[t&7,t>>3,e]}function fj(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=kA(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=ly(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ly(r,n),e.Name=cj.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=hv(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function FA(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,f;if([c,f,t]=kA(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(f===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=ly(r,t),n&&(i=!0)}else if(f===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let d;[d,t]=ly(r,t),n.push(fj(d))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${f}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}h();p();var BA=new TextEncoder,RA=2**32,lj=2**31;function hj(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=rp(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=BA.encode(r.Name);t-=n.length,e.set(n,t),t=rp(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=rp(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function OA(r){let e=dj(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=rp(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=hj(r.Links[i],t.subarray(0,n));n-=o,n=rp(t,n,o)-1,t[n]=18}return t}function pj(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Jf(t)}if(typeof r.Name=="string"){let t=BA.encode(r.Name).length;e+=1+t+Jf(t)}return typeof r.Tsize=="number"&&(e+=1+Jf(r.Tsize)),e}function dj(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Jf(t)}if(r.Links)for(let t of r.Links){let n=pj(t);e+=1+n+Jf(n)}return e}function rp(r,e,t){e-=Jf(t);let n=e;for(;t>=lj;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Jf(r){return r%2===0&&r++,Math.floor((mj(r)+6)/7)}function mj(r){let e=0;return r>=RA&&(r=Math.floor(r/RA),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+yj[r]}var yj=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];h();p();var gj=["Data","Links"],wj=["Hash","Name","Tsize"],pv=new TextEncoder;function NA(r,e){if(r===e)return 0;let t=r.Name?pv.encode(r.Name):[],n=e.Name?pv.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,c=Math.min(i,o);a<c;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function LA(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function UA(r){if(typeof r.asCID=="object"){let t=we.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=we.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=we.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=we.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function dv(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=pv.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(UA),e.Links.sort(NA);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function mv(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!LA(r,gj))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!LA(t,wj))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&NA(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function hy(r,e=[]){return dv({Data:r,Links:e})}function ic(r,e,t){return UA({Hash:t,Name:r,Tsize:e})}var np="dag-pb",mn=112;function Ga(r){mv(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),OA(e)}function Ya(r){let e=FA(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}h();p();h();p();var Ro={};Et(Ro,{code:()=>hs,decode:()=>vj,encode:()=>bj,name:()=>ip});h();p();var ip="raw",hs=85,bj=r=>Co(r),vj=r=>Co(r);var MA={[np]:bi,[tp]:wi,[ip]:Ro},KA={[mn]:bi,[Ha]:wi,[hs]:Ro};function yv(r){let e=KA[r];if(!e)throw new Error(`No codec was registered for the code: ${gv(r)}. Is it part of the multicodec table (https://github.com/multiformats/multicodec/blob/master/table.csv)?`);return e}function _j(r){let e=MA[r];if(!e)throw new Error(`No codec was registered for the name: ${r}`);return e}function py(r){return typeof r=="string"?_j(r):yv(r)}function jA(r,e){let t=py(r);if(e.code!==t.code){let n=yv(e.code);throw new Error(`Expected a ${t.name} CID, found a ${n.name} CID instead.`)}}function $A(r){return typeof r=="string"?!!MA[r]:!!KA[r]}function gv(r){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,r),`0x${Ge(e,"hex").replace(/^(00)*/,"")}`}var xj=new Uint8Array([8,1]);async function Xf(r,e){return jA(mn,e),Ya(await r.getBlock(e))}function op(r,e){let t=hy(xj,e);return r.putBlock(Ga(t),mn)}h();p();var kr=r=>Ye(r)&&r.content!==void 0,dy=r=>Ye(r)&&r.ls!==void 0,bv=r=>Ye(r)&&Ht(r.name)&&Jn(r.size)&&Jb(r.isFile),qA=r=>Ye(r)&&Ht(r.name)&&Jn(r.size)&&ps(r.cid),Ur=r=>Ye(r)&&Ht(r.name)&&Ht(r.ipns),WA=r=>{if(Ye(r)){let e=Object.values(r);return e.length>0&&e.every(Ur)}return!1},VA=r=>Array.isArray(r)&&r.every(Ur),Ej=r=>bv(r)&&ps(r.cid),HA=r=>Ye(r)&&Object.values(r).every(e=>Ej(e)||Ur(e)),Pj=r=>Ye(r)&&Jn(r.mtime)&&Jn(r.ctime)&&Jn(r.mode)&&Ht(r._type),oc=r=>Ye(r)&&Pj(r.unixMeta)&&Jb(r.isFile)&&Sj(r.version),my=r=>Ye(r)&&Object.values(r).every(yy),yy=r=>Ye(r)&&ps(r.cid)&&ps(r.userland)&&ps(r.metadata)&&my(r.subSkeleton)||Ur(r),vv=r=>Ye(r)&&my(r.skeleton)&&oc(r.metadata)&&r.metadata.isFile===!1,GA=r=>vv(r)&&ps(r.userland),_v=r=>Ye(r)&&oc(r.metadata)&&r.metadata.isFile===!0,YA=r=>_v(r)&&ps(r.userland),ps=r=>!!we.asCID(r)||Ht(r)||r&&"code"in r&&"version"in r&&("multihash"in r||"hash"in r),Sj=r=>{if(!Ye(r))return!1;let{major:e,minor:t,patch:n}=r;return Jn(e)&&Jn(t)&&Jn(n)};h();p();var Qf=r=>r.reduce((e,t)=>(e[t.name]=t,e),{}),Zf=r=>{let e=r.Name||"",t=r.Hash,n=r.Tsize||0;return{name:e,cid:t,size:n}},On=(r,e,t,n)=>({name:r,cid:pi(e),size:n,isFile:t}),gy=r=>{let{name:e,cid:t,size:n}=r;return ic(e,n,Ue(t))};var sp={};Et(sp,{SymmAlg:()=>$t});h();p();h();p();var ds;(function(r){r.ECC="ecc",r.RSA="rsa"})(ds||(ds={}));var wy;(function(r){r.P_256="P-256",r.P_384="P-384",r.P_521="P-521"})(wy||(wy={}));var by;(function(r){r[r.B1024=1024]="B1024",r[r.B2048=2048]="B2048",r[r.B4096=4096]="B4096"})(by||(by={}));var $t;(function(r){r.AES_CTR="AES-CTR",r.AES_CBC="AES-CBC",r.AES_GCM="AES-GCM"})($t||($t={}));var sc;(function(r){r[r.B128=128]="B128",r[r.B192=192]="B192",r[r.B256=256]="B256"})(sc||(sc={}));var tl;(function(r){r.SHA_1="SHA-1",r.SHA_256="SHA-256",r.SHA_384="SHA-384",r.SHA_512="SHA-512"})(tl||(tl={}));var ac;(function(r){r[r.B8=8]="B8",r[r.B16=16]="B16"})(ac||(ac={}));var _r;(function(r){r.Exchange="exchange",r.Write="write"})(_r||(_r={}));var Ja=$t.AES_CTR,ap=async(r,e)=>r.getUnixFile(e),xv=async(r,e,t,n)=>{let i=await ap(r,t),o;try{o=no(i)}catch{return i}if(!ht(o,"alg")||!ht(o,"cip")||!Aj(o.alg)||!ArrayBuffer.isView(o.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let a=o.alg,c=new Uint8Array(o.cip.buffer),f=await e.aes.decrypt(c,n,a),d=no(f);return d instanceof Uint8Array?d:typeof d=="string"?Be(d,"utf8"):Be(JSON.stringify(d),"utf8")},uc=async(r,e)=>r.putChunked(e),Ev=async(r,e,t,n)=>{let i=l2(t)?await XD(t):t,o=ls(i),a=$t.AES_GCM,c=await e.aes.encrypt(o,n,a),f=ls({alg:a,cip:c});return uc(r,f)},rl=async(r,e)=>{let t=await Xf(r,e);return Qf(t.Links.map(Zf))},Dj=async(r,e)=>{let t=await Xf(r,e),n=await Promise.all(t.Links.map(async i=>{let o=await Xf(r,i.Hash),a=Qf(o.Links.map(Zf));if(!!a.softLink){let d=await r.getUnixFile(Ue(a.softLink.cid)),m=new TextDecoder().decode(d);return JSON.parse(m)}let f=await no(await ap(r,Ue(a.metadata.cid)));return{...Zf(i),isFile:ht(f,"isFile")?f.isFile:!1}}));return Qf(n)},cc=async(r,e)=>{let t=Object.values(e).reduce(async(i,o)=>{let a=await i;if(Ur(o)){let c=await r.putChunked(Be(JSON.stringify(o),"utf8")),f=await op(r,[ic("softLink",c.size,c.cid)]),d=await r.size(f);return[...a,ic(o.name,d,f)]}else return ht(o,"Hash")&&o.Hash?[...a,o]:qA(o)?[...a,gy(o)]:a},Promise.resolve([])),n=await op(r,await t);return{cid:n,isFile:!1,size:await r.size(n)}};function Aj(r){return Ht(r)&&Object.values($t).includes(r)}h();p();var Xs={};Et(Xs,{checkValue:()=>XA,get:()=>Tj,getAndCheckValue:()=>Sv,getValue:()=>JA,getValueFromLinks:()=>Pv,putFile:()=>Ij,putTree:()=>Cj});h();p();var Cj=async(r,e,t,n,i)=>{let o=await cc(r,e),a=On("userland",o.cid,!0,o.size),[c,f]=await Promise.all([Dv(r,"metadata",n),Dv(r,"skeleton",t)]),d=i!=null?On("previous",i,!1,await r.size(i)):void 0,m={metadata:c,skeleton:f,userland:a,previous:d},{cid:w,size:x}=await cc(r,m);return{cid:w,userland:Ue(a.cid),metadata:Ue(c.cid),size:x,isFile:!1,skeleton:t}},Ij=async(r,e,t,n)=>{let i=await uc(r,e),o=On("userland",i.cid,!0,i.size),a=await Dv(r,"metadata",t),c=n!=null?On("previous",n,!1,await r.size(n)):void 0,f={metadata:a,userland:o,previous:c},{cid:d,size:m}=await cc(r,f);return{cid:d,userland:Ue(o.cid),metadata:Ue(a.cid),size:m,isFile:!0,skeleton:{}}},Tj=async(r,e)=>{let t=await rl(r,e),n=await Sv(r,t,"metadata",oc),i=n.isFile?void 0:await Sv(r,t,"skeleton",my),o=t.userland?.cid||null;if(!ps(o))throw new Error("Could not find userland");let a=t.previous?.cid||void 0;return{userland:o,metadata:n,previous:a,skeleton:i}},JA=async(r,e,t)=>{let n=we.asCID(e);if(ps(e)){if(!n)return null;let i=await rl(r,n);return Pv(r,i,t)}return Pv(r,e,t)},Pv=async(r,e,t)=>{let n=e[t]?.cid;if(!n)return null;let i=await ap(r,Ue(n)),o=no(i),a;return o instanceof Uint8Array?a=JSON.parse(Ge(o,"utf8")):a=o,a},Sv=async(r,e,t,n,i=!1)=>{let o=await JA(r,e,t);return XA(o,t,n,i)},XA=(r,e,t,n=!1)=>{if(!f2(r)){if(n)return r;throw new Error(`Could not find header value: ${e}`)}if(t(r))return r;throw new Error(`Improperly formatted header value: ${e}`)};async function Dv(r,e,t){let{cid:n,size:i}=await uc(r,ls(t));return On(e,n,!0,i)}var sn={};Et(sn,{addNode:()=>zq,findLatestRevision:()=>W8,getByCID:()=>qy,getByName:()=>qq,getLatestByBareNameFilter:()=>Wq,getLatestByCID:()=>q8,getLatestByName:()=>z8,getRevision:()=>l_,readNode:()=>$8});h();p();h();p();var vy=r=>up(r)||Qs(r)||Ur(r),Qs=r=>Ye(r)&&oc(r.metadata)&&r.metadata.isFile&&Ht(r.key)&&Jm(r.content),up=r=>Ye(r)&&oc(r.metadata)&&r.metadata.isFile===!1&&Jn(r.revision)&&kj(r.links)&&QA(r.skeleton),Av=r=>bv(r)&&Ht(r.key)&&Ht(r.pointer),kj=r=>Ye(r)&&Object.values(r).every(e=>Av(e)||Ur(e)),QA=r=>Ye(r)&&Object.values(r).every(e=>Cv(e)||Ur(e)),Cv=r=>Ye(r)&&Jm(r.cid)&&Ht(r.key)&&QA(r.subSkeleton);h();p();h();p();var xy=r=>Array.prototype.map.call(r,e=>("00"+e.toString(16)).slice(-2)).join(""),ZA=r=>{let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++)e[t]=parseInt(r.slice(t*2,t*2+2),16);return e};var U8=Ze(N8(),1),Nq=1024,Uq=16,M8=320,u_=async(r,e)=>{let t="0".repeat(Nq/4);return uo(r,t,No(e,"base64pad"))},uo=async(r,e,t)=>{let n=f_(e),i=await r.hash.sha256(t);return n.add(Ge(i,"hex")),await j8(n)},ia=async(r,e,t,n)=>{let i=Ge(t,"base64pad"),o=Be(`${n}${i}`,"utf8");return await uo(r,e,o)},oa=async(r,e)=>{let t=await c_(r,f_(e));return Mq(r,t)},Mq=async(r,e)=>{let t=e.toBytes(),n=await r.hash.sha256(t);return xy(n)},K8=async(r,e,t=M8)=>{let n=await c_(r,f_(e),t);return await j8(n)},c_=async(r,e,t=M8)=>{if(t>e.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(Kq(e)>=t)return e;let i=e.toBytes(),o=i;do{let a=await r.hash.sha256(o);e.add(xy(a)),o=a}while(jq(i,e.toBytes()));return c_(r,e,t)},Kq=r=>{let e=new Uint32Array(r.toBytes()),t=0;for(let n=0;n<e.length;n++)t+=$q(e[n]);return t},j8=r=>xy(r.toBytes()),f_=r=>{let e=ZA(r);return U8.BloomFilter.fromBytes(e,Uq)},jq=(r,e)=>{if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},$q=r=>{let e=r-(r>>1&1431655765),t=(e&858993459)+(e>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24};function No(r,e){return Be(Ge(r,e),"utf8")}var zq=async(r,e,t,n,i)=>{let{cid:o,size:a}=await Ev(r,e,n,i),c=await ia(e,n.bareNameFilter,i,n.revision),f=await oa(e,c);if(await t.add(f,o),Qs(n)){let w=Be(n.key,"base64pad"),x=await uo(e,n.bareNameFilter,No(w,"base64pad")),T=await ia(e,x,w,n.revision),F=await oa(e,T);await t.add(F,Ue(n.content))}let[d,m]=Qs(n)?[{},!0]:[n.skeleton,!1];return{cid:o,name:f,key:i,size:a,isFile:m,skeleton:d}},$8=async(r,e,t,n)=>{let i=await xv(r,e,t,n),o=JSON.parse(Ge(i,"utf8"));if(!vy(o))throw new Error(`Could not parse a valid filesystem object: ${o}`);return o},qq=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:qy(r,e,o,i)},qy=async(r,e,t,n)=>await $8(r,e,t,n),z8=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:q8(r,e,t,o,i)},q8=async(r,e,t,n,i)=>{let o=await qy(r,e,n,i),a=await W8(e,t,o.bareNameFilter,i,o.revision);return a?.cid?await qy(r,e,Ue(a?.cid),i):o},Wq=async(r,e,t,n,i)=>{let o=await ia(e,n,i,1),a=await oa(e,o);return z8(r,e,t,a,i)},W8=async(r,e,t,n,i)=>{let o=i,a=null,c=0,f=null;for(;a===null;){let d=i+Math.pow(2,c),m=await l_(r,e,t,n,d);m!==null?(f=m,o=d):a=d,c++}for(;o<a-1;){let d=Math.floor((a+o)/2),m=await l_(r,e,t,n,d);m!==null?(f=m,o=d):a=d}return f},l_=async(r,e,t,n,i)=>{let o=await ia(r,t,n,i),a=await oa(r,o),c=await e.get(a);return c?{cid:c,name:a,number:i}:null};h();p();async function V8(r,{bareFilter:e,shareKey:t}){let n=await r.hash.sha256(Be(t,"base64pad"));return K8(r,await uo(r,e,No(n,"hex")))}h();p();async function Wy(r,{counter:e,recipientExchangeDid:t,senderRootDid:n}){let i=Be(`${t}${n}${e}`,"utf8");return Ge(await r.hash.sha256(i),"base64pad")}function H8({entryIndexCid:r,symmKey:e,symmKeyAlgo:t}){let n=r;return{algo:t,key:typeof e=="string"?Be(e,"base64pad"):e,cid:n}}h();p();h();p();h();p();var Dp=class{constructor(e){this.content=e,this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async updateContent(e){if(this.readOnly)throw new Error("File is read-only");return this.content=e,this}},ml=Dp;var yl=class extends ml{constructor(t,n){super(n);this.depot=t}static create(t,n){return new yl(t,n)}static async fromCID(t,n){let i=await Tt.getFile(t,n);return new yl(t,i)}static instanceOf(t){return Ye(t)&&ht(t,"content")}async put(){let{cid:t}=await this.putDetailed();return t}async putDetailed(){return Tt.putFile(this.depot,this.content)}},Vy=yl;h();p();var h_=class{constructor(){this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async ls(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(kr(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(!kr(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,()=>this.put())}async mkdirRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");let o=await this.getOrCreateDirectChild(n,t);if(kr(o))throw new Error(`There is a file along the given path: ${Ao(e)}`);return i.length&&await o.mkdirRecurse(i,()=>this.updateDirectChild(o,n,t)),this}async add(e,t){return await this.addRecurse(e,t,()=>this.put()),this}async addRecurse(e,t,n){let[i,...o]=e;if(!i)throw new Error("Invalid path: empty");if(o.length===0)await this.createOrUpdateChildFile(t,i,n);else{let a=await this.getOrCreateDirectChild(i,n);if(kr(a))throw new Error(`There is a file along the given path: ${Ao(e)}`);await a.addRecurse(o,t,async()=>{await this.updateDirectChild(a,i,n)})}return this}async rm(e){return await this.rmRecurse(e,()=>this.put()),this}async rmRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");if(i.length===0)this.removeDirectChild(n),t&&await t();else{let o=await this.getDirectChild(n);if(o===null)throw new Error("Invalid path: does not exist");if(kr(o))throw new Error(`There is a file along the given path: ${Ao(e)}`);await o.rmRecurse(i,async()=>{await this.updateDirectChild(o,n,t)})}return this}async mv(e,t){let n=await this.get(e);if(n===null)throw new Error(`Path does not exist: ${Ao(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${Ao(t)}`);let i=t.slice(0,-1),o=await this.get(i);if(!o)await this.mkdir(i),o=await this.get(i);else if(kr(o))throw new Error(`Can not \`mv\` to a file: ${Ao(i)}`);return await this.rm(e),await[...t].reverse().reduce((a,c,f)=>a.then(async d=>{let m=t.slice(0,-(f+1)),w=m.length?await this.get(m):this;if(w&&!kr(w))return await w.updateDirectChild(d,c,null),w;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(e){return await this.get(e)!==null}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){let n=await this.getDirectChild(e);return n!==null?n:this.createChildTree(e,t)}async updateChild(e,t){let n=[];return await t.reduce(async(i,o,a)=>{let c=await i;if(n.push([o,c]),a+1===t.length)return c;let f=await c.getDirectChild(o);if(!dy(f)){let d=t.slice(a+1);throw new Error(`Expected a tree at the given path: ${Ao(d)}`)}return f},Promise.resolve(this)),await n.reverse().reduce(async(i,[o,a])=>(await a.updateDirectChild(await i,o,null),a),Promise.resolve(e)),this}},gl=h_;var sa=class extends gl{constructor(t,n){super();this.type="BareTree",this.links=n,this.children={},this.depot=t}static async empty(t){return new sa(t,{})}static async fromCID(t,n){let i=Qf(await t.getUnixDirectory(n));return new sa(t,i)}static fromLinks(t,n){return new sa(t,n)}static instanceOf(t){return Ye(t)&&ht(t,"links")&&ht(t,"children")&&ht(t,"type")&&t.type==="BareTree"}async createChildTree(t,n){let i=await sa.empty(this.depot),o=this.children[t];if(o){if(kr(o))throw new Error(`There is a file at the given path: ${t}`);return o}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await Vy.create(this.depot,t);else if(Vy.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){return Tt.putLinks(this.depot,this.links)}async putAndUpdateLink(t,n,i){let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}async updateDirectChild(t,n,i){return this.children[n]=t,this.putAndUpdateLink(t,n,i)}removeDirectChild(t){return delete this.links[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){if(this.children[t])return this.children[t];let n=this.links[t]||null;if(n===null)return null;let i=Ue(n.cid),o=n.isFile?await Vy.fromCID(this.depot,i):await sa.fromCID(this.depot,i);return this.children[t]?this.children[t]:(this.children[t]=o,o)}async get(t){let[n,...i]=t;if(!n)return this;let o=await this.getDirectChild(n);if(i.length){if(o===null||kr(o))return null}else return o;return o.get(i)}updateLink(t,n){let{cid:i,size:o,isFile:a}=n;return this.links[t]=On(t,i,a,o),this}getLinks(){return this.links}},aa=sa;h();p();h();p();var Hq={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},Gq=r=>Hq[r]===!0,gn=class{constructor(e,t){this.links=t,this.children={},this.depot=e}static create(e){return new gn(e,{})}static async fromCID(e,t){let n=await rl(e,t);return new gn(e,n)}async putDetailed(){return cc(this.depot,this.links)}async put(){let{cid:e}=await this.putDetailed();return e}async add(e,t){if(!Gq(e[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(e);if(e!==n)if(n===null)this.links[e]=On(e,t,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(e.slice(1),t),await this.putAndUpdateChildLink(n);else{let i=this.addEmptyChild(e[0]),o=this.links[n].cid;this.removeChild(n),await Promise.all([i.add(e.slice(1),t),i.add(n.slice(1),Ue(o))]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){let t=this.links[e]?.cid,{cid:n,size:i}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=On(e,n,!1,i)}addEmptyChild(e){let t=gn.create(this.depot);return this.children[e]=t,t}async get(e){let t=this.nextTreeName(e);return t===null?null:t.length>1?Ue(this.links[t].cid):(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return await this.get(e)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:t,cid:n})=>t.length>1?[{name:t,cid:Ue(n)}]:(await(await gn.fromCID(this.depot,Ue(n))).members()).map(a=>({...a,name:t+a.name}))))).reduce((t,n)=>t.concat(n))}async getDirectChild(e){if(this.children[e])return this.children[e];let t=await gn.fromCID(this.depot,Ue(this.links[e].cid));return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return this.links[e]!==void 0||this.children[e]!==void 0}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){let t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find(n=>t===n[0])||null}};h();p();h();p();var Yq=r=>({mtime:Date.now(),ctime:Date.now(),mode:r?644:755,_type:r?"file":"dir"}),eu=(r,e)=>({isFile:r,version:e,unixMeta:Yq(r)}),Hy=r=>({...r,unixMeta:{...r.unixMeta,mtime:Date.now()}});h();p();h();p();var Ap=(r,e,t)=>({major:r,minor:e,patch:t}),Ec=r=>{let e=r.split(".").map(t=>parseInt(t));return e.length!==3||e.some(t=>typeof t!="number")?null:{major:e[0],minor:e[1],patch:e[2]}},Pc=r=>{let{major:e,minor:t,patch:n}=r;return`${e}.${t}.${n}`},p_=(r,e)=>r.major===e.major&&r.minor===e.minor&&r.patch===e.patch,Yy=(r,e)=>r.major!=e.major?r.major<e.major:r.minor!=e.minor?r.minor<e.minor:r.patch<e.patch,Y8=(r,e)=>Yy(e,r);function J8(r,e){return Yy(e,r)||p_(r,e)}var Q8=r=>Yy(r,Ai)?"too-low":Y8(r,Sc)?"too-high":!0,Z8=Ap(0,0,0),Mue=Ap(1,0,0),Ai=Ap(2,0,0),Sc=Ap(3,0,0),d_=[Ai,Sc];h();p();var Ac=class{constructor(e,t,n){this.crypto=e,this.depot=t,this.node=n}async back(e=-1){let t=Math.min(e,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){let t=this.node.header.revision;return Promise.all(Array.from({length:e},(n,i)=>{let o=i+1;return this._getRevisionInfoFromNumber(t-o).then(a=>({revisionInfo:a,delta:-o}))})).then(n=>n.filter(i=>!!i.revisionInfo)).then(n=>n.map(i=>{let o=i.revisionInfo.metadata.unixMeta.mtime;return{delta:i.delta,timestamp:o}}))}async _getRevision(e){let t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.fromInfo(this.node.mmpt,this.node.key,t)}_getRevisionInfo(e){return sn.readNode(this.depot,this.crypto,Ue(e.cid),this.node.key)}async _getRevisionInfoFromNumber(e){let{mmpt:t}=this.node,{bareNameFilter:n}=this.node.header,i=this.node.key,o=await sn.getRevision(this.crypto,t,n,i,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){let n=await this._getRevisionInfoFromNumber(e);return n?.revision?n.metadata.unixMeta.mtime<t?this._getRevision(n.revision):this._prior(n.revision-1,t):null}};var ua=class extends ml{constructor({crypto:t,depot:n,content:i,mmpt:o,key:a,header:c}){super(i);this.crypto=t,this.depot=n,this.header=c,this.key=a,this.mmpt=o,this.history=new Ac(t,n,f(this));function f(d){return{...d,fromInfo:async(m,w,x)=>f(await ua.fromInfo(t,n,m,w,x))}}}static instanceOf(t){return Ye(t)&&ht(t,"content")&&ht(t,"mmpt")&&ht(t,"header")&&Qs(t.header)}static async create(t,n,i,o,a,c){let f=await t.aes.exportKey(await t.aes.genKey(Ja)),d=await uo(t,a,No(c,"base64pad")),m=await Tt.putEncryptedFile(n,t,o,f);return new ua({crypto:t,depot:n,content:o,mmpt:i,key:c,header:{bareNameFilter:d,key:Ge(f,"base64pad"),revision:1,metadata:eu(!0,Ai),content:pi(m.cid)}})}static async fromBareNameFilter(t,n,i,o,a){let c=await sn.getLatestByBareNameFilter(n,t,i,o,a);return this.fromInfo(t,n,i,a,c)}static async fromLatestName(t,n,i,o,a){let c=await sn.getLatestByName(n,t,i,o,a);return ua.fromInfo(t,n,i,a,c)}static async fromName(t,n,i,o,a){let c=await sn.getByName(n,t,i,o,a);return ua.fromInfo(t,n,i,a,c)}static async fromInfo(t,n,i,o,a){if(!Qs(a))throw new Error("Could not parse a valid private file using the given key");let c=await Tt.getEncryptedFile(n,t,Ue(a.content),Be(a.key,"base64pad"));return new ua({crypto:t,depot:n,content:c,key:o,mmpt:i,header:a})}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await ia(this.crypto,t,this.key,n);return oa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await uo(this.crypto,t,No(Be(this.header.key,"base64pad"),"base64pad")),this}async updateContent(t){let n=await Tt.putEncryptedFile(this.depot,this.crypto,t,Be(this.header.key,"base64pad"));return this.content=t,this.header={...this.header,revision:this.header.revision+1,content:pi(n.cid)},this}async putDetailed(){return sn.addNode(this.depot,this.crypto,this.mmpt,{...this.header,metadata:Hy(this.header.metadata)},this.key)}},Ci=ua;var er=class extends gl{constructor({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f}){super();this.crypto=t,this.depot=n,this.manners=i,this.reference=o,this.children={},this.header=f,this.key=c,this.mmpt=a,this.history=new Ac(t,n,d(this));function d(m){return{...m,fromInfo:async(w,x,T)=>d(await er.fromInfo(t,n,i,o,w,x,T))}}}static instanceOf(t){return Ye(t)&&ht(t,"mmpt")&&ht(t,"header")&&up(t.header)}static async create(t,n,i,o,a,c,f){let d=f?await uo(t,f,No(c,"base64pad")):await u_(t,c);return new er({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:{metadata:eu(!1,Ai),bareNameFilter:d,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(t,n,i,o,a,c){let f=await u_(t,c);return this.fromBareNameFilter(t,n,i,o,a,f,c)}static async fromBareNameFilter(t,n,i,o,a,c,f){let d=await sn.getLatestByBareNameFilter(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromLatestName(t,n,i,o,a,c,f){let d=await sn.getLatestByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromName(t,n,i,o,a,c,f){let d=await sn.getByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromInfo(t,n,i,o,a,c,f){if(!up(f))throw new Error("Could not parse a valid private tree using the given key");return new er({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f})}async createChildTree(t,n){let i=await this.crypto.aes.genKey(Ja).then(this.crypto.aes.exportKey),o=await er.create(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i,this.header.bareNameFilter),a=this.children[t];if(a){if(Ci.instanceOf(a))throw new Error(`There is a file at the given path: ${t}`);return a}return await this.updateDirectChild(o,t,n),o}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null){let c=await this.crypto.aes.genKey(Ja).then(this.crypto.aes.exportKey);a=await Ci.create(this.crypto,this.depot,this.mmpt,t,this.header.bareNameFilter,c)}else if(Ci.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=Object.assign({},this.header);return t.skeleton=eI(t.skeleton),sn.addNode(this.depot,this.crypto,this.mmpt,t,this.key)}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");await t.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return this.header={...this.header,revision:this.header.revision+1,links:Qb(this.header.links,t),skeleton:Qb(this.header.skeleton,t)},this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.links[t];if(i===void 0)return null;if(Av(i)){let o=Be(i.key,"base64pad");n=i.isFile?await Ci.fromLatestName(this.crypto,this.depot,this.mmpt,i.pointer,o):await er.fromLatestName(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i.pointer,o)}else if(Ur(i))return er.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await ia(this.crypto,t,this.key,n);return oa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await uo(this.crypto,t,No(this.key,"base64pad")),this}async get(t){if(t.length===0)return this;let[n,...i]=t,o=this.header.skeleton[n];return o===void 0?null:this.getRecurse(o,i)}async getRecurse(t,n){let[i,...o]=n;if(Ur(t)){let d=await er.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,t);if(!d)return null;if(i===void 0)return d;if(er.instanceOf(d))return d.get(n).then(Xq);throw new Error("Was expecting a directory at: "+Ao(n))}if(i===void 0)return Jq(this.crypto,this.depot,this.manners,this.reference,this.mmpt,t);let a=t.subSkeleton[i];if(a!==void 0)return this.getRecurse(a,o);let c=await sn.getLatestByCID(this.depot,this.crypto,this.mmpt,Ue(t.cid),Be(t.key,"base64pad"));if(!up(c))return null;let f=c.skeleton[i];return f===void 0?null:this.getRecurse(f,o)}assignLink({name:t,link:n,skeleton:i}){this.header.links[t]=n,this.header.skeleton[t]=i,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i,o,a){let c=a.ipns.split("/")[0];if(!a.privateName||!a.key)throw new Error("Mixing public and private soft links is not supported yet.");let f=await o.dns.lookupDnsLink(c);if(!f)throw new Error(`Failed to resolve the soft link: ${a.ipns} - Could not resolve DNSLink`);let d=(await Tt.getSimpleLinks(n,Ue(f))).private.cid,m=await gn.fromCID(n,Ue(d)),w=Be(a.key,"base64pad"),x=await sn.getLatestByName(n,t,m,a.privateName,w);if(!x)return null;let T=x.metadata.isFile?await Ci.fromInfo(t,n,m,w,x):await er.fromInfo(t,n,i,o,m,w,x);return T&&(T.readOnly=!0),T}getLinks(){return h2(this.header.links,t=>{if(Ur(t))return{...t};{let{key:n,...i}=t;return{...i}}})}updateLink(t,n){let{cid:i,size:o,isFile:a,skeleton:c}=n,f=Ge(n.key,"base64pad"),d=n.name;return this.assignLink({name:t,link:{name:t,key:f,pointer:d,size:o,isFile:a},skeleton:{cid:pi(i),key:f,subSkeleton:c}}),this}insertSoftLink({name:t,key:n,privateName:i,username:o}){let a={ipns:this.reference.dataRoot.domain(o),name:t,privateName:i,key:Ge(n,"base64pad")};return this.assignLink({name:t,link:a,skeleton:a}),this}};async function Jq(r,e,t,n,i,o){let a=Be(o.key,"base64pad"),c=await sn.getLatestByCID(e,r,i,Ue(o.cid),a);return Qs(c)?await Ci.fromInfo(r,e,i,a,c):await er.fromInfo(r,e,t,n,i,a,c)}function eI(r){return Object.entries(r).reduce((e,[t,n])=>{let i=n;return Cv(n)&&(n.cid=Ue(n.cid).toString(),n.subSkeleton=eI(n.subSkeleton)),{...e,[t]:i}},{})}function Xq(r){return r&&(r.readOnly=!0),r}var Jy=Ar("public",".well-known","exchange");async function tI(r,e,t,n,i,o,{shareWith:a,sharedBy:c}){let f=Array.isArray(a)?a:a.startsWith("did:")?[a]:await Qq(e,n,a),d=i.sharedCounter||1,m=i.mmpt,w=await Promise.all(f.map(async re=>[re,await Wy(r,{counter:d,recipientExchangeDid:re,senderRootDid:c.rootDid})])),x=await r.aes.genKey($t.AES_GCM).then(r.aes.exportKey),T=await er.create(r,e,t,n,m,x,null);await Promise.all(o.map(async([re,be])=>{let Pe=await be.getName();return T.insertSoftLink({key:be.key,name:re,privateName:Pe,username:c.username})}));let F=$t.AES_GCM,N=Object.assign({},T.header),ue=await uc(e,await r.aes.encrypt(Be(JSON.stringify(N),"utf8"),T.key,F));if(w.length){let re=await V8(r,{bareFilter:N.bareNameFilter,shareKey:w[0][1]});await m.add(re,ue.cid)}let pe=ls(H8({entryIndexCid:pi(ue.cid),symmKey:T.key,symmKeyAlgo:F})),De=await Promise.all(w.map(async([re,be])=>{let{publicKey:Pe}=tc(r,re),Y=await r.rsa.encrypt(pe,Pe),ge=await e.putChunked(Y);return{name:be,cid:ge.cid,size:ge.size}}));return await i.addShares(De),{shareId:d.toString(),sharedBy:c}}async function Qq(r,e,t){let n=await e.dataRoot.lookup(t);if(!n)throw new Error("This person doesn't have a filesystem yet.");let o=(await Tt.getSimpleLinks(r,n))["p"]?.cid||null;if(!o)throw new Error("This person's filesystem doesn't have a pretty tree.");let a=await aa.fromCID(r,Ue(o)),c=Zt(Qu(Jy)),f=await a.get(c);return f&&f instanceof aa?Object.keys(f.getLinks()):[]}async function nI(r){await r.mkdir(Ar("private","Apps")),await r.mkdir(Ar("private","Audio")),await r.mkdir(Ar("private","Documents")),await r.mkdir(Ar("private","Photos")),await r.mkdir(Ar("private","Video")),await r.write(Mh("private","Welcome.txt"),new TextEncoder().encode("Welcome to your personal transportable encrypted file system \u{1F44B}"))}async function iI(r,e){let t=await To(r);await e.mkdir(Of(Jy,Ar(t)))}async function oI(r,e){let t=await To(r);return e.exists(Of(Jy,Ar(t)))}h();p();async function m_({crypto:r,accountDID:e}){let t=await aI(r,e);return r.keystore.exportSymmKey(t)}async function tu({crypto:r,accountDID:e,readKey:t}){let n=await aI(r,e);return r.keystore.importSymmKey(t,n)}function sI(r){return Be(r,"base64pad")}function aI(r,e){let t=Ar("private");return Zu({crypto:r,path:t,accountDID:e})}h();p();var Cp,co,wl,ca=class{constructor(e){Cm(this,Cp,void 0);Cm(this,co,void 0);Cm(this,wl,void 0);Im(this,Cp,e.crypto),Im(this,co,e.storage),Im(this,wl,e.eventEmitter),this.fs=e.fs,this.type=e.type,this.username=e.username,Xi(this,wl).emit("session:create",{session:this})}async destroy(){Xi(this,wl).emit("session:destroy",{username:this.username}),await Xi(this,co).removeItem(Xi(this,co).KEYS.ACCOUNT_UCAN),await Xi(this,co).removeItem(Xi(this,co).KEYS.CID_LOG),await Xi(this,co).removeItem(Xi(this,co).KEYS.SESSION),await Xi(this,co).removeItem(Xi(this,co).KEYS.UCANS),await Xi(this,Cp).keystore.clearStore(),this.fs&&this.fs.deactivate()}};Cp=new WeakMap,co=new WeakMap,wl=new WeakMap;function eW(r){return Ye(r)&&ht(r,"username")&&ht(r,"type")}async function y_(r){return r.getItem(r.KEYS.SESSION).then(e=>e||null).then(e=>e?JSON.parse(e):null).then(e=>eW(e)?e:null)}function Cc(r,e){return r.setItem(r.KEYS.SESSION,JSON.stringify({type:e.type,username:e.username}))}h();p();var Mo="webCrypto";async function w_(r,e){let t=await r.reference.didRoot.lookup(e),n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);if(n){let i=za(n),o=Xn(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await Gt(r.crypto);return t===i}}async function b_(r,e,t){let n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN)??void 0,i=await Jr({dependencies:r,audience:t,issuer:await Gt(r.crypto),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{token:rn(i)}}async function tW(r,e,t){let{token:n}=t,i=Xn(n);await $a(r.crypto,i)&&(await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,n),await Cc(r.storage,{type:Mo,username:e}))}async function v_(r,e){return await Cc(r.storage,{type:e.type||Mo,username:e.username}),{success:!0}}async function rW(r,e,t,n){return e?new ca({crypto:r.crypto,storage:r.storage,eventEmitter:n.session,type:Mo,username:e}):null}function Qy(r){return{type:Mo,canDelegateAccount:(...e)=>w_(r,...e),delegateAccount:(...e)=>b_(r,...e),linkDevice:(...e)=>tW(r,...e),register:(...e)=>v_(r,...e),session:rW,createChannel:()=>{throw new Error("Not implemented")},isUsernameValid:()=>{throw new Error("Not implemented")},isUsernameAvailable:()=>{throw new Error("Not implemented")}}}h();p();h();p();h();p();var $r=class extends Error{constructor(e){super(e),this.name="LinkingError"}},fo=class extends Error{constructor(e){super(e),this.name="LinkingWarning"}},Zy=(r,e)=>{switch(e.name){case"LinkingWarning":r.warn(e.message);break;case"LinkingError":throw e;default:throw e}},bl=(r,e,t)=>{try{let n=JSON.parse(r);return e(n)?{ok:!0,value:n}:{ok:!1,error:new fo(`${t.participant} received an unexpected message in ${t.callSite}: ${r}. Ignoring message.`)}}catch{return{ok:!1,error:new fo(`${t.participant} received a message in ${t.callSite} that it could not parse: ${r}. Ignoring message.`)}}};var __=async(r,e)=>{let{username:t}=e,n=m=>Zy(r.manners,m),i=new qa,o={username:t,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},a=async m=>{let{data:w}=m,x=w.arrayBuffer?new TextDecoder().decode(await w.arrayBuffer()):w;switch(o.step){case"BROADCAST":return n(new fo("Consumer is not ready to start linking"));case"NEGOTIATION":if(o.sessionKey)n(new fo("Consumer already received a session key"));else if(!o.temporaryRsaPair||!o.temporaryRsaPair.privateKey)n(new $r("Consumer missing RSA key pair when handling session key message"));else{let T=await oW(r.crypto,o.temporaryRsaPair.privateKey,x);if(T.ok){o.sessionKey=T.value;let{pin:F,challenge:N}=await sW(r.crypto,o.sessionKey);f.send(N),i?.emit("challenge",{pin:Array.from(F)}),o.step="DELEGATION"}else n(T.error)}break;case"DELEGATION":if(!o.sessionKey)n(new $r("Consumer was missing session key when linking device"));else if(!o.username)n(new $r("Consumer was missing username when linking device"));else{let T=await aW(r.auth,r.crypto,o.sessionKey,o.username,x);if(T.ok){let{approved:F}=T.value;i?.emit("link",{approved:F,username:o.username}),await c()}else n(T.error)}break}},c=async()=>{i?.emit("done",void 0),i=null,f.close(),clearInterval(d)},f=await r.auth.createChannel({handleMessage:a,username:t}),d=setInterval(async()=>{if(o.sessionKey)clearInterval(d);else{let{temporaryRsaPair:m,temporaryDID:w}=await iW(r.crypto);o.temporaryRsaPair=m,o.step="NEGOTIATION",f.send(w)}},2e3);return{on:(...m)=>i?.on(...m),cancel:c}},iW=async r=>{let e=await r.rsa.genKey(),t=await r.rsa.exportPublicKey(e.publicKey),n=jf(r,t,"rsa");return{temporaryRsaPair:e,temporaryDID:n}},oW=async(r,e,t)=>{let i=bl(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string"&&"sessionKey"in o&&typeof o.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(i.ok){let{iv:o,msg:a,sessionKey:c}=i.value,f=Be(o,"base64pad"),d;try{let F=Be(c,"base64pad");d=await r.rsa.decrypt(F,e)}catch{return{ok:!1,error:new fo(`Consumer received a session key in handleSessionKey that it could not decrypt: ${t}. Ignoring message`)}}let m=null;try{m=await r.aes.decrypt(Be(a,"base64pad"),d,$t.AES_GCM,f)}catch{return{ok:!1,error:new $r("Consumer could not decrypt closed UCAN with provided session key.")}}let w=Xn(Ge(m,"utf8"));if(await $a(r,w)===!1)return{ok:!1,error:new $r("Consumer received an invalid closed UCAN")};if(w.payload.ptc)return{ok:!1,error:new $r("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let x=w.payload.fct[0]&&w.payload.fct[0].sessionKey;if(!x)return{ok:!1,error:new $r("Consumer received a closed UCAN that was missing a session key in facts.")};let T=Ge(d,"base64pad");return x!==T?{ok:!1,error:new $r("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:d}}else return i},sW=async(r,e)=>{let t=Array.from(r.misc.randomNumbers({amount:6})).map(a=>a%9),n=r.misc.randomNumbers({amount:16}),i=await r.aes.encrypt(Be(JSON.stringify({did:await Gt(r),pin:t}),"utf8"),e,$t.AES_GCM,n),o=JSON.stringify({iv:Ge(n,"base64pad"),msg:Ge(i,"base64pad")});return{pin:t,challenge:o}},aW=async(r,e,t,n,i)=>{let a=bl(i,c=>Ye(c)&&"iv"in c&&typeof c.iv=="string"&&"msg"in c&&typeof c.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(a.ok){let{iv:c,msg:f}=a.value,d=Be(c,"base64"),m=null;try{m=await e.aes.decrypt(Be(f,"base64pad"),t,$t.AES_GCM,d)}catch{return{ok:!1,error:new fo("Consumer ignoring message that could not be decrypted in linkDevice.")}}let w=bl(Ge(m,"utf8"),Ye,{participant:"Consumer",callSite:"linkDevice"});return w.ok?w?.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await r.linkDevice(n,w.value),{ok:!0,value:{approved:!0}}):w}else return a};h();p();var x_=async(r,e)=>{let{username:t}=e,n=x=>Zy(r.manners,x);if(!await r.auth.canDelegateAccount(t))throw new $r(`Producer cannot delegate account for username ${t}`);let o=new qa,a={username:t,sessionKey:null,step:"BROADCAST"},c=async x=>{let{data:T}=x,F=T.arrayBuffer?new TextDecoder().decode(await T.arrayBuffer()):T;switch(a.step){case"BROADCAST":{let{sessionKey:N,sessionKeyMessage:ue}=await uW(r.crypto,F);return a.sessionKey=N,a.step="NEGOTIATION",w.send(ue)}case"NEGOTIATION":if(a.sessionKey){let N=await cW(r.crypto,a.sessionKey,F);if(a.step="DELEGATION",N.ok){let{pin:ue,audience:pe}=N.value,De=()=>{let Pe=!1;return{confirmPin:async()=>{Pe||(Pe=!0,a.sessionKey?await fW(r.auth,r.crypto,a.sessionKey,t,pe,f):n(new $r("Producer missing session key when delegating account")))},rejectPin:async()=>{Pe||(Pe=!0,a.sessionKey?await lW(r.crypto,a.sessionKey,f):n(new $r("Producer missing session key when declining account delegation")))}}},{confirmPin:re,rejectPin:be}=De();o?.emit("challenge",{pin:ue,confirmPin:re,rejectPin:be})}else n(N.error)}else n(new $r("Producer missing session key when handling user challenge"));break;case"DELEGATION":return n(new fo("Producer received an unexpected message while delegating an account. The message will be ignored."))}},f=async(x,T)=>{await w.send(x),a.username!=null&&(o?.emit("link",{approved:T,username:a.username}),d())},d=()=>{a.sessionKey=null,a.step="BROADCAST"},m=async()=>{o?.emit("done",void 0),o=null,w.close()},w=await r.auth.createChannel({username:t,handleMessage:c});return{on:(...x)=>o?.on(...x),cancel:m}},uW=async(r,e)=>{let t=await r.aes.genKey($t.AES_GCM),n=await r.aes.exportKey(t),{publicKey:i}=tc(r,e),o=await r.rsa.encrypt(n,i),a=await Jr({dependencies:{crypto:r},issuer:await Gt(r),audience:e,lifetimeInSeconds:60*5,facts:[{sessionKey:Ge(n,"base64pad")}],potency:null}),c=r.misc.randomNumbers({amount:16}),f=await r.aes.encrypt(Be(rn(a),"utf8"),t,$t.AES_GCM,c),d=JSON.stringify({iv:Ge(c,"base64pad"),msg:Ge(f,"base64pad"),sessionKey:Ge(o,"base64pad")});return{sessionKey:t,sessionKeyMessage:d}},cW=async(r,e,t)=>{let i=bl(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(i.ok){let{iv:o,msg:a}=i.value,c=Be(o,"base64pad"),f=null;try{f=await r.aes.decrypt(Be(a,"base64pad"),e,$t.AES_GCM,c)}catch{return{ok:!1,error:new fo("Ignoring message that could not be decrypted.")}}let d=JSON.parse(Ge(f,"utf8")),m=d.pin??null,w=d.did??null;return m!==null&&w!==null?{ok:!0,value:{pin:m,audience:w}}:{ok:!1,error:new $r(`Producer received invalid pin ${d.pin} or audience ${d.audience}`)}}else return i},fW=async(r,e,t,n,i,o)=>{let a=await r.delegateAccount(n,i),c=JSON.stringify(a),f=e.misc.randomNumbers({amount:16}),d=await e.aes.encrypt(Be(c,"utf8"),t,$t.AES_GCM,f),m=JSON.stringify({iv:Ge(f,"base64pad"),msg:Ge(d,"base64pad")});await o(m,!0)},lW=async(r,e,t)=>{let n=JSON.stringify({linkStatus:"DENIED"}),i=r.misc.randomNumbers({amount:16}),o=await r.aes.encrypt(Be(n,"utf8"),e,$t.AES_GCM,i),a=JSON.stringify({iv:Ge(i,"base64pad"),msg:Ge(o,"base64pad")});await t(a,!1)};h();p();function tfe(r){return{...r,permissions:{...r.permissions,...Vm}}}function vl(r){return Ht(r.namespace)?r.namespace:VD(r.namespace)}h();p();h();p();h();p();function fI(r,e,t,n){var i,o=!1,a=0;function c(){i&&clearTimeout(i)}function f(){c(),o=!0}typeof e!="boolean"&&(n=t,t=e,e=void 0);function d(){for(var m=arguments.length,w=new Array(m),x=0;x<m;x++)w[x]=arguments[x];var T=this,F=Date.now()-a;if(o)return;function N(){a=Date.now(),t.apply(T,w)}function ue(){i=void 0}n&&!i&&N(),c(),n===void 0&&F>r?N():e!==!0&&(i=setTimeout(n?ue:N,n===void 0?r-F:r))}return d.cancel=f,d}h();p();var _l=class extends Error{constructor(e){super(e),this.name="NoPermissionError"}};h();p();h();p();h();p();function lI(r){let e=r.slice(1);return e.length<1?null:e}h();p();h();p();var Zn=class{constructor(e){this.node=e}back(e=-1){let t=Math.abs(Math.min(e,-1));return Array.from({length:t},(n,i)=>i).reduce(n=>n.then(i=>i?Zn._getPreviousVersion(i):null),Promise.resolve(this.node))}async prior(e){return Zn._prior(this.node,e)}async list(e=5){let{acc:t}=await Array.from({length:e},(n,i)=>i).reduce((n,i)=>n.then(({node:o,acc:a})=>o?Zn._getPreviousVersion(o).then(c=>({node:c,acc:[...a,{delta:-(i+1),timestamp:o.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:a})),Zn._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return t}static async _getPreviousVersion(e){return e.header.previous?e.fromCID(Ue(e.header.previous)):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;let n=await Zn._getPreviousVersion(e);return n?Zn._prior(n,t):null}};var ru=class extends ml{constructor({depot:t,content:n,header:i,cid:o}){super(n);this.depot=t,this.cid=o,this.header=i,this.history=new Zn(a(this));function a(c){return{...c,fromCID:async f=>a(await ru.fromCID(t,f))}}}static instanceOf(t){return Ye(t)&&ht(t,"content")&&ht(t,"header")&&_v(t.header)}static async create(t,n){return new ru({depot:t,content:n,header:{metadata:eu(!0,Ai)},cid:null})}static async fromCID(t,n){let i=await Xs.get(t,n);return ru.fromInfo(t,i,n)}static async fromInfo(t,n,i){let{userland:o,metadata:a,previous:c}=n,f=await Tt.getFile(t,Ue(o));return new ru({depot:t,content:f,header:{metadata:a,previous:c},cid:i})}async putDetailed(){let t=await Xs.putFile(this.depot,this.content,Hy(this.header.metadata),this.cid);return this.cid=t.cid,t}},xl=ru;var Pn=class extends gl{constructor({depot:t,reference:n,links:i,header:o,cid:a}){super();this.depot=t,this.reference=n,this.children={},this.cid=a,this.links=i,this.header=o,this.history=new Zn(c(this));function c(f){return{...f,fromCID:async d=>c(await Pn.fromCID(t,n,d))}}}static async empty(t,n){return new Pn({depot:t,reference:n,links:{},header:{metadata:eu(!1,Ai),skeleton:{}},cid:null})}static async fromCID(t,n,i){let o=await Xs.get(t,i);if(!GA(o))throw new Error(`Could not parse a valid public tree at: ${i}`);return Pn.fromInfo(t,n,o,i)}static async fromInfo(t,n,i,o){let{userland:a,metadata:c,previous:f,skeleton:d}=i,m=await Tt.getFileSystemLinks(t,Ue(a));return new Pn({depot:t,reference:n,links:m,header:{metadata:c,previous:f,skeleton:d},cid:o})}static instanceOf(t){return ht(t,"links")&&ht(t,"header")&&HA(t.links)&&vv(t.header)}async createChildTree(t,n){let i=await Pn.empty(this.depot,this.reference),o=this.children[t];if(o){if(xl.instanceOf(o))throw new Error(`There is a file at the given path: ${t}`);if(Pn.instanceOf(o))return o;throw new Error(`Not a public tree at the given path: ${t}`)}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await xl.create(this.depot,t);else if(xl.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=await Xs.putTree(this.depot,this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=t.cid,t}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.skeleton[t]||null;if(i===null)return null;if(yy(i)){let o=Ue(i.cid);n=i.isFile?await xl.fromCID(this.depot,o):await Pn.fromCID(this.depot,this.reference,o)}else if(Ur(i))return Pn.resolveSoftLink(this.depot,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async get(t){if(t.length<1)return this;let n=await this.getRecurse(this.header.skeleton,t);if(yy(n)){let i=Ue(n.cid),o=await Xs.get(this.depot,i);return YA(o)?xl.fromInfo(this.depot,o,i):Pn.fromInfo(this.depot,this.reference,o,i)}return n}async getRecurse(t,n){let i=n[0],o=t[i]||null,a=lI(n);if(Ur(o)){let c=await Pn.resolveSoftLink(this.depot,this.reference,o);return a?Pn.instanceOf(c)?c.get(a).then(hW):null:c}else return o===null||a===null?o:o.subSkeleton?this.getRecurse(o.subSkeleton,a):null}assignLink({name:t,link:n,skeleton:i}){this.links[t]=n,this.header.skeleton[t]=i,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i){let[o,...a]=i.ipns.split("/"),c=$h(a.join("/"));if(!(Lf("public",c)||Lf("p",c)))throw new Error("Mixing public and private soft links is not supported yet.");let d=await n.dns.lookupDnsLink(o);if(!d)throw new Error(`Failed to resolve the soft link: ${i.ipns} - Could not resolve DNSLink`);let m=(await Tt.getSimpleLinks(t,Ue(d))).public.cid,w=Qu(c),T=await(await Pn.fromCID(t,n,Ue(m))).get(Zt(w));return T&&(T.readOnly=!0),T}getLinks(){return Object.values(this.links).reduce((t,n)=>{let i=this.header.skeleton[n.name];return{...t,[n.name]:i&&i.isFile!==void 0?{...n,isFile:i.isFile}:{...n}}},{})}updateLink(t,n){let{cid:i,metadata:o,userland:a,size:c,isFile:f,skeleton:d}=n;return this.assignLink({name:t,link:On(t,i,!1,c),skeleton:{cid:pi(i),metadata:o,userland:a,subSkeleton:d,isFile:f}}),this}insertSoftLink({name:t,path:n,username:i}){let o={ipns:this.reference.dataRoot.domain(i)+`/public/${Cr(n)}`,name:t};return this.assignLink({name:t,link:o,skeleton:o}),this}};function hW(r){return r&&(r.readOnly=!0),r}var gs=Pn;h();p();h();p();h();p();var P_=({name:r,code:e,encode:t})=>new E_(r,e,t),E_=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ka(this.code,t):t.then(n=>Ka(this.code,n))}else throw Error("Unknown type, must be binary type")}};h();p();h();p();var fe,xr=new Array(32).fill(void 0);xr.push(void 0,null,!0,!1);function Xt(r){return xr[r]}var Ko=0,eg;function El(){return eg.byteLength===0&&(eg=new Uint8Array(fe.memory.buffer)),eg}var tg=new TextEncoder("utf-8"),pW=typeof tg.encodeInto=="function"?function(r,e){return tg.encodeInto(r,e)}:function(r,e){let t=tg.encode(r);return e.set(t),{read:r.length,written:t.length}};function rg(r,e,t){if(t===void 0){let c=tg.encode(r),f=e(c.length);return El().subarray(f,f+c.length).set(c),Ko=c.length,f}let n=r.length,i=e(n),o=El(),a=0;for(;a<n;a++){let c=r.charCodeAt(a);if(c>127)break;o[i+a]=c}if(a!==n){a!==0&&(r=r.slice(a)),i=t(i,n,n=a+r.length*3);let c=El().subarray(i+a,i+n),f=pW(r,c);a+=f.written}return Ko=a,i}function dW(r){return r==null}var ng;function Oe(){return ng.byteLength===0&&(ng=new Int32Array(fe.memory.buffer)),ng}var Ip=xr.length;function mW(r){r<36||(xr[r]=Ip,Ip=r)}function kt(r){let e=Xt(r);return mW(r),e}var wI=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});wI.decode();function nu(r,e){return wI.decode(El().subarray(r,r+e))}function Pt(r){Ip===xr.length&&xr.push(xr.length+1);let e=Ip;return Ip=xr[e],xr[e]=r,e}function S_(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=S_(r[0]));for(let a=1;a<i;a++)o+=", "+S_(r[a]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}var pI=new FinalizationRegistry(r=>{fe.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function yW(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(...a)=>{i.cnt++;let c=i.a;i.a=0;try{return n(c,i.b,...a)}finally{--i.cnt===0?(fe.__wbindgen_export_2.get(i.dtor)(c,i.b),pI.unregister(i)):i.a=c}};return o.original=i,pI.register(o,i,i),o}function gW(r,e,t){fe._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha1ec3a5271c97341(r,e,Pt(t))}var Sn=32;function Ii(r){if(Sn==1)throw new Error("out of js stack");return xr[--Sn]=r,Sn}function ig(r,e){let t=e(r.length*1);return El().set(r,t/1),Ko=r.length,t}function wW(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function D_(r,e){return El().subarray(r/1,r/1+e)}function dI(r,e){try{return r.apply(this,e)}catch(t){fe.__wbindgen_exn_store(Pt(t))}}function bW(r,e,t,n){fe.wasm_bindgen__convert__closures__invoke2_mut__h1338dfb1e5ae1cd8(r,e,Pt(t),Pt(n))}var qfe=Object.freeze({DagProtobuf:112,112:"DagProtobuf",DagCbor:113,113:"DagCbor",DagJson:297,297:"DagJson",Raw:85,85:"Raw"}),Wfe=new FinalizationRegistry(r=>fe.__wbg_foreignblockstore_free(r));var mI=new FinalizationRegistry(r=>fe.__wbg_publicdirectory_free(r)),jo=class{static __wrap(e){let t=Object.create(jo.prototype);return t.ptr=e,mI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,mI.unregister(this),e}free(){let e=this.__destroy_into_raw();fe.__wbg_publicdirectory_free(e)}constructor(e){try{let t=fe.publicdirectory_new(Ii(e));return jo.__wrap(t)}finally{xr[Sn++]=void 0}}getNode(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_getNode(a,this.ptr,Ii(e),Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0}}lookupNode(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16),c=rg(e,fe.__wbindgen_malloc,fe.__wbindgen_realloc),f=Ko;fe.publicdirectory_lookupNode(a,this.ptr,c,f,Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}store(e){try{let o=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_store(o,this.ptr,Pt(e));var t=Oe()[o/4+0],n=Oe()[o/4+1],i=Oe()[o/4+2];if(i)throw kt(n);return kt(t)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16),c=ig(e,fe.__wbindgen_malloc),f=Ko;fe.publicdirectory_load(a,c,f,Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}read(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_read(a,this.ptr,Ii(e),Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0}}ls(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_ls(a,this.ptr,Ii(e),Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0}}rm(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_rm(a,this.ptr,Ii(e),Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0}}write(e,t,n,i){try{let f=fe.__wbindgen_add_to_stack_pointer(-16),d=ig(t,fe.__wbindgen_malloc),m=Ko;fe.publicdirectory_write(f,this.ptr,Ii(e),d,m,Ii(n),Pt(i));var o=Oe()[f/4+0],a=Oe()[f/4+1],c=Oe()[f/4+2];if(c)throw kt(a);return kt(o)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0,xr[Sn++]=void 0}}basicMv(e,t,n,i){try{let f=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_basicMv(f,this.ptr,Ii(e),Ii(t),Ii(n),Pt(i));var o=Oe()[f/4+0],a=Oe()[f/4+1],c=Oe()[f/4+2];if(c)throw kt(a);return kt(o)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0,xr[Sn++]=void 0,xr[Sn++]=void 0}}mkdir(e,t,n){try{let c=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_mkdir(c,this.ptr,Ii(e),Ii(t),Pt(n));var i=Oe()[c/4+0],o=Oe()[c/4+1],a=Oe()[c/4+2];if(a)throw kt(o);return kt(i)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0,xr[Sn++]=void 0}}baseHistoryOn(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16);wW(e,jo),fe.publicdirectory_baseHistoryOn(a,this.ptr,e.ptr,Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=fe.publicdirectory_previousCid(this.ptr);return kt(e)}metadata(){try{let i=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_metadata(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw kt(t);return kt(e)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}asNode(){let e=fe.publicdirectory_asNode(this.ptr);return Pl.__wrap(e)}getId(){try{let n=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicdirectory_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return nu(e,t)}finally{fe.__wbindgen_add_to_stack_pointer(16),fe.__wbindgen_free(e,t)}}},yI=new FinalizationRegistry(r=>fe.__wbg_publicfile_free(r)),Ic=class{static __wrap(e){let t=Object.create(Ic.prototype);return t.ptr=e,yI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,yI.unregister(this),e}free(){let e=this.__destroy_into_raw();fe.__wbg_publicfile_free(e)}constructor(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16),c=ig(t,fe.__wbindgen_malloc),f=Ko;fe.publicfile_new(a,Ii(e),c,f);var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return Ic.__wrap(n)}finally{fe.__wbindgen_add_to_stack_pointer(16),xr[Sn++]=void 0}}getId(){try{let n=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicfile_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return nu(e,t)}finally{fe.__wbindgen_add_to_stack_pointer(16),fe.__wbindgen_free(e,t)}}store(e){try{let o=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicfile_store(o,this.ptr,Pt(e));var t=Oe()[o/4+0],n=Oe()[o/4+1],i=Oe()[o/4+2];if(i)throw kt(n);return kt(t)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=fe.__wbindgen_add_to_stack_pointer(-16),c=ig(e,fe.__wbindgen_malloc),f=Ko;fe.publicfile_load(a,c,f,Pt(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw kt(i);return kt(n)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=fe.publicfile_previousCid(this.ptr);return kt(e)}metadata(){try{let i=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicfile_metadata(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw kt(t);return kt(e)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}contentCid(){try{let i=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicfile_contentCid(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=D_(e,t).slice();return fe.__wbindgen_free(e,t*1),n}finally{fe.__wbindgen_add_to_stack_pointer(16)}}},gI=new FinalizationRegistry(r=>fe.__wbg_publicnode_free(r)),Pl=class{static __wrap(e){let t=Object.create(Pl.prototype);return t.ptr=e,gI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,gI.unregister(this),e}free(){let e=this.__destroy_into_raw();fe.__wbg_publicnode_free(e)}asDir(){try{let i=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicnode_asDir(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw kt(t);return jo.__wrap(e)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}asFile(){try{let i=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicnode_asFile(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw kt(t);return Ic.__wrap(e)}finally{fe.__wbindgen_add_to_stack_pointer(16)}}isDir(){return fe.publicnode_isDir(this.ptr)!==0}isFile(){return fe.publicnode_isFile(this.ptr)!==0}getId(){try{let n=fe.__wbindgen_add_to_stack_pointer(-16);fe.publicnode_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return nu(e,t)}finally{fe.__wbindgen_add_to_stack_pointer(16),fe.__wbindgen_free(e,t)}}};async function vW(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function _W(){let r={};return r.wbg={},r.wbg.__wbindgen_string_get=function(e,t){let n=Xt(t),i=typeof n=="string"?n:void 0;var o=dW(i)?0:rg(i,fe.__wbindgen_malloc,fe.__wbindgen_realloc),a=Ko;Oe()[e/4+1]=a,Oe()[e/4+0]=o},r.wbg.__wbindgen_object_drop_ref=function(e){kt(e)},r.wbg.__wbg_publicdirectory_new=function(e){let t=jo.__wrap(e);return Pt(t)},r.wbg.__wbg_publicfile_new=function(e){let t=Ic.__wrap(e);return Pt(t)},r.wbg.__wbg_publicnode_new=function(e){let t=Pl.__wrap(e);return Pt(t)},r.wbg.__wbindgen_string_new=function(e,t){let n=nu(e,t);return Pt(n)},r.wbg.__wbg_putBlock_88cdb3be9020efb7=function(e,t,n,i){var o=D_(t,n).slice();fe.__wbindgen_free(t,n*1);let a=Xt(e).putBlock(o,i>>>0);return Pt(a)},r.wbg.__wbg_getBlock_ef67031e09d5c6fd=function(e,t,n){var i=D_(t,n).slice();fe.__wbindgen_free(t,n*1);let o=Xt(e).getBlock(i);return Pt(o)},r.wbg.__wbindgen_bigint_new=function(e,t){let n=BigInt(nu(e,t));return Pt(n)},r.wbg.__wbindgen_number_new=function(e){return Pt(e)},r.wbg.__wbindgen_cb_drop=function(e){let t=kt(e).original;return t.cnt--==1?(t.a=0,!0):!1},r.wbg.__wbg_new_693216e109162396=function(){let e=new Error;return Pt(e)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){let n=Xt(t).stack,i=rg(n,fe.__wbindgen_malloc,fe.__wbindgen_realloc),o=Ko;Oe()[e/4+1]=o,Oe()[e/4+0]=i},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(nu(e,t))}finally{fe.__wbindgen_free(e,t)}},r.wbg.__wbg_get_f0f4f1608ebf633e=function(e,t){let n=Xt(e)[t>>>0];return Pt(n)},r.wbg.__wbg_length_93debb0e2e184ab6=function(e){return Xt(e).length},r.wbg.__wbg_new_2ab697f1555e0dbc=function(){let e=new Array;return Pt(e)},r.wbg.__wbg_new_306ce8d57919e6ae=function(){let e=new Object;return Pt(e)},r.wbg.__wbg_push_811c8b08bf4ff9d5=function(e,t){return Xt(e).push(Xt(t))},r.wbg.__wbg_new_651776e932b7e9c7=function(e,t){let n=new Error(nu(e,t));return Pt(n)},r.wbg.__wbg_call_9855a4612eb496cb=function(){return dI(function(e,t,n){let i=Xt(e).call(Xt(t),Xt(n));return Pt(i)},arguments)},r.wbg.__wbg_getTime_7c8d3b79f51e2b87=function(e){return Xt(e).getTime()},r.wbg.__wbg_new_78403b138428b684=function(e,t){try{var n={a:e,b:t},i=(a,c)=>{let f=n.a;n.a=0;try{return bW(f,n.b,a,c)}finally{n.a=f}};let o=new Promise(i);return Pt(o)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_f269ce174f88b294=function(e){let t=Promise.resolve(Xt(e));return Pt(t)},r.wbg.__wbg_then_1c698eedca15eed6=function(e,t){let n=Xt(e).then(Xt(t));return Pt(n)},r.wbg.__wbg_then_4debc41d4fc92ce5=function(e,t,n){let i=Xt(e).then(Xt(t),Xt(n));return Pt(i)},r.wbg.__wbg_buffer_de1150f91b23aa89=function(e){let t=Xt(e).buffer;return Pt(t)},r.wbg.__wbg_newwithbyteoffsetandlength_9ca61320599a2c84=function(e,t,n){let i=new Uint8Array(Xt(e),t>>>0,n>>>0);return Pt(i)},r.wbg.__wbg_new_97cf52648830a70d=function(e){let t=new Uint8Array(Xt(e));return Pt(t)},r.wbg.__wbg_set_a0172b213e2469e9=function(e,t,n){Xt(e).set(Xt(t),n>>>0)},r.wbg.__wbg_length_e09c0b925ab8de5d=function(e){return Xt(e).length},r.wbg.__wbg_set_b12cd0ab82903c2f=function(){return dI(function(e,t,n){return Reflect.set(Xt(e),Xt(t),Xt(n))},arguments)},r.wbg.__wbindgen_debug_string=function(e,t){let n=S_(Xt(t)),i=rg(n,fe.__wbindgen_malloc,fe.__wbindgen_realloc),o=Ko;Oe()[e/4+1]=o,Oe()[e/4+0]=i},r.wbg.__wbindgen_throw=function(e,t){throw new Error(nu(e,t))},r.wbg.__wbindgen_memory=function(){let e=fe.memory;return Pt(e)},r.wbg.__wbindgen_closure_wrapper945=function(e,t,n){let i=yW(e,t,417,gW);return Pt(i)},r}function xW(r,e){return fe=r.exports,bI.__wbindgen_wasm_module=e,ng=new Int32Array(fe.memory.buffer),eg=new Uint8Array(fe.memory.buffer),fe}async function bI(r){typeof r>"u"&&(r=new URL("wasm_wnfs_bg.wasm",import.meta.url));let e=_W();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await vW(await r,e);return xW(t,n)}var vI=bI;h();p();var Tp=class{constructor(e){this.depot=e}async getBlock(e){let t=we.decode(e);return await this.depot.getBlock(t)}async putBlock(e,t){if(!$A(t))throw new Error(`No codec was registered for the code: ${gv(t)}`);return(await this.depot.putBlock(e,t)).bytes}};var _I=!1;async function xI({manners:r}){if(_I)return;_I=!0,r.log("\u23EC Loading WNFS WASM");let e=performance.now();await vI(r.wnfsWasmLookup(p2));let t=performance.now()-e;r.log(`\u{1F9EA} Loaded WNFS WASM (${t.toFixed(0)}ms)`)}var iu=class{constructor(e,t,n,i){this.dependencies=e,this.root=Promise.resolve(t),this.lastRoot=t,this.store=n,this.readOnly=i}static async empty(e){await xI(e);let t=new Tp(e.depot),n=new jo(new Date);return new iu(e,n,t,!1)}static async fromCID(e,t){await xI(e);let n=new Tp(e.depot),i=await jo.load(t.bytes,n);return new iu(e,i,n,!1)}async atomically(e){let t=await this.root;this.root=e(t),await this.root}async withError(e,t){try{return await e}catch(n){throw console.error(`Error during WASM operation ${t}:`),n}}async ls(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`ls(${e.join("/")})`);if(n==null)throw new Error(`Can't ls ${e.join("/")}: No such directory`);if(!n.isDir())throw new Error(`Can't ls ${e.join("/")}: Not a directory`);let i=n.asDir(),{result:o}=await this.withError(t.ls(e,this.store),`ls(${e.join("/")})`),a={};for(let c of o){let f=await i.lookupNode(c.name,this.store),d=f.isFile()?we.decode(await f.asFile().store(this.store)):we.decode(await f.asDir().store(this.store));a[c.name]={name:c.name,isFile:c.metadata.unixMeta.kind==="file",size:0,cid:d}}return a}async mkdir(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.mkdir(e,new Date,this.store),`mkdir(${e.join("/")})`);return n}),this}async cat(e){let t=await this.root,{result:n}=await this.withError(t.read(e,this.store),`read(${e.join("/")})`),i=we.decode(n);return this.dependencies.depot.getUnixFile(i)}async add(e,t){let{cid:n}=await this.dependencies.depot.putChunked(t);return await this.atomically(async i=>{let{rootDir:o}=await this.withError(i.write(e,n.bytes,new Date,this.store),`write(${e.join("/")})`);return o}),this}async rm(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.rm(e,this.store),`rm(${e.join("/")})`);return n}),this}async mv(e,t){return await this.atomically(async n=>{let{rootDir:i}=await this.withError(n.basicMv(e,t,new Date,this.store),`basicMv(${e.join("/")}, ${t.join("/")})`);return i}),this}async get(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`getNode(${e.join("/")})`);if(n==null)return null;if(n.isFile()){let i=n.asFile(),o=await this.cat(e),a=e.slice(0,-1),c=e[e.length-1];return new C_(o,a,c,this,i)}else if(n.isDir()){let i=n.asDir();return new A_(this.readOnly,e,this,i)}throw new Error("Unknown node type. Can only handle files and directories.")}async exists(e){let t=await this.root;try{return await t.getNode(e,this.store),!0}catch{return!1}}async historyStep(){return await this.atomically(async e=>{let{rootDir:t}=await e.baseHistoryOn(this.lastRoot,this.store);return this.lastRoot=e,t}),await this.root}async put(){let t=await(await this.historyStep()).store(this.store);return we.decode(t)}async putDetailed(){return{cid:await this.put(),size:0,isFile:!1}}},A_=class{constructor(e,t,n,i){this.readOnly=e,this.directory=t,this.publicRoot=n,this.cachedDir=i}checkMutability(e){if(this.readOnly)throw new Error(`Directory is read-only. Cannot ${e}`)}async updateCache(){let t=await(await this.publicRoot.root).getNode(this.directory,this.publicRoot.store);this.cachedDir=t.asDir()}get header(){return EI(this.cachedDir)}async ls(e){return await this.publicRoot.ls([...this.directory,...e])}async mkdir(e){return this.checkMutability(`mkdir at ${[...this.directory,...e].join("/")}`),await this.publicRoot.mkdir([...this.directory,...e]),await this.updateCache(),this}async cat(e){return await this.publicRoot.cat([...this.directory,...e])}async add(e,t){return this.checkMutability(`write at ${[...this.directory,...e].join("/")}`),await this.publicRoot.add([...this.directory,...e],t),await this.updateCache(),this}async rm(e){return this.checkMutability(`remove at ${[...this.directory,...e].join("/")}`),await this.publicRoot.rm([...this.directory,...e]),await this.updateCache(),this}async mv(e,t){return this.checkMutability(`mv from ${[...this.directory,...e].join("/")} to ${[...this.directory,...t].join("/")}`),await this.publicRoot.mv([...this.directory,...e],[...this.directory,...t]),await this.updateCache(),this}async get(e){return await this.publicRoot.get([...this.directory,...e])}async exists(e){return await this.publicRoot.exists([...this.directory,...e])}async put(){await this.publicRoot.put();let t=await(await this.publicRoot.root).store(this.publicRoot.store);return we.decode(t)}async putDetailed(){return{isFile:!1,size:0,cid:await this.put()}}},C_=class extends Dp{constructor(t,n,i,o,a){super(t);this.directory=n,this.filename=i,this.publicRoot=o,this.cachedFile=a}async updateCache(){let n=await(await this.publicRoot.root).getNode([...this.directory,this.filename],this.publicRoot.store);this.cachedFile=n.asFile()}get header(){return EI(this.cachedFile)}async updateContent(t){return await super.updateContent(t),await this.updateCache(),this}async putDetailed(){let t=await this.publicRoot.root,n=[...this.directory,this.filename],{result:i}=await t.getNode(n,this.publicRoot.store);if(i==null)throw new Error(`No file at /${n.join("/")}.`);if(!i.isFile())throw new Error(`Not a file at /${n.join("/")}`);let o=i.asFile();return{isFile:!0,size:0,cid:we.decode(await o.store(this.publicRoot.store))}}};function EI(r){let e=r.metadata(),t={isFile:e.unixMeta.kind==="file",version:e.version,unixMeta:{_type:e.unixMeta.kind,ctime:Number(e.unixMeta.created),mtime:Number(e.unixMeta.modified),mode:e.unixMeta.mode}},n=r.previousCid();return n==null?{metadata:t}:{metadata:t,previous:we.decode(n)}}var kp=class{constructor({dependencies:e,links:t,mmpt:n,privateLog:i,sharedCounter:o,sharedLinks:a,publicTree:c,prettyTree:f,privateNodes:d}){this.dependencies=e,this.links=t,this.mmpt=n,this.privateLog=i,this.sharedCounter=o,this.sharedLinks=a,this.publicTree=c,this.prettyTree=f,this.privateNodes=d}static async empty({accountDID:e,dependencies:t,rootKey:n,wnfsWasm:i}){i&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let o=i?await iu.empty(t):await gs.empty(t.depot,t.reference),a=await aa.empty(t.depot),c=gn.create(t.depot),f=Cr(Ar("private")),d=await er.create(t.crypto,t.depot,t.manners,t.reference,c,n,null);await d.put();let m=new kp({dependencies:t,links:{},mmpt:c,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:o,prettyTree:a,privateNodes:{[f]:d}});return await tu({accountDID:e,crypto:t.crypto,readKey:n}),await m.setVersion(i?Sc:Ai),await Promise.all([m.updatePuttable("public",o),m.updatePuttable("p",a),m.updatePuttable("private",c)]),m}static async fromCID({accountDID:e,dependencies:t,cid:n,permissions:i}){let{crypto:o,depot:a,manners:c}=t,f=await Tt.getSimpleLinks(t.depot,n),d=await SW(o,e,i||Vm),m=await PI(t.depot,f),w=p_(m,Sc);w&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let x=f["public"]?.cid||null,T=x===null?await gs.empty(t.depot,t.reference):w?await iu.fromCID({depot:a,manners:c},Ue(x)):await gs.fromCID(t.depot,t.reference,Ue(x)),F=f["p"]?await aa.fromCID(t.depot,Ue(f["p"].cid)):await aa.empty(t.depot),N=f["private"]?.cid||null,ue,pe;N===null?(ue=gn.create(t.depot),pe={}):(ue=await gn.fromCID(t.depot,Ue(N)),pe=await PW(t,e,d,ue));let De=f["privateLog"]?.cid,re=De?await Xf(a,Ue(De)).then(Me=>Me.Links.map(Zf)).then(Me=>Me.sort((vt,Nt)=>parseInt(vt.name,10)-parseInt(Nt.name,10))):[],be=f["shared"]?.cid||null,Pe=be?await this.getSharedLinks(a,Ue(be)):{},Y=f["sharedCounter"]?.cid||null,ge=Y?await Tt.getFile(t.depot,Ue(Y)).then(Me=>JSON.parse(Ge(Me,"utf8"))):1,_e=new kp({dependencies:t,links:f,mmpt:ue,privateLog:re,sharedCounter:ge,sharedLinks:Pe,publicTree:T,prettyTree:F,privateNodes:pe});return f["version"]==null&&await _e.setVersion(Ai),_e}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return Tt.putLinks(this.dependencies.depot,this.links)}updateLink(e,t){let{cid:n,size:i,isFile:o}=t;return this.links[e]=On(e,n,o,i),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}findPrivateNode(e){return I_(this.privateNodes,e)}async addPrivateLogEntry(e,t){let n=[...this.privateLog],i=Math.max(0,n.length-1),o=n[i]?.cid?await e.getUnixFile(Ue(n[i].cid)).then(w=>Ge(w,"utf8")).then(w=>w.split(",")):[];o.length+1>kp.LOG_CHUNK_SIZE&&(i=i+1,o=[]);let c=await this.dependencies.crypto.hash.sha256(Be(pi(t),"utf8")),f=[...o,c],d=await Tt.putFile(this.dependencies.depot,Be(f.join(","),"utf8"));n[i]={name:i.toString(),cid:d.cid,size:d.size};let m=await op(this.dependencies.depot,n.map(gy));this.updateLink("privateLog",{cid:m,isFile:!1,size:await this.dependencies.depot.size(m)}),this.privateLog=n}async addShares(e){this.sharedLinks=e.reduce((i,o)=>({...i,[o.name]:o}),this.sharedLinks);let t=Object.values(this.sharedLinks).reduce((i,{cid:o,name:a,size:c})=>({...i,[a]:{cid:o,name:a,size:c}}),{}),n=await this.dependencies.depot.putBlock(ls(t),Ha);return this.updateLink("shared",{cid:n,isFile:!1,size:await this.dependencies.depot.size(n)}),this}static async getSharedLinks(e,t){let n=await e.getBlock(t),i=no(n);if(!Ye(i))throw new Error("Invalid shared section, not an object");return Object.values(i).reduce((o,a)=>{if(!Ye(a))return o;let c=a.name?a.name:null,f=a.cid?Ue(a.cid):null;return!c||!f?o:{...o,[c]:{name:c,cid:f,size:a.size||0}}},{})}async setSharedCounter(e){this.sharedCounter=e;let{cid:t,size:n}=await Tt.putFile(this.dependencies.depot,Be(JSON.stringify(e),"utf8"));return this.updateLink("sharedCounter",{cid:t,isFile:!0,size:n}),e}async bumpSharedCounter(){let e=this.sharedCounter+1;return this.setSharedCounter(e)}async setVersion(e){let t=Be(Pc(e),"utf8"),n=await Tt.putFile(this.dependencies.depot,t);return this.updateLink("version",n)}async getVersion(){return await PI(this.dependencies.depot,this.links)}},ou=kp;ou.LOG_CHUNK_SIZE=1020;async function EW(r,e,t,n,i){let o=await Wm({accountDID:t,crypto:r,path:i}),a=await e.getItem(o);if(a)return a;let[c,f]=I_(n,i);if(!f)return null;let m=Zt(i).slice(Zt(c).length);return Ci.instanceOf(f)?m.length===0?f.header.bareNameFilter:null:(f.exists(m)||(hn(i)?await f.mkdir(m):await f.add(m,new Uint8Array)),f.get(m).then(w=>w?w.header.bareNameFilter:null))}function I_(r,e){let t=r[Cr(e)];if(t)return[e,t];let n=Lb(e);return n?I_(r,n):[e,null]}function PW(r,e,t,n){let{crypto:i,storage:o}=r;return DW(t).reduce((a,{path:c,key:f})=>a.then(async d=>{let m,w=Zt(c);if(w.length===1&&w[0]==="private")m=await er.fromBaseKey(r.crypto,r.depot,r.manners,r.reference,n,f);else{let T=await EW(i,o,e,d,c);if(!T)throw new Error(`Was trying to load the PrivateTree for the path \`${c}\`, but couldn't find the bare name filter for it.`);hn(c)?m=await er.fromBareNameFilter(r.crypto,r.depot,r.manners,r.reference,n,T,f):m=await Ci.fromBareNameFilter(r.crypto,r.depot,n,T,f)}let x=Cr(c);return{...d,[x]:m}}),Promise.resolve({}))}async function PI(r,e){let t=await Tt.getFile(r,Ue(e["version"].cid));return Ec(Ge(t))??Z8}async function SW(r,e,t){return Hm(t).reduce(async(n,i)=>{if(zh("public",i))return n;let o=await Zu({accountDID:e,crypto:r,path:i}),a=await r.keystore.exportSymmKey(o),c={path:i,key:a};return n.then(f=>[...f,c])},Promise.resolve([]))}function DW(r){return r.sort((e,t)=>Cr(e.path).localeCompare(Cr(t.path)))}var Tc=class{constructor({account:e,dependencies:t,eventEmitter:n,root:i,localOnly:o}){this.account=e,this.dependencies=t,this.eventEmitter=n,this.localOnly=o||!1,this.proofs={},this.publishHooks=[],this.root=i,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let a=async f=>{await this.dependencies.reference.repositories.cidLog.add(f),this.dependencies.manners.log("\u{1F4D3} Adding to the CID ledger:",f.toString())},c=fI(3e3,!1,(f,d)=>{if(globalThis.navigator.onLine)return this._publishing=[f,!0],this.dependencies.reference.dataRoot.update(f,d).then(()=>{this._publishing&&this._publishing[0]===f&&(n.emit("fileSystem:publish",{root:f}),this._publishing=!1)});this._publishWhenOnline.push([f,d])},!1);this.publishHooks.push(a),this.publishHooks.push(c),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e){let{account:t,dependencies:n,eventEmitter:i,localOnly:o}=e,a=e.rootKey||await n.crypto.aes.genKey(Ja).then(n.crypto.aes.exportKey),c=e.version===Pc(Sc),f=await ou.empty({accountDID:t.rootDID,dependencies:n,rootKey:a,wnfsWasm:c});return new Tc({account:t,dependencies:n,eventEmitter:i,root:f,localOnly:o})}static async fromCID(e,t){let{account:n,dependencies:i,eventEmitter:o,permissions:a,localOnly:c}=t,f=await ou.fromCID({accountDID:n.rootDID,dependencies:i,cid:e,permissions:a});return new Tc({account:n,dependencies:i,eventEmitter:o,root:f,localOnly:c})}deactivate(){this.localOnly||(globalThis.removeEventListener("online",this._whenOnline),globalThis.removeEventListener("beforeunload",this._beforeLeaving))}async ls(e){if(cs(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,{public:async(t,n)=>t.ls(n),private:async(t,n)=>{if(kr(t))throw new Error("Tried to `ls` a file");return t.ls(n)}})}async mkdir(e,t={}){if(cs(e))throw new Error("`mkdir` only accepts directory paths");return await this.runMutationOnNode(e,{public:async(n,i)=>{await n.mkdir(i)},private:async(n,i)=>{if(kr(n))throw new Error("Tried to `mkdir` a file");await n.mkdir(i)}}),t.publish&&await this.publish(),this}async write(e,t,n={}){if(Ur(t)||WA(t)||VA(t)){if(cs(e))throw new Error("Can't add soft links to a file");await this.runMutationOnNode(e,{public:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(er.instanceOf(f)||gs.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))},private:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(er.instanceOf(f)||gs.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))}})}else{if(hn(e))throw new Error("`add` only accepts file paths when working with regular files");await this.runMutationOnNode(e,{public:async(o,a)=>{await o.add(a,t)},private:async(o,a)=>{kr(o)?await o.updateContent(t):await o.add(a,t)}})}return n.publish&&await this.publish(),this}async read(e){if(hn(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,{public:async(t,n)=>await t.cat(n),private:async(t,n)=>kr(t)?t.content:await t.cat(n)})}async exists(e){return this.runOnNode(e,{public:async(t,n)=>await t.exists(n),private:async(t,n)=>kr(t)||await t.exists(n)})}async get(e){return this.runOnNode(e,{public:async(t,n)=>await t.get(n),private:async(t,n)=>kr(t)?t:await t.get(n)})}async mv(e,t){let n=$m(e,t);if(!Bb(e,t)){let i=zm(e),o=zm(t);throw new Error(`Can't move to a different kind of path, from is a ${i} and to is a ${o}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runMutationOnNode(e,{public:async(i,o)=>{let[a,...c]=Zt(t);await i.mv(o,c)},private:async(i,o)=>{if(kr(i))throw new Error("Tried to `mv` within a file");let[a,...c]=Zt(t);await i.mv(o,c)}}),this}resolveSymlink(e){return ht(e,"privateName")?er.resolveSoftLink(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,e):gs.resolveSoftLink(this.dependencies.depot,this.dependencies.reference,e)}async rm(e){return await this.runMutationOnNode(e,{public:async(t,n)=>{await t.rm(n)},private:async(t,n)=>{if(kr(t))throw new Error("Cannot `rm` a file you've asked permission for");await t.rm(n)}}),this}async symlink(e){let{at:t,name:n}=e,i=e.referringTo.path,o=e.referringTo.username||this.account.username;if(t==null)throw new Error("Missing parameter `symlink.at`");if(cs(t))throw new Error("`symlink.at` only accepts directory paths");let a=$m(t,i);if(!o)throw new Error("I need a username in order to use this method");if(!a)throw new Error("`link` is only supported on the same tree for now");return await this.runMutationOnNode(t,{public:async(c,f)=>{if(!aa.instanceOf(c))if(gs.instanceOf(c))await this.runOnChildTree(c,f,async d=>(gs.instanceOf(d)&&d.insertSoftLink({path:Qu(i),name:n,username:o}),d));else throw new Error("Symlinks not supported in WASM-WNFS yet.")},private:async(c,f)=>{if(kr(c))throw new Error("Cannot add a soft link to a file");await this.runOnChildTree(c,f,async d=>{if(er.instanceOf(d)){let m=await this.runOnNode(i,{public:async()=>{throw new Error("File system hit a public node within a private node. This is not supported/this should not happen.")},private:async(w,x)=>{let T=kr(w)?w:await w.get(x);if(er.instanceOf(T))return T;if(Ci.instanceOf(T))return T;throw new Error("`symlink.referringTo` is not of the right type")}});if(!m)throw new Error("Could not find the item the symlink is referring to");d.insertSoftLink({name:n,username:o,key:m.key,privateName:await m.getName()})}return d})}}),this}async publish(){let e=Array.from(Object.entries(this.proofs));this.proofs={};let t=await this.root.put();return e.forEach(([n,i])=>{this.publishHooks.forEach(o=>o(t,i))}),t}async historyStep(){let e=this.root.publicTree;ht(e,"historyStep")&&typeof e.historyStep=="function"&&await e.historyStep()}async acceptShare({shareId:e,sharedBy:t}){let n=await this.loadShare({shareId:e,sharedBy:t});return await this.write(Ar("private","Shared with me",t),await n.ls([]).then(Object.values).then(i=>i.filter(Ur))),this}async loadShare({shareId:e,sharedBy:t}){let n=await To(this.dependencies.crypto),i=await this.dependencies.reference.didRoot.lookup(t),o=await Wy(this.dependencies.crypto,{counter:parseInt(e,10),recipientExchangeDid:n,senderRootDid:i}),a=await this.dependencies.reference.dataRoot.lookup(t);if(!a)throw new Error("This user doesn't have a filesystem yet.");let c=await Tt.getSimpleLinks(this.dependencies.depot,a),f=c["shared"]?.cid||null;if(!f)throw new Error("This user hasn't shared anything yet.");let d=await ou.getSharedLinks(this.dependencies.depot,Ue(f)),m=Ye(d)?d[o]:null;if(!m)throw new Error("Couldn't find a matching share.");let w=Ye(m)?m.cid:null;if(!w)throw new Error("Couldn't find a matching share.");let x=await this.dependencies.depot.getBlock(Ue(w)),T=await this.dependencies.crypto.keystore.decrypt(x),F=no(T);if(!ht(F,"cid"))throw new Error("Share payload is missing the `cid` property");if(!ht(F,"key"))throw new Error("Share payload is missing the `key` property");if(!ht(F,"algo"))throw new Error("Share payload is missing the `algo` property");let N=F.cid,ue=F.key,pe=F.algo;if(!c["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let re=await gn.fromCID(this.dependencies.depot,Ue(c["private"]?.cid)),be=await this.dependencies.depot.getBlock(Ue(N)),Pe=await this.dependencies.crypto.aes.decrypt(be,ue,pe),Y=JSON.parse(Ge(Pe,"utf8"));if(!vy(Y))throw new Error("The share payload did not point to a valid entry index");return er.fromInfo(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,re,ue,Y)}async sharePrivate(e,{sharedBy:t,shareWith:n}){let i=e.filter(c=>Lf("private",c));if(!t){if(!this.account.username)throw new Error("I need a username in order to use this method");t={rootDid:this.account.rootDID,username:this.account.username}}let o=await i.reduce(async(c,f)=>{let d=await c,m=Nb(f),w=await this.get(f);return m&&(Ci.instanceOf(w)||er.instanceOf(w))?[...d,[m,w]]:d},Promise.resolve([]));if(!o.length)throw new Error("Didn't find any items to share");let a=await tI(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,this.root,o,{shareWith:n,sharedBy:t});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),a}async checkMutationPermissionAndAddProof(e,t){let n=t?"make changes to":"query";if(!this.localOnly){let i=await this.dependencies.reference.repositories.ucans.lookupFilesystemUcan(e);if(!i||Hs(i)||!i.signature)throw new _l(`I don't have the necessary permissions to ${n} the file system at "${Cr(e)}"`);this.proofs[i.signature]=i}}async runMutationOnNode(e,t){let n=Zt(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!0),i==="public")await t.public(this.root.publicTree,o),await t.public(this.root.prettyTree,o),await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]);else if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new _l(`I don't have the necessary permissions to make changes to the file system at "${Cr(e)}"`);await t.private(c,n.slice(Zt(a).length)),await c.put(),await this.root.updatePuttable("private",this.root.mmpt);let f=await this.root.mmpt.put();await this.root.addPrivateLogEntry(this.dependencies.depot,f)}else throw i==="p"?new Error("The pretty path is read only"):new Error("Not a valid FileSystem path");this.eventEmitter.emit("fileSystem:local-change",{root:await this.root.put(),path:e})}async runOnNode(e,t){let n=Zt(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!1),i==="public")return await t.public(this.root.publicTree,o);if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new _l(`I don't have the necessary permissions to query the file system at "${Cr(e)}"`);return await t.private(c,n.slice(Zt(a).length))}else{if(i==="p")return await t.public(this.root.prettyTree,o);throw new Error("Not a valid FileSystem path")}}async runOnChildTree(e,t,n){let i=e;if(t.length){await i.exists(t)||await i.mkdir(t);let o=await i.get(t);if(dy(o))i=o;else throw new Error("Path does not point to a directory")}return i=await n(i),t.length?await e.updateChild(i,t):e}_whenOnline(){let e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach(([t,n])=>{this.publishHooks.forEach(i=>i(t,n))})}_beforeLeaving(e){let t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}},T_=Tc;async function Fp({config:r,dependencies:e,eventEmitter:t,rootKey:n,username:i}){let{crypto:o,depot:a,manners:c,reference:f,storage:d}=e,m,w,x=f.repositories.cidLog,T={username:i,rootDID:await f.didRoot.lookup(i)},F=navigator.onLine?await CW(f,i,{maxRetries:20}):null,N=F?x.indexOf(F):-1;if(navigator.onLine)if(!F)m=x.newest(),m?c.log("\u{1F4D3} No DNSLink, using local CID:",m.toString()):c.log("\u{1F4D3} Creating a new file system");else if(N===x.length()-1)m=F,c.log("\u{1F4D3} DNSLink is up to date:",m.toString());else if(N!==-1&&N<x.length()-1){m=x.newest();let De=x.length()-1-N,re=De===1?"1 newer local entry":De.toString()+" newer local entries";c.log("\u{1F4D3} DNSLink is outdated ("+re+"), using local CID:",m.toString())}else m=F,await x.add(m),c.log("\u{1F4D3} DNSLink is newer:",m.toString());else throw m=x.newest(),m&&c.log("\u{1F4D3} Working offline, using local CID:",m.toString()),new Error("Offline, don't have a filesystem to work with.");let ue=r.permissions,pe={crypto:o,depot:a,reference:f,storage:d};return m?(await AW(e.depot,r,m),await c.fileSystem.hooks.beforeLoadExisting(m,T,pe),w=await T_.fromCID(m,{account:T,dependencies:e,eventEmitter:t,permissions:ue}),await c.fileSystem.hooks.afterLoadExisting(w,T,pe),w):(await c.fileSystem.hooks.beforeLoadNew(T,pe),w=await T_.empty({account:T,dependencies:e,eventEmitter:t,rootKey:n,permissions:ue,version:r.fileSystem?.version}),await c.fileSystem.hooks.afterLoadNew(w,T,pe),w)}async function AI({auth:r,dependencies:e,oldUsername:t,newUsername:n,readKey:i}){let{crypto:o,reference:a,storage:c}=e,f=await Gt(o),{success:d}=await r.register({username:n});if(!d)throw new Error("Failed to register new user");let m=await c.getItem(c.KEYS.ACCOUNT_UCAN),w=await Jr({dependencies:e,potency:"APPEND",resource:"*",proof:m||void 0,lifetimeInSeconds:60*3,audience:f,issuer:f}),x=await a.dataRoot.lookup(t);if(!x)throw new Error("Failed to lookup oldUsername");return await a.dataRoot.update(x,w),await tu({accountDID:f,crypto:o,readKey:i}),{success:!0}}var SI={versionMismatch:{newer:async()=>DI(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>DI(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}};async function AW(r,e,t){let n=await Tt.getSimpleLinks(r,t),i=n["version"]==null?"1.0.0":new TextDecoder().decode(await Tt.getFile(r,Ue(n["version"].cid))),o=async()=>(await(e.userMessages||SI).versionMismatch.newer(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${d_.map(d=>Pc(d)).join(", ")}. Please upgrade this app's ODD SDK version.`)),a=async()=>(await(e.userMessages||SI).versionMismatch.older(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${d_.map(d=>Pc(d)).join(", ")}. The user should migrate their filesystem.`)),c=Ec(i);if(c==null)throw await o();let f=Q8(c);if(f==="too-high")throw await o();if(f==="too-low")throw await a()}function DI(r){globalThis.alert!=null&&globalThis.alert(r)}async function CW(r,e,t={}){let n=t.maxRetries??0,i=t.retryInterval??500,o=await r.dataRoot.lookup(e).catch(()=>null);return o?o.toString()===Xb?null:o:new Promise((a,c)=>{let f=0,d=setInterval(async()=>{if(o=await r.dataRoot.lookup(e).catch(()=>null),!o&&f<n){f++;return}else f>=n&&c("Failed to load data root");clearInterval(d),a(o?.toString()===Xb?null:o)},i)})}h();p();h();p();var IW=globalThis||window||self,At=IW.crypto;var JI=Ze(CI(),1);h();p();h();p();h();p();h();p();var k_=new Error("Key does not exist. Make sure you properly instantiated the keystore."),II=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),TI=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),TW=new Error("ECC is not enabled for this browser. Please use RSA instead."),kI=new Error("Cryptosystem not supported. Please use ECC or RSA"),FI=new Error("Invalid key use. Please use 'exchange' or 'write"),kW=new Error("Max must be less than 256 and greater than 0");function Sl(r){if(!r||r===null)throw k_;if(r.privateKey===void 0)throw II;return r}function F_(r){if(!r||r===null)throw k_;if(r.privateKey!==void 0||r.algorithm===void 0)throw TI;return r}function FW(r){RI(r,[ds.ECC,ds.RSA],kI)}function kc(r){RI(r,[_r.Exchange,_r.Write],FI)}function RI(r,e,t){if(!e.some(i=>i===r))throw t}var BI={KeyDoesNotExist:k_,NotKeyPair:II,NotKey:TI,ECCNotEnabled:TW,UnsupportedCrypto:kI,InvalidKeyUse:FI,checkIsKeyPair:Sl,checkIsKey:F_,checkValidCryptoSystem:FW,checkValidKeyUse:kc,InvalidMaxValue:kW};function RW(r,e){let t=e===8?new Uint8Array(r):new Uint16Array(r);return Array.from(t).map(n=>String.fromCharCode(n)).join("")}function BW(r){return Ge(new Uint8Array(r),"base64pad")}function R_(r,e){let t=e===8?new Uint8Array(r.length):new Uint16Array(r.length);for(let n=0,i=r.length;n<i;n++)t[n]=r.charCodeAt(n);return t.buffer}function OI(r){return Be(r,"base64pad").buffer}function OW(){return new Uint8Array([1,0,1])}function LW(r,{max:e}={max:255}){if(e<1||e>255)throw BI.InvalidMaxValue;let t=new Uint8Array(r);if(e==255)return At.getRandomValues(t),t.buffer;let n=0,i=e+1,o=Math.floor(256/i)*i,a=new Uint8Array(1);for(;n<t.length;)At.getRandomValues(a),a[0]<o&&(t[n]=a[0]%i,n++);return t.buffer}function NW(r,e){let t=new Uint8Array(r),n=new Uint8Array(e),i=new Uint8Array(t.length+n.length);return i.set(t),i.set(n,t.length),i.buffer}var LI=r=>ug(r,e=>R_(e,ac.B8)),NI=r=>ug(r,e=>R_(e,ac.B16)),sg=r=>ug(r,OI),ag=(r,e)=>{switch(e){case 8:return LI(r);default:return NI(r)}},ug=(r,e)=>{if(typeof r=="string")return e(r);if(typeof r=="object"&&r.byteLength!==void 0)return new Uint8Array(r).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function UW(r){return new Promise(e=>{let{port1:t,port2:n}=new MessageChannel;n.onmessage=i=>e(i.data),t.postMessage(r)})}var tr={arrBufToStr:RW,arrBufToBase64:BW,strToArrBuf:R_,base64ToArrBuf:OI,publicExponent:OW,randomBuf:LW,joinBufs:NW,normalizeUtf8ToBuf:LI,normalizeUtf16ToBuf:NI,normalizeBase64ToBuf:sg,normalizeToBuf:ug,structuralClone:UW};h();p();var B_="ECDH",O_="ECDSA",Dl="RSA-OAEP",su="RSASSA-PKCS1-v1_5",L_=128,UI="ecc",N_=wy.P_256,MI=by.B2048,au=$t.AES_CTR,Rp=sc.B256,U_=64,Bp=tl.SHA_256,Al=ac.B16,KI="keystore",jI="exchange-key",$I="write-key";async function M_(r){return At.subtle.generateKey({name:r?.alg||au,length:r?.length||Rp},!0,["encrypt","decrypt"])}async function KW(r,e){let t=tr.base64ToArrBuf(r);return At.subtle.importKey("raw",t,{name:e?.alg||au,length:e?.length||Rp},!0,["encrypt","decrypt"])}var Op={makeKey:M_,importKey:KW};h();p();async function cg(r,e,t){let n=tr.normalizeUtf16ToBuf(r),i=typeof e=="string"?await Op.importKey(e,t):e,o=t?.alg||au,a=t?.iv||tr.randomBuf(16),c=await At.subtle.encrypt({name:o,iv:o===$t.AES_CTR?void 0:a,counter:o===$t.AES_CTR?new Uint8Array(a):void 0,length:o===$t.AES_CTR?U_:void 0},i,n);return tr.joinBufs(a,c)}async function fg(r,e,t){let n=tr.normalizeBase64ToBuf(r),i=typeof e=="string"?await Op.importKey(e,t):e,o=t?.alg||au,a=n.slice(0,16),c=n.slice(16);return await At.subtle.decrypt({name:o,iv:o===$t.AES_CTR?void 0:a,counter:o===$t.AES_CTR?new Uint8Array(a):void 0,length:o===$t.AES_CTR?U_:void 0},i,c)}async function jW(r,e,t){let n=await cg(r,e,t);return tr.arrBufToBase64(n)}async function $W(r,e,t){let n=await fg(r,e,t);return tr.arrBufToStr(n,16)}async function zW(r){let e=await At.subtle.exportKey("raw",r);return tr.arrBufToBase64(e)}var zI={encryptBytes:cg,decryptBytes:fg,encrypt:jW,decrypt:$W,exportKey:zW};var Cl={...Op,...zI};h();p();h();p();async function WW(r,e,t){kc(t);let n=t===_r.Exchange?Dl:su,i=t===_r.Exchange?["encrypt","decrypt"]:["sign","verify"];return At.subtle.generateKey({name:n,modulusLength:r,publicExponent:tr.publicExponent(),hash:{name:e}},!1,i)}function VW(r){return r.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function HW(r,e,t){kc(t);let n=t===_r.Exchange?Dl:su,i=t===_r.Exchange?["encrypt"]:["verify"],o=tr.base64ToArrBuf(VW(r));return At.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)}var uu={makeKeypair:WW,importPublicKey:HW};h();p();async function GW(r,e,t=Al){return At.subtle.sign({name:su,saltLength:L_},e,ag(r,t))}async function YW(r,e,t,n=Al,i=Bp){return At.subtle.verify({name:su,saltLength:L_},typeof t=="string"?await uu.importPublicKey(t,i,_r.Write):t,sg(e),ag(r,n))}async function JW(r,e,t=Al,n=Bp){return At.subtle.encrypt({name:Dl},typeof e=="string"?await uu.importPublicKey(e,n,_r.Exchange):e,ag(r,t))}async function XW(r,e){let t=sg(r);return At.subtle.decrypt({name:Dl},e,t)}async function QW(r){let e=await At.subtle.exportKey("spki",r.publicKey);return tr.arrBufToBase64(e)}var fa={sign:GW,verify:YW,encrypt:JW,decrypt:XW,getPublicKey:QW};h();p();h();p();var ws=Ze(jm(),1);function ZW(r){return ws.default.createInstance({name:r})}async function eV(r,e,t=ws.default){if(await VI(r,t))return;let n=await e();await qI(r,n,t)}async function qI(r,e,t=ws.default){return t.setItem(r,e)}async function tV(r,e=ws.default){return WI(r,Sl,e)}async function rV(r,e=ws.default){return WI(r,F_,e)}async function WI(r,e,t=ws.default){let n=await t.getItem(r);return n===null?null:e(n)}async function VI(r,e=ws.default){return await e.getItem(r)!==null}async function nV(r,e=ws.default){return e.removeItem(r)}async function HI(r){return r.dropInstance()}async function iV(r){return r?HI(r):ws.default.clear()}var Ti={createStore:ZW,createIfDoesNotExist:eV,put:qI,getKeypair:tV,getKey:rV,exists:VI,rm:nV,dropStore:HI,clear:iV};h();p();h();p();async function oV(r,e){kc(e);let t=e===_r.Exchange?B_:O_,n=e===_r.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return At.subtle.generateKey({name:t,namedCurve:r},!1,n)}async function sV(r,e,t){kc(t);let n=t===_r.Exchange?B_:O_,i=t===_r.Exchange?[]:["verify"],o=tr.base64ToArrBuf(r);return At.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)}var GI={makeKeypair:oV,importPublicKey:sV};var K_={type:UI,curve:N_,rsaSize:MI,symmAlg:au,symmLen:Rp,hashAlg:Bp,charSize:Al,storeName:KI,exchangeKeyName:jI,writeKeyName:$I};function aV(r,e=!0){let t;return r?t={...K_,...r}:t=K_,r?.type||(t.type=e?ds.ECC:ds.RSA),t}async function uV(){let r=await GI.makeKeypair(N_,_r.Exchange);try{await tr.structuralClone(r)}catch{return!1}return!0}function cV(r,e={}){return{...r,...e}}function fV(r){return{alg:r.symmAlg,length:r.symmLen}}var Kn={defaultConfig:K_,normalize:aV,eccEnabled:uV,merge:cV,symmKeyOpts:fV};h();p();var Lp=class{constructor(e,t){this.cfg=e,this.store=t}async writeKey(){let e=await Ti.getKeypair(this.cfg.writeKeyName,this.store);return Sl(e)}async exchangeKey(){let e=await Ti.getKeypair(this.cfg.exchangeKeyName,this.store);return Sl(e)}async getSymmKey(e,t){let n=Kn.merge(this.cfg,t),i=await Ti.getKey(e,this.store);if(i!==null)return i;let o=await Cl.makeKey(Kn.symmKeyOpts(n));return await Ti.put(e,o,this.store),o}async keyExists(e){return await Ti.getKey(e,this.store)!==null}async deleteKey(e){return Ti.rm(e,this.store)}async destroy(){return Ti.dropStore(this.store)}async importSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await Cl.importKey(e,Kn.symmKeyOpts(i));await Ti.put(t,o,this.store)}async exportSymmKey(e,t){let n=await this.getSymmKey(e,t);return Cl.exportKey(n)}async encryptWithSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Cl.encryptBytes(tr.strToArrBuf(e,i.charSize),o,Kn.symmKeyOpts(i));return tr.arrBufToBase64(a)}async decryptWithSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Cl.decryptBytes(tr.base64ToArrBuf(e),o,Kn.symmKeyOpts(i));return tr.arrBufToStr(a,i.charSize)}};var Fc=class extends Lp{static async init(e){let t=Kn.normalize({...e||{},type:ds.RSA}),{rsaSize:n,hashAlg:i,storeName:o,exchangeKeyName:a,writeKeyName:c}=t,f=Ti.createStore(o);return await Ti.createIfDoesNotExist(a,()=>uu.makeKeypair(n,i,_r.Exchange),f),await Ti.createIfDoesNotExist(c,()=>uu.makeKeypair(n,i,_r.Write),f),new Fc(t,f)}async sign(e,t){let n=Kn.merge(this.cfg,t),i=await this.writeKey();return tr.arrBufToBase64(await fa.sign(e,i.privateKey,n.charSize))}async verify(e,t,n,i){let o=Kn.merge(this.cfg,i);return fa.verify(e,t,n,o.charSize,o.hashAlg)}async encrypt(e,t,n){let i=Kn.merge(this.cfg,n);return tr.arrBufToBase64(await fa.encrypt(e,t,i.charSize,i.hashAlg))}async decrypt(e,t,n){let i=await this.exchangeKey(),o=Kn.merge(this.cfg,n);return tr.arrBufToStr(await fa.decrypt(e,i.privateKey),o.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return fa.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return fa.getPublicKey(e)}},YI=Fc;var j_={...uu,...fa,...YI};var lV={decrypt:hV,encrypt:pV,exportKey:dV,genKey:mV};function XI(r,e){return At.subtle.importKey("raw",r,{name:e,length:sc.B256},!0,["encrypt","decrypt"])}async function hV(r,e,t,n){let i=Hh(e)?e:await XI(e,t),o=n?await At.subtle.decrypt({name:t,iv:n},i,r):await fg(r,i,{alg:t});return new Uint8Array(o)}async function pV(r,e,t,n){let i=Hh(e)?e:await XI(e,t),o=n?await At.subtle.encrypt({name:t,iv:n},i,r):await cg(r,i,{alg:t});return new Uint8Array(o)}async function dV(r){let e=await At.subtle.exportKey("raw",r);return new Uint8Array(e)}function mV(r){return M_({length:sc.B256,alg:r})}var yV={keyTypes:{"bls12-381":{magicBytes:new Uint8Array([234,1]),verify:()=>{throw new Error("Not implemented")}},ed25519:{magicBytes:new Uint8Array([237,1]),verify:gV},rsa:{magicBytes:new Uint8Array([0,245,2]),verify:wV}}};async function gV({message:r,publicKey:e,signature:t}){return JI.default.sign.detached.verify(r,t,e)}async function wV({message:r,publicKey:e,signature:t}){return j_.verify(r,t,await At.subtle.importKey("spki",e,{name:su,hash:$_},!1,["verify"]),8)}var bV={sha256:vV};async function vV(r){return new Uint8Array(await At.subtle.digest("sha-256",r))}function _V(r){return r.destroy()}async function xV(r,e){let t=await r.exchangeKey();return ZI(e,t.privateKey)}async function EV(r,e){if(await r.keyExists(e)===!1)throw new Error(`Expected a key under the name '${e}', but couldn't find anything`);let t=await r.getSymmKey(e),n=await At.subtle.exportKey("raw",t);return new Uint8Array(n)}function PV(r){return Promise.resolve("rsa")}function SV(r){return Promise.resolve("RS256")}function DV(r,e,t){return r.importSymmKey(Ge(e,"base64pad"),t)}function AV(r,e){return r.keyExists(e)}async function CV(r){let e=await r.exchangeKey(),t=await At.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function IV(r){let e=await r.writeKey(),t=await At.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function TV(r,e){let t=await r.writeKey(),n=await j_.sign(e,t.privateKey,r.cfg.charSize);return new Uint8Array(n)}var kV={randomNumbers:FV};function FV(r){return At.getRandomValues(new Uint8Array(r.amount))}var RV={decrypt:ZI,encrypt:BV,exportPublicKey:OV,genKey:LV},lg="RSA-OAEP",$_="SHA-256";function QI(r,e){return At.subtle.importKey("spki",r,{name:lg,hash:$_},!1,e)}async function ZI(r,e){let t=await At.subtle.decrypt({name:lg},Hh(e)?e:await QI(e,["decrypt"]),r);return new Uint8Array(t)}async function BV(r,e){let t=Hh(e)?e:await QI(e,["encrypt"]),n=await At.subtle.encrypt({name:lg},t,r);return new Uint8Array(n)}async function OV(r){let e=await At.subtle.exportKey("spki",r);return new Uint8Array(e)}function LV(){return At.subtle.generateKey({name:lg,modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:$_}},!0,["encrypt","decrypt"])}async function e3({storeName:r,exchangeKeyName:e,writeKeyName:t}){let n=await Fc.init({charSize:8,hashAlg:tl.SHA_256,storeName:r,exchangeKeyName:e,writeKeyName:t});return{aes:lV,did:yV,hash:bV,misc:kV,rsa:RV,keystore:{clearStore:(...i)=>_V(n,...i),decrypt:(...i)=>xV(n,...i),exportSymmKey:(...i)=>EV(n,...i),getAlgorithm:(...i)=>PV(n,...i),getUcanAlgorithm:(...i)=>SV(n,...i),importSymmKey:(...i)=>DV(n,...i),keyExists:(...i)=>AV(n,...i),publicExchangeKey:(...i)=>CV(n,...i),publicWriteKey:(...i)=>IV(n,...i),sign:(...i)=>TV(n,...i)}}}h();p();var t3=Ze(jm(),1);h();p();var hg={ACCOUNT_UCAN:"account-ucan",CID_LOG:"cid-log",SESSION:"session",UCANS:"permissioned-ucans"};function UV(r,e){return Gh("storage.getItem"),r.getItem(e)}function MV(r,e,t){return Gh("storage.setItem"),r.setItem(e,t)}function KV(r,e){return Gh("storage.removeItem"),r.removeItem(e)}async function jV(r){return Gh("storage.clear"),r.clear()}function r3({name:r}){let e=t3.default.createInstance({name:r});return{KEYS:hg,getItem:(...t)=>UV(e,...t),setItem:(...t)=>MV(e,...t),removeItem:(...t)=>KV(e,...t),clear:(...t)=>jV(e,...t)}}h();p();var jn={};Et(jn,{PRODUCTION:()=>$o,STAGING:()=>zo,apiUrl:()=>ei,did:()=>bs,shareLink:()=>WV});h();p();h();p();async function Rc(r){return Promise.any([zV(r),qV(r)])}async function zV(r){return n3(`https://dns.google/resolve?name=${r}&type=txt`)}function qV(r){return n3(`https://cloudflare-dns.com/dns-query?name=${r}&type=txt`)}function n3(r){return fetch(r,{headers:{accept:"application/dns-json"}}).then(e=>e.json()).then(e=>{if(e.Answer){let t=e.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return t[0][3]===";"?t.sort((n,i)=>n.slice(0,4).localeCompare(i.slice(0,4))).map(n=>n.slice(4)).join(""):t.join("")}else return null})}async function pg(r){let e=await Rc(r.startsWith("_dnslink.")?r:`_dnslink.${r}`);return e&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var $o={apiPath:"/v2/api",lobby:"https://auth.fission.codes",server:"https://runfission.com",userDomain:"fission.name"},zo={apiPath:"/v2/api",lobby:"https://auth.runfission.net",server:"https://runfission.net",userDomain:"fissionuser.net"};function ei(r,e){return`${r.server}${r.apiPath}${e?.length?"/"+e.replace(/^\/+/,""):""}`}var Bc={did:null,host:null,lastFetched:0};async function bs(r){let e;try{e=new URL(r.server).host}catch{throw new Error("Unable to parse API Endpoint")}let t=Date.now();if((Bc.host!==e||Bc.lastFetched+1e3*60*60*3<=t)&&(Bc.did=await Rc("_did."+e),Bc.host=e,Bc.lastFetched=t),!Bc.did)throw new Error("Couldn't get the Fission API DID");return Bc.did}function WV(r,e){return r.lobby+"/#/share/"+encodeURIComponent(e.sharedBy.username)+"/"+encodeURIComponent(e.shareId)+"/"}h();p();h();p();h();p();h();p();h();p();var i3="RSA";h();p();h();p();h();p();h();p();h();p();h();p();h();p();var mg=class{constructor(){ab(this,"index",0);ab(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,i){return this.readAtomically(()=>{let o=0,a=0,c=this.peekChar();if(c===void 0)return;let f=c==="0",d=2**(8*i)-1;for(;;){let m=this.readAtomically(()=>{let w=this.readChar();if(w===void 0)return;let x=Number.parseInt(w,e);if(!Number.isNaN(x))return x});if(m===void 0)break;if(o*=e,o+=m,o>d||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&f&&a>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){let e=t=>{for(let n=0;n<t.length/2;n++){let i=n*2;if(n<t.length-3){let a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[i]=a[0],t[i+1]=a[1],t[i+2]=a[2],t[i+3]=a[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];t[i]=o>>8,t[i+1]=o&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,i]=e(t);if(n===16)return t;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),a=16-(n+2),[c]=e(o.subarray(0,a));return t.set(o.subarray(0,c),16-c),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var o3=45,HV=15,Il=new mg;function s3(r){if(!(r.length>HV))return Il.new(r).parseWith(()=>Il.readIPv4Addr())}function a3(r){if(!(r.length>o3))return Il.new(r).parseWith(()=>Il.readIPv6Addr())}function u3(r){if(!(r.length>o3))return Il.new(r).parseWith(()=>Il.readIPAddr())}function c3(r){return Boolean(s3(r))}function f3(r){return Boolean(a3(r))}function yg(r){return Boolean(u3(r))}h();p();h();p();h();p();var z_={};Et(z_,{identity:()=>GV});h();p();var GV=Kf({prefix:"\0",name:"identity",encode:r=>i2(r),decode:r=>n2(r)});var q_={};Et(q_,{base2:()=>YV});h();p();var YV=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W_={};Et(W_,{base8:()=>JV});h();p();var JV=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var V_={};Et(V_,{base10:()=>XV});h();p();var XV=ja({prefix:"9",name:"base10",alphabet:"0123456789"});var H_={};Et(H_,{base16:()=>QV,base16upper:()=>ZV});h();p();var QV=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ZV=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var G_={};Et(G_,{base36:()=>eH,base36upper:()=>tH});h();p();var eH=ja({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tH=ja({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var J_={};Et(J_,{base64:()=>Y_,base64pad:()=>rH,base64url:()=>nH,base64urlpad:()=>iH});h();p();var Y_=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rH=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nH=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),iH=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var X_={};Et(X_,{base256emoji:()=>cH});h();p();var l3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),oH=l3.reduce((r,e,t)=>(r[t]=e,r),[]),sH=l3.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function aH(r){return r.reduce((e,t)=>(e+=oH[t],e),"")}function uH(r){let e=[];for(let t of r){let n=sH[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var cH=Kf({prefix:"\u{1F680}",name:"base256emoji",encode:aH,decode:uH});var Q_={};Et(Q_,{sha256:()=>qo,sha512:()=>fH});h();p();var h3=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),qo=P_({name:"sha2-256",code:18,encode:h3("SHA-256")}),fH=P_({name:"sha2-512",code:19,encode:h3("SHA-512")});var Z_={};Et(Z_,{identity:()=>Tl});h();p();var p3=0,lH="identity",d3=Co,hH=r=>Ka(p3,d3(r)),Tl={code:p3,name:lH,encode:d3,digest:hH};h();p();var Zde=new TextEncoder,eme=new TextDecoder;var wn={...z_,...q_,...W_,...V_,...H_,...Gb,...G_,...Vb,...J_,...X_},ime={...Q_,...Z_};h();p();h();p();function kl(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function gg(r=0){return globalThis.Buffer?.allocUnsafe!=null?kl(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function y3(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var m3=y3("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ex=y3("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=gg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),dH={utf8:m3,"utf-8":m3,hex:wn.base16,latin1:ex,ascii:ex,binary:ex,...wn},wg=dH;function ti(r,e="utf8"){let t=wg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var g3=c3,mH=f3,tx=function(r){let e=0;if(r=r.toString().trim(),g3(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(mH(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=g3(t[n]),a;o&&(a=tx(t[n]),t[n]=ti(a.slice(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,ti(a.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},w3=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};h();p();var Np={},rx={},gH=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];gH.forEach(r=>{let e=wH(...r);rx[e.code]=e,Np[e.name]=e});function wH(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function zr(r){if(typeof r=="number"){if(rx[r]!=null)return rx[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Np[r]!=null)return Np[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var vs=Ze(Up(),1);h();p();function ox(r,e="utf8"){let t=wg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?kl(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function la(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=gg(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return kl(t)}function T3(r,e){switch(zr(r).code){case 4:case 41:return RH(e);case 6:case 273:case 33:case 132:return F3(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return OH(e);case 421:return MH(e);case 444:return I3(e);case 445:return I3(e);case 466:return UH(e);default:return ti(e,"base16")}}function k3(r,e){switch(zr(r).code){case 4:return C3(e);case 41:return C3(e);case 6:case 273:case 33:case 132:return ax(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return BH(e);case 421:return LH(e);case 444:return KH(e);case 445:return jH(e);case 466:return NH(e);default:return ox(e,"base16")}}var sx=Object.values(wn).map(r=>r.decoder),FH=function(){let r=sx[0].or(sx[1]);return sx.slice(2).forEach(e=>r=r.or(e)),r}();function C3(r){if(!yg(r))throw new Error("invalid ip address");return tx(r)}function RH(r){let e=w3(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!yg(e))throw new Error("invalid ip address");return e}function ax(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function F3(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function BH(r){let e=ox(r),t=Uint8Array.from(vs.default.encode(e.length));return la([t,e],t.length+e.length)}function OH(r){let e=vs.default.decode(r);if(r=r.slice(vs.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return ti(r)}function LH(r){let e;r[0]==="Q"||r[0]==="1"?e=pn(Tr.decode(`z${r}`)).bytes:e=we.parse(r).multihash.bytes;let t=Uint8Array.from(vs.default.encode(e.length));return la([t,e],t.length+e.length)}function NH(r){let e=FH.decode(r),t=Uint8Array.from(vs.default.encode(e.length));return la([t,e],t.length+e.length)}function UH(r){let e=vs.default.decode(r),t=r.slice(vs.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+ti(t,"base64url")}function MH(r){let e=vs.default.decode(r),t=r.slice(vs.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return ti(t,"base58btc")}function KH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=Kt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ax(n);return la([t,i],t.length+i.length)}function jH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=Kt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ax(n);return la([t,i],t.length+i.length)}function I3(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=ti(e,"base32"),i=F3(t);return`${n}:${i}`}var Fl=Ze(Up(),1);function $H(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=zr(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw B3("invalid address: "+r);if(o.path===!0){e.push([i,hx(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function zH(r){let e=[];return r.map(t=>{let n=_g(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),hx(e.join("/"))}function qH(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=_g(e);return e.length>1?[t.code,k3(t.code,e[1])]:[t.code]})}function ux(r){return r.map(e=>{let t=_g(e);return e[1]!=null?[t.code,T3(t.code,e[1])]:[t.code]})}function cx(r){return vg(la(r.map(e=>{let t=_g(e),n=Uint8Array.from(Fl.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=la([n,e[1]])),n})))}function fx(r,e){return r.size>0?r.size/8:r.size===0?0:Fl.default.decode(e)+(Fl.default.decode.bytes??0)}function bg(r){let e=[],t=0;for(;t<r.length;){let n=Fl.default.decode(r,t),i=Fl.default.decode.bytes??0,o=zr(n),a=fx(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw B3("Invalid address Uint8Array: "+ti(r,"base16"));e.push([n,c])}return e}function lx(r){let e=bg(r),t=ux(e);return zH(t)}function WH(r){r=hx(r);let e=$H(r),t=qH(e);return cx(t)}function R3(r){return WH(r)}function vg(r){let e=VH(r);if(e!=null)throw e;return Uint8Array.from(r)}function VH(r){try{bg(r)}catch(e){return e}}function hx(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function B3(r){return new Error("Error parsing address: "+r)}function _g(r){return zr(r[0])}var dx=Ze(Up(),1);var K3=Ze(Wo(),1);h();p();function N3(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Rl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},px=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Mp,Kp,jp,U3,YH=Symbol.for("nodejs.util.inspect.custom"),M3=[zr("dns").code,zr("dns4").code,zr("dns6").code,zr("dnsaddr").code],JH=[zr("p2p").code,zr("ipfs").code],XH=new Map,j3=Symbol.for("@multiformats/js-multiaddr/multiaddr");function QH(r){return Boolean(r?.[j3])}var ha=class{constructor(e){if(Mp.set(this,void 0),Kp.set(this,void 0),jp.set(this,void 0),this[U3]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=vg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=R3(e)}else if(QH(e))this.bytes=vg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Rl(this,Mp,"f")==null&&px(this,Mp,lx(this.bytes),"f"),Rl(this,Mp,"f")}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)M3.includes(e[0])&&JH.includes(e[1])?(n=zr("tcp").name,i=443):(n=zr(t[2]).name,i=parseInt(t[3]));else if(M3.includes(e[0]))n=zr("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},zr(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=dx.default.decode(t,n),o=dx.default.decode.bytes??0,a=zr(i),c=fx(a,t.slice(n+o));n+=c+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Rl(this,Kp,"f")==null&&px(this,Kp,bg(this.bytes),"f"),Rl(this,Kp,"f")}stringTuples(){return Rl(this,jp,"f")==null&&px(this,jp,ux(this.tuples()),"f"),Rl(this,jp,"f")}encapsulate(e){return e=new ha(e),new ha(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new ha(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new ha(cx(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Np.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?ti(Tr.decode(`z${n}`),"base58btc"):ti(we.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>zr(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return N3(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=XH.get(t.name);if(n==null)throw(0,K3.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new ha(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Mp=new WeakMap,Kp=new WeakMap,jp=new WeakMap,U3=j3,YH)](){return`Multiaddr(${lx(this.bytes)})`}};function $p(r){return new ha(r)}h();p();h();p();function mx(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var ZH=Ze(Wo(),1);h();p();var $3=Symbol.for("@libp2p/peer-id");var eG=Symbol.for("nodejs.util.inspect.custom"),z3=Object.values(wn).map(r=>r.decoder).reduce((r,e)=>r.or(e),wn.identity.decoder),q3=114,W3=36,V3=37,zp=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[$3](){return!0}toString(){return this.string==null&&(this.string=Tr.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return we.createV1(q3,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return mx(this.multihash.bytes,e);if(typeof e=="string")return H3(e).equals(this);if(e?.multihash?.bytes!=null)return mx(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[eG](){return`PeerId(${this.toString()})`}},qp=class extends zp{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Wp=class extends zp{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Vp=class extends zp{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function H3(r,e){if(e=e??z3,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=pn(Tr.decode(`z${r}`));return r.startsWith("12D")?new Wp({multihash:t}):r.startsWith("16U")?new Vp({multihash:t}):new qp({multihash:t})}return tG(z3.decode(r))}function tG(r){try{let e=pn(r);if(e.code===Tl.code){if(e.digest.length===W3)return new Wp({multihash:e});if(e.digest.length===V3)return new Vp({multihash:e})}if(e.code===qo.code)return new qp({multihash:e})}catch{return rG(we.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function rG(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==q3)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===qo.code)return new qp({multihash:r.multihash});if(e.code===Tl.code){if(e.digest.length===W3)return new Wp({multihash:r.multihash});if(e.digest.length===V3)return new Vp({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}h();p();h();p();h();p();var Hp=nG;function nG(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var Yk=Ze(Vo(),1),Yc=Ze(Wo(),1);h();p();h();p();h();p();h();p();h();p();var Pg=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");h();p();h();p();h();p();h();p();function Sg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Q3(r=0){return globalThis.Buffer?.allocUnsafe!=null?Sg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function e6(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var Z3=e6("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),yx=e6("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Q3(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),yG={utf8:Z3,"utf-8":Z3,hex:wn.base16,latin1:yx,ascii:yx,binary:yx,...wn},Dg=yG;function t6(r,e="utf8"){let t=Dg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function r6(r,e="utf8"){let t=Dg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Sg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var pa="/",n6=new TextEncoder().encode(pa),Ag=n6[0],Je=class{constructor(e,t){if(typeof e=="string")this._buf=r6(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Ag)throw new Error("Invalid key")}toString(e="utf8"){return t6(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Je(e.join(pa))}static random(){return new Je(Pg().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Je(e):typeof e.uint8Array=="function"?new Je(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=n6),this._buf[0]!==Ag){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Ag,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Ag;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],a=n[i];if(o<a)return!0;if(o>a)return!1}return t.length<n.length}reverse(){return Je.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pa).slice(1)}type(){return gG(this.baseNamespace())}name(){return wG(this.baseNamespace())}instance(e){return new Je(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pa)||(e+=pa),e+=this.type(),new Je(e)}parent(){let e=this.list();return e.length===1?new Je(pa):new Je(e.slice(0,-1).join(pa))}child(e){return this.toString()===pa?e:e.toString()===pa?this:new Je(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Je.withNamespaces([...this.namespaces(),...bG(e.map(t=>t.namespaces()))])}};function gG(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function wG(r){let e=r.split(":");return e[e.length-1]}function bG(r){return[].concat(...r)}var o6=Ze(Vo(),1);h();p();async function Lc(r){let e=0;for await(let t of r)e++;return e}var vG=(0,o6.default)("ipfs:repo:migrator:migration-8");function s6(r){return r.child?s6(r.child):r}function _G(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=we.decode(e).multihash.bytes,n=Kt.encode(t).slice(1).toUpperCase();return new Je(`/${n}`,!1)}catch{return r}}function xG(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=pn(e),n=Kt.encode(we.createV1(hs,t).bytes).slice(1);return new Je(`/${n.toUpperCase()}`,!1)}catch{return r}}async function i6(r,e,t){let n=r.blocks;await n.open();let i=s6(n),o=await Lc(i.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let c of i.query({})){let f=t(c.key);f.toString()!==c.key.toString()&&(a+=1,vG(`Migrating Block from ${c.key} to ${f}`,await i.has(c.key)),await i.delete(c.key),await i.put(f,c.value),e(a/o*100,`Migrated Block from ${c.key} to ${f}`))}}finally{await n.close()}}var a6={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>i6(r,e,_G),revert:(r,e=()=>{})=>i6(r,e,xG)};h();p();h();p();h();p();var Mc=Ze(hu(),1),iT=Mc.default.Reader,FG=Mc.default.Writer,z0e=Mc.default.util,Fg=Mc.default.roots.default||(Mc.default.roots.default={}),oT=Fg.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=FG.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof iT||(i=iT.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new Fg.ipfs.pin.Set;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(f&7);break}}return c},t.fromObject=function(i){if(i instanceof Fg.ipfs.pin.Set)return i;var o=new Fg.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(a.version=0,a.fanout=0,a.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(a.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(a.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(a.seed=i.seed),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,Mc.default.util.toJSONOptions)},t}(),e}(),r})();var hT=Ze(aT(),1),Ug=Ze(Up(),1);h();p();var Xp=new Je("/local/pins"),Bg=256,uT=8192,kx=we.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),Kc={direct:"direct",recursive:"recursive"};function Fx(r){return new Je(`/${Kt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}h();p();h();p();h();p();function Ul(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Og(r=0){return globalThis.Buffer?.allocUnsafe!=null?Ul(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Lg(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=Og(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Ul(t)}h();p();function cT(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}h();p();h();p();function lT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var fT=lT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Rx=lT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Og(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),RG={utf8:fT,"utf-8":fT,hex:wn.base16,latin1:Rx,ascii:Rx,binary:Rx,...wn},Ng=RG;function Ml(r,e="utf8"){let t=Ng[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function Kl(r,e="utf8"){let t=Ng[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ul(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var Bx=oT.pin.Set;function BG(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Ug.default.decode(e),n=Ug.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=Bx.toObject(Bx.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function OG(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=Kl(e.toString()),o=Lg([t,i],t.byteLength+i.byteLength);return(0,hT.default)(Ml(o))}async function*pT(r,e){let t=BG(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!kx.equals(o)){let a=await r.get(o),c=Ya(a);yield*pT(r,c)}}else yield i.Hash;n++}}async function*Qp(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=Ya(i);yield*pT(r,o)}function LG(r,e){return t(e,0);async function t(n,i){let o=Bx.encode({version:1,fanout:Bg,seed:i}).finish(),a=Ug.default.encode(o.length),c=Lg([a,o]),f=[];for(let m=0;m<Bg;m++)f.push({Name:"",Tsize:1,Hash:kx});if(n.length<=uT){let m=n.map(T=>({link:{Name:"",Tsize:1,Hash:T.key},data:T.data||new Uint8Array})).sort((T,F)=>cT(T.link.Hash.bytes,F.link.Hash.bytes)),w=f.concat(m.map(T=>T.link));return{Data:Lg([c,...m.map(T=>T.data)]),Links:w}}else{let m=n.reduce((x,T)=>{let F=OG(i,T.key)%Bg;return x[F]=F in x?x[F].concat([T]):[T],x},[]),w=0;for(let x of m){let T=await t(x,i+1);await d(T,w),w++}return{Data:c,Links:f}}async function d(m,w){let x=Ga(m),T=await qo.digest(x),F=we.createV0(T);await r.put(F,x);let N=m.Links.reduce((ue,pe)=>ue+(pe.Tsize||0),0)+x.length;f[w]={Name:"",Tsize:N,Hash:F}}}}async function Ox(r,e,t){let n=await LG(r,t.map(f=>({key:f}))),i=Ga(n),o=await qo.digest(i),a=we.createV0(o);await r.put(a,i);let c=n.Links.reduce((f,d)=>f+d.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:a}}async function UG(r,e,t,n){if(!await e.has(Xp))return;let i=await e.get(Xp),o=we.decode(i),a=await r.get(o),c=Ya(a),f=0,d=await Lc(Qp(r,c,Kc.recursive))+await Lc(Qp(r,c,Kc.direct));for await(let m of Qp(r,c,Kc.recursive)){f++;let w={depth:1/0};m.version!==0&&(w.version=m.version),m.code!==mn&&(w.codec=m.code),await t.put(Fx(m),Ys(w)),n(f/d*100,`Migrated recursive pin ${m}`)}for await(let m of Qp(r,c,Kc.direct)){f++;let w={depth:0};m.version!==0&&(w.version=m.version),m.code!==mn&&(w.codec=m.code),await t.put(Fx(m),Ys(w)),n(f/d*100,`Migrated direct pin ${m}`)}await r.delete(o),await e.delete(Xp)}async function MG(r,e,t,n){let i=[],o=[],a=0,c=await Lc(t.queryKeys({}));for await(let{key:x,value:T}of t.query({})){a++;let F=ro(T),N=we.create(F.version||0,F.codec||mn,pn(Kt.decode("b"+x.toString().toLowerCase().split("/").pop())));F.depth===0?(n(a/c*100,`Reverted direct pin ${N}`),o.push(N)):(n(a/c*100,`Reverted recursive pin ${N}`),i.push(N))}n(100,"Updating pin root");let f={Links:[await Ox(r,Kc.direct,o),await Ox(r,Kc.recursive,i)]},d=Ga(f),m=await qo.digest(d),w=we.createV0(m);await r.put(w,d),await e.put(Xp,w.bytes)}async function dT(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var mT={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>dT(r,e,UG),revert:(r,e=()=>{})=>dT(r,e,MG)};h();p();h();p();var ho={};Et(ho,{abortedError:()=>KG,dbDeleteFailedError:()=>Nx,dbOpenFailedError:()=>Lx,dbWriteFailedError:()=>Ux,notFoundError:()=>Es});h();p();var jl=Ze(Wo(),1);function Lx(r){return r=r||new Error("Cannot open database"),(0,jl.default)(r,"ERR_DB_OPEN_FAILED")}function Nx(r){return r=r||new Error("Delete failed"),(0,jl.default)(r,"ERR_DB_DELETE_FAILED")}function Ux(r){return r=r||new Error("Write failed"),(0,jl.default)(r,"ERR_DB_WRITE_FAILED")}function Es(r){return r=r||new Error("Not Found"),(0,jl.default)(r,"ERR_NOT_FOUND")}function KG(r){return r=r||new Error("Aborted"),(0,jl.default)(r,"ERR_ABORTED")}var yT=new Je("/config"),Zp=new Je("/version");function ed(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function jG(r,e,t){let n=await e(r);if(n)return n;let i=ed(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function $G(r,e,t,n){if(await t(r))return e(r);let i=ed(n);if(!i)throw Es();return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(Es())}})}function Mg(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>$G(n,e,t,r),r.has=n=>jG(n,t,r),r}function Mx(r){return{...r,root:Mg(r.root),datastore:Mg(r.datastore),pins:Mg(r.pins),keys:Mg(r.keys)}}async function zG(r,e,t=()=>{}){let n=ed(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await vT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Kl(o),value:a}])}async function qG(r,e,t=()=>{}){let n=ed(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await vT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Ml(o),value:a}])}function wT(r){return r.child?wT(r.child):r}async function gT(r,e,t){let n=Object.entries(r).map(([a,c])=>({key:a,backend:wT(c)})).filter(({key:a,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:a,backend:c})=>({name:a,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=a=>{e(Math.round(i/n.length*100),a)};for(let{name:a,store:c}of n){await c.open();try{await t(a,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var bT={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>gT(r,e,zG),revert:(r,e=()=>{})=>gT(r,e,qG)};function vT(r,e){function t(n,i){let o=r.store("readwrite"),a=o.transaction,c=0,f;a.onabort=()=>i(f||a.error||new Error("aborted by user")),a.oncomplete=()=>i();function d(){let m=n[c++],w=m.key,x;try{x=m.type==="del"?o.delete(w):o.put(m.value,w)}catch(T){f=T,a.abort();return}c<n.length&&(x.onsuccess=d)}d()}return new Promise((n,i)=>{let o=r.iterator(),a=f=>f;o._deserializeKey=o._deserializeValue=a,c();function c(){let f=(d,m,w)=>{if(d||m===void 0){let x=T=>{if(T){i(T);return}n()};o.end(x);return}t(e(m,w),c)};o.next(f)}})}h();p();var pu=new Je("/local/filesroot");async function WG(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(pu)){let t=await r.root.get(pu);await r.datastore.put(pu,t),await r.root.delete(pu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function VG(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(pu)){let t=await r.datastore.get(pu);await r.root.put(pu,t),await r.datastore.delete(pu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var _T={version:11,description:"Store mfs root in the datastore",migrate:WG,revert:VG};h();p();var Wx=Ze(hu(),1);h();p();var jc=Ze(hu(),1),xT=jc.default.Reader,HG=jc.default.Writer,GG=jc.default.util,Kg=jc.default.roots.default||(jc.default.roots.default={}),Kx=Kg.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=GG.emptyArray,r.encode=function(t,n){if(n||(n=HG.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof xT||(t=xT.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Kg.Protocols;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Kg.Protocols)return t;var n=new Kg.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,jc.default.util.toJSONOptions)},r})();h();p();var da=Ze(hu(),1),$l=da.default.Reader,jx=da.default.Writer,yr=da.default.util,un=da.default.roots.default||(da.default.roots.default={}),$x=un.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=yr.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=jx.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)un.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&un.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof $l||(t=$l.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new un.Addresses;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(un.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=un.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof un.Addresses)return t;var n=new un.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=un.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=un.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=un.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=un.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=yr.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:yr.oneOfGetter(t=["isCertified"]),set:yr.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=jx.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof $l||(i=$l.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new un.Addresses.Address;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(f&7);break}}return c},e.fromObject=function(i){if(i instanceof un.Addresses.Address)return i;var o=new un.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?yr.base64.decode(i.multiaddr,o.multiaddr=yr.newBuffer(yr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(o.bytes===String?a.multiaddr="":(a.multiaddr=[],o.bytes!==Array&&(a.multiaddr=yr.newBuffer(a.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(a.multiaddr=o.bytes===String?yr.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(a.isCertified=i.isCertified,o.oneofs&&(a._isCertified="isCertified")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=yr.Long?yr.Long.fromBits(0,0,!0):0,e.prototype.raw=yr.newBuffer([]),e.encode=function(n,i){return i||(i=jx.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof $l||(n=$l.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new un.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.seq=n.uint64();break;case 2:a.raw=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof un.Addresses.CertifiedRecord)return n;var i=new un.Addresses.CertifiedRecord;return n.seq!=null&&(yr.Long?(i.seq=yr.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?yr.base64.decode(n.raw,i.raw=yr.newBuffer(yr.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(yr.Long){var a=new yr.Long(0,0,!0);o.seq=i.longs===String?a.toString():i.longs===Number?a.toNumber():a}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=yr.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?yr.Long.prototype.toString.call(n.seq):i.longs===Number?new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?yr.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},e}(),r})();h();p();var ma=Ze(hu(),1),zl=ma.default.Reader,zx=ma.default.Writer,Qt=ma.default.util,qr=ma.default.roots.default||(ma.default.roots.default={}),qx=qr.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=Qt.emptyArray,r.prototype.protocols=Qt.emptyArray,r.prototype.metadata=Qt.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:Qt.oneOfGetter(e=["pubKey"]),set:Qt.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:Qt.oneOfGetter(e=["peerRecordEnvelope"]),set:Qt.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=zx.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)qr.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)qr.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof zl||(n=zl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new qr.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.addresses&&a.addresses.length||(a.addresses=[]),a.addresses.push(qr.Address.decode(n,n.uint32()));break;case 2:a.protocols&&a.protocols.length||(a.protocols=[]),a.protocols.push(n.string());break;case 3:a.metadata&&a.metadata.length||(a.metadata=[]),a.metadata.push(qr.Metadata.decode(n,n.uint32()));break;case 4:a.pubKey=n.bytes();break;case 5:a.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof qr.Peer)return n;var i=new qr.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=qr.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=qr.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?Qt.base64.decode(n.pubKey,i.pubKey=Qt.newBuffer(Qt.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?Qt.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=Qt.newBuffer(Qt.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var a=0;a<n.addresses.length;++a)o.addresses[a]=qr.Address.toObject(n.addresses[a],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var a=0;a<n.protocols.length;++a)o.protocols[a]=n.protocols[a]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var a=0;a<n.metadata.length;++a)o.metadata[a]=qr.Metadata.toObject(n.metadata[a],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?Qt.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?Qt.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})(),gbe=qr.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=Qt.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:Qt.oneOfGetter(e=["isCertified"]),set:Qt.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=zx.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof zl||(n=zl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new qr.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof qr.Address)return n;var i=new qr.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Qt.base64.decode(n.multiaddr,i.multiaddr=Qt.newBuffer(Qt.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Qt.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Qt.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})(),wbe=qr.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=Qt.newBuffer([]),r.encode=function(t,n){return n||(n=zx.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof zl||(t=zl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new qr.Metadata;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof qr.Metadata)return t;var n=new qr.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?Qt.base64.decode(t.value,n.value=Qt.newBuffer(Qt.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=Qt.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?Qt.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})();h();p();var $c=Ze(hu(),1),ET=$c.default.Reader,YG=$c.default.Writer,gr=$c.default.util,jg=$c.default.roots.default||($c.default.roots.default={}),PT=jg.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=gr.newBuffer([]),r.prototype.payloadType=gr.newBuffer([]),r.prototype.payload=gr.newBuffer([]),r.prototype.signature=gr.newBuffer([]),r.encode=function(t,n){return n||(n=YG.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof ET||(t=ET.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new jg.Envelope;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof jg.Envelope)return t;var n=new jg.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?gr.base64.decode(t.publicKey,n.publicKey=gr.newBuffer(gr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?gr.base64.decode(t.payloadType,n.payloadType=gr.newBuffer(gr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?gr.base64.decode(t.payload,n.payload=gr.newBuffer(gr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?gr.base64.decode(t.signature,n.signature=gr.newBuffer(gr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=gr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=gr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=gr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=gr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?gr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?gr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?gr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?gr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,$c.default.util.toJSONOptions)},r})();h();p();var du=Ze(hu(),1),$g=du.default.Reader,ST=du.default.Writer,Fr=du.default.util,Yo=du.default.roots.default||(du.default.roots.default={}),DT=Yo.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=Fr.newBuffer([]),r.prototype.seq=Fr.Long?Fr.Long.fromBits(0,0,!0):0,r.prototype.addresses=Fr.emptyArray,r.encode=function(t,n){if(n||(n=ST.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)Yo.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof $g||(t=$g.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Yo.PeerRecord;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Yo.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Yo.PeerRecord)return t;var n=new Yo.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?Fr.base64.decode(t.peerId,n.peerId=Fr.newBuffer(Fr.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(Fr.Long?(n.seq=Fr.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new Fr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=Yo.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=Fr.newBuffer(i.peerId))),Fr.Long){var o=new Fr.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?Fr.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?Fr.Long.prototype.toString.call(t.seq):n.longs===Number?new Fr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var a=0;a<t.addresses.length;++a)i.addresses[a]=Yo.PeerRecord.AddressInfo.toObject(t.addresses[a],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,du.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=Fr.newBuffer([]),e.encode=function(n,i){return i||(i=ST.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof $g||(n=$g.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Yo.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Yo.PeerRecord.AddressInfo)return n;var i=new Yo.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Fr.base64.decode(n.multiaddr,i.multiaddr=Fr.newBuffer(Fr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Fr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Fr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,du.default.util.toJSONOptions)},e}(),r})();Wx.default.util.Long=void 0;Wx.default.configure();async function JG(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,c,f,d,m]=a.split("/");if(c==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!d)if(t[d]=t[d]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let w=Kx.decode(o);t[d].protocols=w.protocols.sort()}else if(f==="addrs"){let w=$x.decode(o);t[d].addresses=w.addrs.sort((x,T)=>$p(x.multiaddr).toString().localeCompare($p(T.multiaddr).toString())),w.certifiedRecord&&w.certifiedRecord.raw&&(t[d].peerRecordEnvelope=w.certifiedRecord.raw)}else f==="metadata"?t[d].metadata.push({key:m,value:o}):f==="keys"&&(t[d].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,f)=>c.key.localeCompare(f.key));let a=qx.encode(o).finish();await r.datastore.put(new Je(`/peers/${i}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function XG(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,,c]=a.split("/");t[c]=qx.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Je(`/peers/protos/${i}`),Kx.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let a=o.peerRecordEnvelope,c;if(a){let f=PT.decode(a),d=DT.decode(f.payload);c={raw:a,seq:d.seq}}await r.datastore.put(new Je(`/peers/addrs/${i}`),$x.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:a,value:c}of o.metadata)await r.datastore.put(new Je(`/peers/metadata/${i}/${a}`),c);o.pubKey&&await r.datastore.put(new Je(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var AT={version:12,description:"Store each peerstore peer under a single datastore key",migrate:JG,revert:XG};var zc={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},zg=[Object.assign({version:1},zc),Object.assign({version:2},zc),Object.assign({version:3},zc),Object.assign({version:4},zc),Object.assign({version:5},zc),Object.assign({version:6},zc),Object.assign({version:7},zc),a6,mT,bT,_T,AT];h();p();h();p();var CT=Ze(Vo(),1);var Vx={};Et(Vx,{InvalidValueError:()=>Vl,MissingRepoOptionsError:()=>Ps,NonReversibleMigrationError:()=>ql,NotInitializedRepoError:()=>mu,RequiredParameterError:()=>Wl});h();p();var ql=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=ql.code,this.message=e}};ql.code="ERR_NON_REVERSIBLE_MIGRATION";var mu=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=mu.code,this.message=e}};mu.code="ERR_NOT_INITIALIZED_REPO";var Wl=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=Wl.code,this.message=e}};Wl.code="ERR_REQUIRED_PARAMETER";var Vl=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Vl.code,this.message=e}};Vl.code="ERR_INVALID_VALUE";var Ps=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Ps.code,this.message=e}};Ps.code="ERR_MISSING_REPO_OPTIONS";var Hx=(0,CT.default)("ipfs:repo:migrator:repo:init");async function IT(r){if(!r)throw new Ps("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(Zp),n=await e.has(yT);return!t||!n?(Hx(`Version entry present: ${t}`),Hx(`Config entry present: ${n}`),!1):!0}catch(t){return Hx("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}async function Gx(r){if(!await IT(r))throw new mu("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Ml(await e.get(Zp)))}finally{await e.close()}}async function td(r,e){if(!e)throw new Ps("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(Zp,Kl(String(r))),await t.close()}var TT=Ze(Vo(),1),Jo=(0,TT.default)("ipfs:repo:migrator");function ZG(r){return r=r||zg,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function kT(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??zg;if(!r)throw new po.RequiredParameterError("Path argument is required!");if(!t)throw new po.RequiredParameterError("repoOptions argument is required!");if(!n)throw new po.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=Mx(e);let d=await Gx(e);if(d===n){Jo("Nothing to migrate.");return}if(d>n)throw new po.InvalidValueError(`Current repo's version (${d}) is higher then toVersion (${n}), you probably wanted to revert it?`);RT(f,d,n);let m;!c&&!o&&(m=await t.repoLock.lock(r));try{for(let w of f){if(n!==void 0&&w.version>n)break;if(!(w.version<=d)){Jo(`Migrating version ${w.version}`);try{if(!c){let x=()=>{};a&&(x=(T,F)=>a(w.version,T.toFixed(2),F)),await w.migrate(e,x)}}catch(x){let T=w.version-1;throw Jo(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${T}`),await td(T,e),new Error(`During migration to version ${w.version} exception was raised: ${x.stack||x.message||x}`)}Jo(`Migrating to version ${w.version} finished`)}}c||await td(n||ZG(f),e),Jo("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!c&&!o&&m&&await m.close()}}async function FT(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??zg;if(!r)throw new po.RequiredParameterError("Path argument is required!");if(!t)throw new po.RequiredParameterError("repoOptions argument is required!");if(!n)throw new po.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=Mx(e);let d=await Gx(e);if(d===n){Jo("Nothing to revert.");return}if(d<n)throw new po.InvalidValueError(`Current repo's version (${d}) is lower then toVersion (${n}), you probably wanted to migrate it?`);RT(f,n,d,!0);let m;!c&&!o&&(m=await t.repoLock.lock(r)),Jo(`Reverting from version ${d} to ${n}`);try{let w=f.slice().reverse();for(let x of w){if(x.version<=n)break;if(!(x.version>d)){Jo(`Reverting migration version ${x.version}`);try{if(!c){let T=()=>{};a&&(T=(F,N)=>a(x.version,F.toFixed(2),N)),await x.revert(e,T)}}catch(T){let F=x.version;throw Jo(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${F}`),await td(F,e),T.message=`During reversion to version ${x.version} exception was raised: ${T.message}`,T}Jo(`Reverting to version ${x.version} finished`)}}c||await td(n,e),Jo(`All migrations successfully reverted to version ${n}!`)}finally{!c&&!o&&m&&await m.close()}}function RT(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new po.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new po.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var po=Vx;var Jk=Ze(LT(),1);h();p();var WT=Ze(qT(),1),VT=WT.default;h();p();h();p();var ZT=Ze(Vo(),1);h();p();h();p();h();p();h();p();function Hg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function HT(r=0){return globalThis.Buffer?.allocUnsafe!=null?Hg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function YT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var GT=YT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Jx=YT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=HT(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),lY={utf8:GT,"utf-8":GT,hex:wn.base16,latin1:Jx,ascii:Jx,binary:Jx,...wn},Gg=lY;function Yl(r,e="utf8"){let t=Gg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function gu(r,e="utf8"){let t=Gg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Hg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();h();p();var qc=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=qc.code}};qc.code="ERR_LOCK_EXISTS";var Fi=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Fi.code}};Fi.code="ERR_NOT_FOUND";var Wc=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=Wc.code}};Wc.code="ERR_INVALID_REPO_VERSION";var rd="ERR_REPO_NOT_INITIALIZED",JT="ERR_REPO_ALREADY_OPEN",XT="ERR_REPO_ALREADY_CLOSED";async function Yg(r,e,t){let n=await e(r);if(n)return n;let i=QT(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function Jg(r,e,t,n){if(await t(r))return e(r);let i=QT(n);if(!i)throw new Fi;return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(new Fi)}})}function QT(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var pY=(0,ZT.default)("ipfs:repo:version"),Xx=new Je("version");function ek(r){return{async exists(){return Yg(Xx,r.has.bind(r),r)},async get(){let e=await Jg(Xx,r.get.bind(r),r.has.bind(r),r);return parseInt(Yl(e),10)},set(e){return r.put(Xx,gu(String(e)))},async check(e){let t=await this.get();return pY("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}h();p();h();p();var lk=Ze(rk(),1);h();p();var id=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Zx=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},nk=r=>globalThis.DOMException===void 0?new Zx(r):new DOMException(r),ik=r=>{let e=r.reason===void 0?nk("This operation was aborted."):r.reason;return e instanceof Error?e:nk(e)};function e1(r,e,t,n){let i,o=new Promise((a,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){a(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:f}=n;f.aborted&&c(ik(f)),f.addEventListener("abort",()=>{c(ik(f))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{a(t())}catch(m){c(m)}return}let f=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,d=t instanceof Error?t:new id(f);typeof r.cancel=="function"&&r.cancel(),c(d)},e),(async()=>{try{a(await r)}catch(f){c(f)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}h();p();h();p();function t1(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),a=n+o;t(r[a],e)<=0?(n=++a,i-=o+1):i=o}return n}var Vc=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ya,od=class{constructor(){ya.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&Vc(this,ya,"f")[this.size-1].priority>=t.priority){Vc(this,ya,"f").push(n);return}let i=t1(Vc(this,ya,"f"),n,(o,a)=>a.priority-o.priority);Vc(this,ya,"f").splice(i,0,n)}dequeue(){let e=Vc(this,ya,"f").shift();return e?.run}filter(e){return Vc(this,ya,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Vc(this,ya,"f").length}};ya=new WeakMap;var Er=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},We=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Kr,ad,ud,bu,n0,cd,Qg,Xo,sd,Ri,Zg,Bi,fd,wu,e0,ok,sk,fk,ak,uk,ck,t0,r1,n1,i0,r0,yY=new id,i1=class extends Error{},Ss=class extends lk.default{constructor(e){var t,n,i,o;if(super(),Kr.add(this),ad.set(this,void 0),ud.set(this,void 0),bu.set(this,0),n0.set(this,void 0),cd.set(this,void 0),Qg.set(this,0),Xo.set(this,void 0),sd.set(this,void 0),Ri.set(this,void 0),Zg.set(this,void 0),Bi.set(this,0),fd.set(this,void 0),wu.set(this,void 0),e0.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:od,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Er(this,ad,e.carryoverConcurrencyCount,"f"),Er(this,ud,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Er(this,n0,e.intervalCap,"f"),Er(this,cd,e.interval,"f"),Er(this,Ri,new e.queueClass,"f"),Er(this,Zg,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Er(this,e0,e.throwOnTimeout===!0,"f"),Er(this,wu,e.autoStart===!1,"f")}get concurrency(){return We(this,fd,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Er(this,fd,e,"f"),We(this,Kr,"m",i0).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var a,c,f;Er(this,Bi,(c=We(this,Bi,"f"),c++,c),"f"),Er(this,bu,(f=We(this,bu,"f"),f++,f),"f");try{if(!((a=t.signal)===null||a===void 0)&&a.aborted){i(new i1("The task was aborted."));return}let m=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):e1(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?We(this,e0,"f"):t.throwOnTimeout)&&i(yY)}));n(m),this.emit("completed",m)}catch(d){i(d),this.emit("error",d)}We(this,Kr,"m",fk).call(this)};We(this,Ri,"f").enqueue(o,t),We(this,Kr,"m",t0).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return We(this,wu,"f")?(Er(this,wu,!1,"f"),We(this,Kr,"m",i0).call(this),this):this}pause(){Er(this,wu,!0,"f")}clear(){Er(this,Ri,new(We(this,Zg,"f")),"f")}async onEmpty(){We(this,Ri,"f").size!==0&&await We(this,Kr,"m",r0).call(this,"empty")}async onSizeLessThan(e){We(this,Ri,"f").size<e||await We(this,Kr,"m",r0).call(this,"next",()=>We(this,Ri,"f").size<e)}async onIdle(){We(this,Bi,"f")===0&&We(this,Ri,"f").size===0||await We(this,Kr,"m",r0).call(this,"idle")}get size(){return We(this,Ri,"f").size}sizeBy(e){return We(this,Ri,"f").filter(e).length}get pending(){return We(this,Bi,"f")}get isPaused(){return We(this,wu,"f")}};ad=new WeakMap,ud=new WeakMap,bu=new WeakMap,n0=new WeakMap,cd=new WeakMap,Qg=new WeakMap,Xo=new WeakMap,sd=new WeakMap,Ri=new WeakMap,Zg=new WeakMap,Bi=new WeakMap,fd=new WeakMap,wu=new WeakMap,e0=new WeakMap,Kr=new WeakSet,ok=function(){return We(this,ud,"f")||We(this,bu,"f")<We(this,n0,"f")},sk=function(){return We(this,Bi,"f")<We(this,fd,"f")},fk=function(){var e;Er(this,Bi,(e=We(this,Bi,"f"),e--,e),"f"),We(this,Kr,"m",t0).call(this),this.emit("next")},ak=function(){this.emit("empty"),We(this,Bi,"f")===0&&this.emit("idle")},uk=function(){We(this,Kr,"m",n1).call(this),We(this,Kr,"m",r1).call(this),Er(this,sd,void 0,"f")},ck=function(){let e=Date.now();if(We(this,Xo,"f")===void 0){let t=We(this,Qg,"f")-e;if(t<0)Er(this,bu,We(this,ad,"f")?We(this,Bi,"f"):0,"f");else return We(this,sd,"f")===void 0&&Er(this,sd,setTimeout(()=>{We(this,Kr,"m",uk).call(this)},t),"f"),!0}return!1},t0=function(){if(We(this,Ri,"f").size===0)return We(this,Xo,"f")&&clearInterval(We(this,Xo,"f")),Er(this,Xo,void 0,"f"),We(this,Kr,"m",ak).call(this),!1;if(!We(this,wu,"f")){let e=!We(this,Kr,"a",ck);if(We(this,Kr,"a",ok)&&We(this,Kr,"a",sk)){let t=We(this,Ri,"f").dequeue();return t?(this.emit("active"),t(),e&&We(this,Kr,"m",r1).call(this),!0):!1}}return!1},r1=function(){We(this,ud,"f")||We(this,Xo,"f")!==void 0||(Er(this,Xo,setInterval(()=>{We(this,Kr,"m",n1).call(this)},We(this,cd,"f")),"f"),Er(this,Qg,Date.now()+We(this,cd,"f"),"f"))},n1=function(){We(this,bu,"f")===0&&We(this,Bi,"f")===0&&We(this,Xo,"f")&&(clearInterval(We(this,Xo,"f")),Er(this,Xo,void 0,"f")),Er(this,bu,We(this,ad,"f")?We(this,Bi,"f"):0,"f"),We(this,Kr,"m",i0).call(this)},i0=function(){for(;We(this,Kr,"m",t0).call(this););},r0=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};h();p();var pk=gY;function gY(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;hk(i);for(var o;o=n.shift();)if(hk(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function hk(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var o0=Ze(Wo(),1);var wY=Ss.default?Ss.default:Ss,o1=new Je("config");function dk(r){let e=new wY({concurrency:1}),t={async getAll(o={}){let a=await Jg(o1,r.get.bind(r),r.has.bind(r),r);return JSON.parse(Yl(a))},async get(o,a={}){if(o==null)throw new Fi(`Key ${o} does not exist in config`);let c=await this.getAll(a),f=Hp(c,o);if(f===void 0)throw new Fi(`Key ${o} does not exist in config`);return f},set(o,a,c={}){if(typeof o!="string"&&!(o instanceof String))throw(0,o0.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,o0.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:a},c.signal))},replace(o,a={}){if(!o||o instanceof Uint8Array)throw(0,o0.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},a.signal))},async exists(){return Yg(o1,r.has.bind(r),r)}};return t;async function n(o,a){if(a&&a.aborted)return;let c=o.key,f=o.value;if(c){let d=await t.getAll();return typeof d=="object"&&d!==null&&pk(d,c,f),i(d)}return i(f)}function i(o){let a=gu(JSON.stringify(o,null,2));return r.put(o1,a)}}h();p();h();p();h();p();h();p();function ld(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function s1(r,e={}){if(!ld(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],a=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m=[];return i.push(f),o.push(m),m.push(...f.map(w=>Array.isArray(w)?a(w):ld(w)?c(w):w)),m},c=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m={},w=Object.keys(f).sort(n);i.push(f),o.push(m);for(let x of w){let T=f[x],F;t&&Array.isArray(T)?F=a(T):F=t&&ld(T)?c(T):T,Object.defineProperty(m,x,{...Object.getOwnPropertyDescriptor(f,x),value:F})}return m};return Array.isArray(r)?t?a(r):r.slice():c(r)}var a1=new Je("datastore_spec");function mk(r){return{exists(){return r.has(a1)},async get(){let e=await r.get(a1);return JSON.parse(Yl(e))},async set(e){return r.put(a1,gu(JSON.stringify(s1(e,{deep:!0}))))}}}h();p();var u1=new Je("api");function yk(r){return{async get(){let e=await r.get(u1);return e&&e.toString()},set(e){return r.put(u1,gu(e.toString()))},delete(){return r.delete(u1)}}}h();p();h();p();async function*hd(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();h();p();var s0=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Jl=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new s0(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new s0(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Ds(r={}){return bY(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function bY(r,e){e=e??{};let t=e.onEnd,n=new Jl,i,o,a,c=async()=>n.isEmpty()?a?{done:!0}:await new Promise((N,ue)=>{o=pe=>{o=null,n.push(pe);try{N(r(n))}catch(De){ue(De)}return i}}):r(n),f=N=>o!=null?o(N):(n.push(N),i),d=N=>(n=new Jl,o!=null?o({error:N}):(n.push({error:N}),i)),m=N=>{if(a)return i;if(e?.objectMode!==!0&&N?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:N})},w=N=>a?i:(a=!0,N!=null?d(N):f({done:!0})),x=()=>(n=new Jl,w(),{done:!0}),T=N=>(w(N),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:x,throw:T,push:m,end:w,get readableLength(){return n.size}},t==null)return i;let F=i;return i={[Symbol.asyncIterator](){return this},next(){return F.next()},throw(N){return F.throw(N),t!=null&&(t(N),t=void 0),{done:!0}},return(){return F.return(),t!=null&&(t(),t=void 0),{done:!0}},push:m,end(N){return F.end(N),t!=null&&(t(N),t=void 0),i},get readableLength(){return F.readableLength}},i}h();p();async function c1(r){for await(let e of r);}var gk=Ze(Wo(),1);function wk(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=vu(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=vu(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=Ds({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await c1(r.putMany(async function*(){for await(let{key:o,value:a}of e)vu(o).isIdentity||(yield{key:o,value:a}),n.push({key:o,value:a})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=vu(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=vu(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany(hd(e,n=>!vu(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=vu(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=vu(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function vu(r){let e=we.asCID(r);if(e==null)throw(0,gk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Tl.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}h();p();h();p();var bk=Ze(Vo(),1),vk=(0,bk.default)("ipfs:repo:lock:memory"),_k="repo.lock",pd={};async function vY(r){let e=r+"/"+_k;if(vk("locking %s",e),pd[e]===!0)throw new qc(`Lock already being held for file: ${e}`);return pd[e]=!0,{async close(){pd[e]&&delete pd[e]}}}async function _Y(r){let e=r+"/"+_k;return vk(`checking lock: ${e}`),Boolean(pd[e])}var xk={lock:vY,locked:_Y};var Ek={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:xk};h();p();var f1={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};h();p();var Dk=Ze(Wo(),1),Ak=Ze(Vo(),1);h();p();async function a0(r){for await(let e of r)return e}h();p();function u0({enumerable:r=!0,configurable:e=!1}={}){return{enumerable:r,configurable:e,writable:!1}}function*xY(r,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t],o=we.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*l1(n,i))}else{let t=we.asCID(e);t?yield[r.join("/"),t]:yield*l1(e,r)}}function*l1(r,e){if(!(r==null||r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield*xY(i,n)}}function*EY(r,e){if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t];yield i.join("/"),typeof n=="object"&&!we.asCID(n)&&(yield*h1(n,i))}else yield*h1(e,r)}function*h1(r,e){if(!(r==null||typeof r!="object"))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!we.asCID(n)&&(yield*EY(i,n))}}function PY(r,e){let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let o=we.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}}var p1=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:u0(),bytes:u0(),value:u0(),asBlock:u0()})}links(){return l1(this.value,[])}tree(){return h1(this.value,[])}get(e="/"){return PY(this.value,e.split("/").filter(Boolean))}};function c0({bytes:r,cid:e,value:t,codec:n}){let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new p1({cid:e,bytes:r,value:i})}h();p();var Pk=Ze(Wo(),1);function dd(r){let e=we.asCID(r);if(e==null)throw(0,Pk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=Kt.encode(e.multihash.bytes);return new Je("/"+t.slice(1).toUpperCase(),!1)}function d1(r){return pn(Kt.decode(`b${r.toString().toLowerCase().substring(1)}`))}h();p();var Sk=Ze(Vo(),1);var SY=(0,Sk.default)("ipfs:repo:utils:walk-dag");async function*Xl(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),a=c0({bytes:i,cid:r,codec:o});for(let[,c]of a.links())yield c,yield*Xl(c,e,t,n)}catch(i){throw SY("Could not walk DAG for CID",r.toString(),i),i}}h();p();var ni={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};h();p();var md=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};var DY=2048;function AY(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,Dk.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var f0=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,Ak.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==mn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(dd(e),Ys(n))}unpin(e,t){return this.pinstore.delete(dd(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==mn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(dd(e),Ys(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>ro(n.value).depth===0]})){let n=ro(t.value),i=n.version||0,o=n.codec!=null?n.codec:mn,a=d1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>ro(n.value).depth===1/0]})){let n=ro(t.value),i=n.version||0,o=n.codec!=null?n.codec:mn,a=d1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of Xl(t,this.blockstore,this.loadCodec,e)){let i=[ni.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(ni.all),o=t.includes(ni.direct),a=t.includes(ni.recursive),c=t.includes(ni.indirect);if(a||o||i){let m=await a0(this.pinstore.query({prefix:dd(e).toString(),filters:[w=>{if(i)return!0;let x=ro(w.value);return t.includes(x.depth===0?ni.direct:ni.recursive)}],limit:1}));if(m){let w=ro(m.value);return{cid:e,pinned:!0,reason:w.depth===0?ni.direct:ni.recursive,metadata:w.metadata}}}let f=this;async function*d(m,w){for await(let{cid:x}of w)for await(let T of Xl(x,f.blockstore,f.loadCodec))if(T.equals(m)){yield x;return}}if(i||c){let m=await a0(d(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:ni.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let n=new md({maxSize:t.cidCacheMaxSize??DY}),i=async(o,a)=>{if(n.has(o.toString()))return;n.set(o.toString(),!0);let c=await this.blockstore.get(o,a),f=await this.loadCodec(o.code),d=c0({bytes:c,cid:o,codec:f});await Promise.all([...d.links()].map(([,m])=>i(m,a)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(ni).includes(e))throw AY(e);return!0}};h();p();h();p();async function*Hc(r,e){for await(let t of r)yield e(t)}var Ik=Ze(Wo(),1);function Tk(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await Ck(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany(Hc(t,async i=>(await Ck(i,r),i)),n)},batch(){return e.batch()}}}async function Ck(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,ni.all);if(t)throw(0,Ik.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}h();p();h();p();var m1=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},y1=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},kk=r=>globalThis.DOMException===void 0?new y1(r):new DOMException(r),Fk=r=>{let e=r.reason===void 0?kk("This operation was aborted."):r.reason;return e instanceof Error?e:kk(e)};function g1(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,a,c=new Promise((f,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){f(r);return}if(e.signal){let{signal:m}=e;m.aborted&&d(Fk(m)),m.addEventListener("abort",()=>{d(Fk(m))})}a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(x){d(x)}return}let m=typeof i=="string"?i:`Promise timed out after ${t} milliseconds`,w=i instanceof Error?i:new m1(m);typeof r.cancel=="function"&&r.cancel(),d(w)},t),(async()=>{try{f(await r)}catch(m){d(m)}finally{o.clearTimeout.call(void 0,a)}})()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}h();p();h();p();var w1="lock:worker:request-read",b1="lock:worker:release-read",v1="lock:master:grant-read",_1="lock:worker:request-write",x1="lock:worker:release-write",E1="lock:master:grant-write";h();p();var _u={},Ql=r=>{r.addEventListener("message",e=>{Ql.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{Ql.dispatchEvent("message",r,e)})};Ql.addEventListener=(r,e)=>{_u[r]==null&&(_u[r]=[]),_u[r].push(e)};Ql.removeEventListener=(r,e)=>{_u[r]!=null&&(_u[r]=_u[r].filter(t=>t===e))};Ql.dispatchEvent=function(r,e,t){_u[r]!=null&&_u[r].forEach(n=>n(e,t))};var P1=Ql;var Rk=(r,e,t,n,i)=>(o,a)=>{if(a.data.type!==t)return;let c={type:a.data.type,name:a.data.name,identifier:a.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(o.postMessage({type:i,name:c.name,identifier:c.identifier}),await new Promise(f=>{let d=m=>{if(m==null||m.data==null)return;let w={type:m.data.type,name:m.data.name,identifier:m.data.identifier};w.type===n&&w.identifier===c.identifier&&(o.removeEventListener("message",d),f())};o.addEventListener("message",d)}))}}))},Bk=(r,e,t,n)=>async()=>{let i=Pg();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let a=c=>{if(c==null||c.data==null)return;let f={type:c.data.type,identifier:c.data.identifier};f.type===t&&f.identifier===i&&(globalThis.removeEventListener("message",a),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",a)})},CY={singleProcess:!1},Ok=r=>{if(r=Object.assign({},CY,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return P1.addEventListener("message",Rk(t,"requestReadLock",w1,b1,v1)),P1.addEventListener("message",Rk(t,"requestWriteLock",_1,x1,E1)),t}return{isWorker:!0,readLock:t=>Bk(t,w1,v1,b1),writeLock:t=>Bk(t,_1,E1,x1)}};var Gc={},xu;async function S1(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await g1((async()=>await new Promise(i=>{t(()=>{i()})}))(),{milliseconds:e.timeout})),await n}var IY=(r,e)=>{if(xu.isWorker===!0)return{readLock:xu.readLock(r,e),writeLock:xu.writeLock(r,e)};let t=new Ss({concurrency:1}),n;return{async readLock(){if(n!=null)return await S1(n,e);n=new Ss({concurrency:e.concurrency,autoStart:!1});let i=n,o=S1(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await S1(t,e)}}},TY={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function D1(r){let e=Object.assign({},TY,r);return xu==null&&(xu=Ok(e),xu.isWorker!==!0&&(xu.addEventListener("requestReadLock",t=>{Gc[t.data.name]!=null&&Gc[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),xu.addEventListener("requestWriteLock",async t=>{Gc[t.data.name]!=null&&Gc[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),Gc[e.name]==null&&(Gc[e.name]=IY(e.name,e)),Gc[e.name]}h();p();var Vk=Ze(Vo(),1);h();p();h();p();async function*A1(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}async function*C1(r,e=1){for await(let t of A1(r,e)){let n=t.map(async i=>await i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}h();p();var qk=Ze(T1(),1),RY=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},Wk=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),k1=r=>r!=null&&typeof r.sink=="function"&&Wk(r.source),BY=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=Ds({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,qk.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function F1(r,...e){if(k1(r)){let n=r;r=()=>n.source}else if(Wk(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&k1(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)k1(t[n])&&(t[n]=BY(t[n]));return RY(...t)}h();p();async function*l0(...r){let e=Ds({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}}),yield*e}var yd=(0,Vk.default)("ipfs:repo:gc"),OY=Es().code,LY=256,NY=new Je("/local/filesroot");function Hk({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let a=Date.now();yd("Creating set of marked blocks");let c=await r.writeLock();try{let f=await UY({pins:e,blockstore:t,root:n,loadCodec:i}),d=t.queryKeys({});yield*MY({blockstore:t},f,d),yd(`Complete (${Date.now()-a}ms)`)}finally{c()}}return o}async function UY({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let c;try{c=await n.get(NY)}catch(d){if(d.code===OY){yd("No blocks in MFS");return}throw d}let f=we.decode(c);yield f,yield*Xl(f,e,t)}(),o=l0(Hc(r.recursiveKeys(),({cid:c})=>c),r.indirectKeys(),Hc(r.directKeys(),({cid:c})=>c),i),a=new Set;for await(let c of l0(o,i))a.add(Kt.encode(c.multihash.bytes));return a}async function*MY({blockstore:r},e,t){let n=0,i=0;yield*F1(C1(Hc(t,async a=>async function(){n++;try{let f=Kt.encode(a.multihash.bytes);if(e.has(f))return null;try{await r.delete(a),i++}catch(d){return{err:new Error(`Could not delete block with CID ${a}: ${d.message}`)}}return{cid:a}}catch(f){let d=`Could delete block with CID ${a}`;return yd(d,f),{err:new Error(d+`: ${f.message}`)}}}),LY),a=>hd(a,Boolean)),yd(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var ii=(0,Yk.default)("ipfs:repo"),KY=Number.MAX_SAFE_INTEGER,jY="repoAutoMigrate",B1=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=VT(Ek,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,a=n.pins;this.pins=new f0({pinstore:a,blockstore:o,loadCodec:t});let c=Tk(this.pins,o);this.blocks=wk(c),this.version=ek(this.root),this.config=dk(this.root),this.spec=mk(this.root),this.apiAddr=yk(this.root),this.gcLock=D1({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=Hk({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){ii("initializing at: %s",this.path),await this._openRoot(),await this.config.replace($Y(e)),await this.spec.set(zY(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Yc.default)(new Error("repo is already open"),JT);ii("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),ii("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Wc("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");ii("creating datastore"),await this.datastore.open(),ii("creating blocks"),await this.blocks.open(),ii("creating keystore"),await this.keys.open(),ii("creating pins"),await this.pins.pinstore.open(),this.closed=!1,ii("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){ii("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Yc.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){ii("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Yc.default)(new Error("repo is not initialized yet"),rd,{path:this.path}):t}if(!e)throw(0,Yc.default)(new Error("repo is not initialized yet"),rd,{path:this.path})}async close(){if(this.closed)throw(0,Yc.default)(new Error("repo is already closed"),XT);ii("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==rd&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),ii("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Gk(this.datastore),Gk(this.keys)]),a=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:a}}throw(0,Yc.default)(new Error("repo is not initialized yet"),rd,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(jY)}catch(t){if(t.code===Fi.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(ii(`reverting to version ${e}`),FT(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(ii(`migrating to version ${e}`),kT(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,Jk.default)(e))}catch{return BigInt(KY)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function Gk(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function Xk(r,e,t,n){return new B1(r,e,t,n)}function $Y(r){return r.Datastore=Object.assign({},f1,Hp(r,"datastore")),r}function zY(r){let e={...f1.Spec,...Hp(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}h();p();h();p();async function h0(r){for await(let e of r);}var iF=Ze(Wo(),1);h();p();var L1=Ze(p0(),1),Jc=Ze(d0(),1),N1=Ze(m0(),1),nF=Ze(O1(),1),rF=(r,e)=>async function*(){yield*(await(0,nF.default)(r)).sort(e)}(),y0=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,L1.default)(this.putMany(e,n)),e=[],await(0,L1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Jc.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Jc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>rF(i,o),n)),e.offset!=null){let i=0;n=(0,Jc.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,N1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Jc.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Jc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>rF(i,o),n)),e.offset!=null){let i=0;n=(0,Jc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,N1.default)(n,e.limit)),n}};function Zl(r){let e=we.asCID(r);if(!e)throw(0,iF.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Je("/"+Kt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function Eu(r){return we.createV1(hs,pn(Kt.decode("b"+r.toString().slice(1).toLowerCase())))}function U1(r){let e=r.substring(0,1);if(e==="/")return U1(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>Kt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>Hb.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>Tr.decode(o).subarray(2):e==="Q"?t=o=>Tr.decode("z"+o):t=o=>Kt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(a){if(a.message!=="Unexpected end of data")throw a}let i="/C";return n&&(i=`/${Kt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function GY(r){return{...r,prefix:r.prefix?U1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:Eu(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:Eu(t.key),value:t.value},{key:Eu(n.key),value:n.value})):void 0}}function YY(r){return{...r,prefix:r.prefix?U1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(Eu(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(Eu(t),Eu(n))):void 0}}var g0=class extends y0{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(GY(e),t))yield{key:Eu(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(YY(e),t))yield Eu(n)}async get(e,t){return this.child.get(Zl(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(Zl(e),t,n)}async*putMany(e,t){let n=Ds({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await h0(this.child.putMany(async function*(){for await(let a of e){let c=Zl(a.key);await o.has(c,t)||(yield{key:c,value:a.value}),n.push(a)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(Zl(e),t)}delete(e,t){return this.child.delete(Zl(e),t)}deleteMany(e,t){let n=Ds({objectMode:!0});return h0(this.child.deleteMany(async function*(){for await(let i of e)yield Zl(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};h();p();h();p();h();p();var oF=Ze(O1(),1),w0=(r,e)=>async function*(){yield*(await(0,oF.default)(r)).sort(e)}();var M1=Ze(p0(),1),Xc=Ze(d0(),1),K1=Ze(m0(),1),Qo=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,M1.default)(this.putMany(e,n)),e=[],await(0,M1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Xc.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Xc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>w0(i,o),n)),e.offset!=null){let i=0;n=(0,Xc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,K1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Xc.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Xc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>w0(i,o),n)),e.offset!=null){let i=0;n=(0,Xc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,K1.default)(n,e.limit)),n}};var gd=class extends Qo{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw Es();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Je(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Je(e))}};h();p();h();p();h();p();h();p();var sF="SHARDING",aF="_README";h();p();var ZY=Ze(cF(),1);h();p();var nSe=new Je(sF),iSe=new Je(aF);h();p();var eJ=Ze(d0(),1),tJ=Ze(m0(),1),rJ=Ze(T1(),1);h();p();h();p();var As=Ze(Vo(),1);As.default.formatters.b=r=>r==null?"undefined":Tr.baseEncode(r);As.default.formatters.t=r=>r==null?"undefined":Kt.baseEncode(r);As.default.formatters.m=r=>r==null?"undefined":Y_.baseEncode(r);As.default.formatters.p=r=>r==null?"undefined":r.toString();As.default.formatters.c=r=>r==null?"undefined":r.toString();As.default.formatters.k=r=>r==null?"undefined":r.toString();function lF(r){return Object.assign((0,As.default)(r),{error:(0,As.default)(`${r}:error`),trace:(0,As.default)(`${r}:trace`)})}var nJ=Ze(p0(),1),xSe=lF("datastore:core:tiered");h();p();h();p();async function*eh(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();async function*j1(r,e){for await(let t of r)yield e(t)}h();p();async function*b0(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}}h();p();h();p();async function $1(r){let e=[];for await(let t of r)e.push(t);return e}async function*v0(r,e){yield*(await $1(r)).sort(e)}var DR=Ze(SR(),1),pf=class extends Qo{constructor(e,t={}){super(),this.db=typeof e=="string"?new DR.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw ho.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw ho.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?ho.notFoundError(n):ho.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw ho.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>eh(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>v0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=eh(t,()=>o++>=n)}return i&&(t=b0(t,i)),t}queryKeys(e){let t=j1(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>eh(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>v0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=eh(t,()=>o++>=n)}return i&&(t=b0(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return cX(n);if(n.next!=null&&n.end!=null)return fX(n);throw new Error("Level returned incompatible iterator")}};async function*cX(r){for await(let[e,t]of r)yield{key:new Je(e,!1),value:t};await r.close()}function fX(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new Je(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}function AR(r){let e=new gd;return Xk(r,t=>{let n={[mn]:bi,[np]:bi,[Ha]:wi,[tp]:wi,[hs]:Ro,[ip]:Ro};return Promise.resolve(n[t])},{root:new pf(`${r}/root`,{prefix:"",version:2}),blocks:new g0(new pf(`${r}/blocks`,{prefix:"",version:2})),keys:new pf(`${r}/keys`,{prefix:"",version:2}),datastore:e,pins:new pf(`${r}/pins`,{prefix:"",version:2})},{repoLock:{lock:async()=>({close:async()=>{}}),locked:async()=>!1},autoMigrate:!1})}var BE={},hX=/^((?!chrome|android).)*safari/i.test(globalThis.navigator?.userAgent||""),FR=1*60*1e3,OE=5*60*1e3,LE={retryNumber:0,lastBackoff:0,currentBackoff:1e3},pX={config:{Addresses:{Delegates:[]},Bootstrap:[],Discovery:{webRTCStar:{Enabled:!1}},Pubsub:{Enabled:!1}},preload:{enabled:!1,addresses:[]},libp2p:{peerDiscovery:[],connectionManager:{autoDial:!1}},init:{algorithm:hX?i3:void 0,emptyRepo:!0}};async function RR(r,e,t,n,i){let o=await IR(r.storage,t);if(o.length===0)throw new Error("\u{1F4A5} Couldn't start IPFS node, peer list is empty");let a=AR(n),c=await e.create({...pX,repo:a});return o.forEach(f=>{BE[f.toString()]=null,kR(c,f,i)}),globalThis.addEventListener("online",async()=>{(await IR(r.storage,t)).filter(f=>{let d=f.toString();return!d.includes("/localhost/")&&!d.includes("/127.0.0.1/")&&!d.includes("/0.0.0.0/")}).forEach(f=>{kR(c,f,i)})}),i&&console.log("\u{1F680} Started IPFS node"),{ipfs:c,repo:a}}function CR(r){return fetch(r).then(e=>e.json()).then(e=>Array.isArray(e)?e:[]).then(e=>e.filter(t=>Ht(t)&&t.includes("/wss/"))).catch(()=>{throw new Error("\u{1F4A5} Couldn't start IPFS node, failed to fetch peer list")})}async function IR(r,e){let t,n=`ipfs-peers-${e}`,i=await r.getItem(n);return Ht(i)&&i.trim()!==""?(t=JSON.parse(i),CR(e).then(o=>r.setItem(n,JSON.stringify(o))).catch(o=>{console.error(o)})):(t=await CR(e),await r.setItem(n,JSON.stringify(t))),t.map($p)}function Ud(r,e,t,n){let i=null;t.currentBackoff<OE?i=setTimeout(()=>TR(r,e,t,n),t.currentBackoff):i=setTimeout(()=>TR(r,e,t,n),OE),BE[e.toString()]=i,BR(r,e).then(({latency:o})=>{let a={connected:!0,lastConnectedAt:Date.now(),latency:o};G0(e,a),i&&clearTimeout(i),i===BE[e.toString()]&&setTimeout(()=>Ud(r,e,LE,a),FR)}).catch(()=>{})}async function TR(r,e,t,n){let i={...n,connected:!1,latency:null};G0(e,i);try{await r.swarm.disconnect(e),await r.swarm.connect(e)}catch{}if(t.currentBackoff<OE){let o={retryNumber:t.retryNumber+1,lastBackoff:t.currentBackoff,currentBackoff:t.lastBackoff+t.currentBackoff};Ud(r,e,o,i)}else Ud(r,e,t,i)}function kR(r,e,t){BR(r,e).then(({latency:n})=>r.swarm.connect(e,{timeout:60*1e3}).then(()=>{t&&console.log(`\u{1FA90} Connected to ${e}`);let i={connected:!0,lastConnectedAt:Date.now(),latency:n};G0(e,i),setTimeout(()=>Ud(r,e,LE,i),FR)})).catch(()=>{t&&console.log(`\u{1FA93} Could not connect to ${e}`);let n={connected:!1,lastConnectedAt:null,latency:null};G0(e,n),Ud(r,e,LE,n)})}async function BR(r,e){return r.libp2p.ping(e).then(t=>({latency:t}))}var df=[],dX=!1;function G0(r,e){df=df.filter(a=>a.peer!==r).concat({peer:r,status:e});let t=df.every(a=>!a.status.connected),n=df.reduce((a,{status:c})=>a>=(c.lastConnectedAt||0)?a:c.lastConnectedAt||0,0),i=df.filter(a=>a.status.latency!==null),o=i.length>0?df.reduce((a,c)=>a+(c.status.latency||0),0)/i.length:null;dX&&(console.table(df),console.log("offline",t),console.log("last connected at",n===0?null:n),console.log("average latency",o))}var LR="https://unpkg.com/ipfs-core@0.17.0/dist/index.min.js",NR=(r,e,t,n,i)=>RR(r,e,t,n,i),UR=async r=>{if(!r)throw new Error("This function requires a URL to a CDN");return import(r).then(e=>self.IpfsCore)};h();p();async function MR(r){return{getBlock:async e=>{let{ipfs:t}=await r();return t.block.get(e)},getUnixDirectory:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.ls(e)){let{name:o="",cid:a,size:c,type:f}=i;n.push({name:o,cid:a,size:c,isFile:f!=="dir"})}return n},getUnixFile:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.cat(e))n.push(i);return Bh(n)},putBlock:async(e,t)=>{let{repo:n}=await r(),i=py(t),o=await qo.digest(e),a=we.createV1(i.code,o);return await n.blocks.put(a,e),a},putChunked:async e=>{let{ipfs:t}=await r();return{...await t.add(e,{cidVersion:1,hashAlg:"sha2-256",rawLeaves:!0,wrapWithDirectory:!1,preload:!1,pin:!1}),isFile:!0}},size:async e=>{let{ipfs:t}=await r();return(await t.files.stat(`/ipfs/${e}`)).cumulativeSize}}}async function Y0(r,e,t){let n=null;return MR(async()=>n||(n=await NR(r,await UR(LR),e,t,!1),n))}async function NE(r,e){return Y0(r,$o.server+"/ipfs/peers",e)}h();p();async function jR(r,e){return Y0(r,zo.server+"/ipfs/peers",e)}h();p();h();p();h();p();function $R(r){return({rootDID:e})=>`${r}/user/link/${e}`}h();p();var zR=async(r,e,t)=>{let{username:n,handleMessage:i}=t,o=await vX(r,n);if(!o)throw new Error(`Failed to lookup DID for ${n}`);let a=`deviceLink#${o}`;console.log("Opening channel",a);let c=new WebSocket(e({rootDID:o}));await _X(c),c.onmessage=i;let f=EX(c),d=xX(c);return{send:f,close:d}},vX=async(r,e)=>{let t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null));return t||new Promise((n,i)=>{let a=0,c=setInterval(async()=>{if(t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null)),!t&&a<10){a++;return}else!t&&a===10&&i("Failed to fetch root DID.");clearInterval(c),n(t)},1e3)})},_X=async r=>new Promise((e,t)=>{r.onopen=()=>e(),r.onerror=()=>t("Websocket channel could not be opened")}),xX=r=>function(){r&&r.close(1e3)},EX=r=>function(e){let t=typeof e=="string"?new TextEncoder().encode(e).buffer:e;r?.send(t)};h();p();h();p();var qR=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function WR(r,e,t){let n=rn(await Jr({audience:await bs(r),dependencies:e,issuer:await Gt(e.crypto)}));return{success:(await fetch(ei(r,"/user"),{method:"PUT",headers:{authorization:`Bearer ${n}`,"content-type":"application/json"},body:JSON.stringify(t)})).status<300}}async function VR(r,e){return!(await fetch(ei(r,`/user/data/${e}`))).ok}function HR(r){return!r.startsWith("-")&&!r.endsWith("-")&&!r.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(r)&&!qR.includes(r.toLowerCase())}function DX(r,e,t){return zR(e.reference,$R(`${r.server}${r.apiPath}`.replace(/^https?:\/\//,"wss://")),t)}var AX=async(r,e)=>VR(r,e),CX=async r=>HR(r),IX=async(r,e,t)=>{let{success:n}=await WR(r,e,t);return n?v_(e,{...t,type:Mo}):{success:!1}};function hh(r,e){let t=Qy(e);return{type:t.type,canDelegateAccount:t.canDelegateAccount,delegateAccount:t.delegateAccount,linkDevice:t.linkDevice,session:t.session,isUsernameValid:CX,createChannel:(...n)=>DX(r,e,...n),isUsernameAvailable:(...n)=>AX(r,...n),register:(...n)=>IX(r,e,...n)}}function GR(r){return hh($o,r)}h();p();function YR(r){return hh(zo,r)}h();p();h();p();h();p();async function FX(r,e){let t=await r.reference.didRoot.lookup(e);return await m_({crypto:r.crypto,accountDID:t})?w_(r,e):!1}async function RX(r,e,t){let n=await r.reference.didRoot.lookup(e),i=await m_({crypto:r.crypto,accountDID:n}),{token:o}=await b_(r,e,t);return{readKey:Ge(i,"base64pad"),ucan:o}}async function BX(r,e,t){if(!LX(t))throw new $r(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(t)}`);let{readKey:n,ucan:i}=t,o=Xn(i);if(await $a(r.crypto,o)){await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,i),await tu({accountDID:await r.reference.didRoot.lookup(e),crypto:r.crypto,readKey:sI(n)});let a=await Gt(r.crypto),c=await Jr({dependencies:r,potency:"APPEND",resource:"*",proof:i,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await r.reference.repositories.ucans.add(c)}else throw new $r(`Consumer received invalid link device response from producer. Given ucan is invalid: ${t.ucan}`);await Cc(r.storage,{type:Mo,username:e})}async function OX(r,e,t,n){if(e){if(!r.reference.repositories.ucans.find(c=>c.payload.exp<Date.now()+604800?!1:c.payload.ptc==="APPEND"&&c.payload.rsc==="*")){let c=await Gt(r.crypto),f=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN),d=await Jr({dependencies:r,potency:"APPEND",resource:"*",proof:f||void 0,lifetimeInSeconds:60*60*24*30*12*1e3,audience:c,issuer:c});await r.reference.repositories.ucans.add(d)}let o=t.fileSystem?.loadImmediately===!1?void 0:await Fp({config:t,dependencies:{crypto:r.crypto,depot:r.depot,manners:r.manners,reference:r.reference,storage:r.storage},eventEmitter:n.fileSystem,username:e});return new ca({crypto:r.crypto,fs:o,eventEmitter:n.session,storage:r.storage,type:Mo,username:e})}return null}function LX(r){return Ye(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}function JR(r){let e=Qy(r);return{type:e.type,session:OX,canDelegateAccount:(...t)=>FX(r,...t),delegateAccount:(...t)=>RX(r,...t),linkDevice:(...t)=>BX(r,...t),createChannel:e.createChannel,isUsernameValid:e.isUsernameValid,isUsernameAvailable:e.isUsernameAvailable,register:e.register}}function J0(r,e){let t=hh(r,e),n=JR(e);return{type:n.type,canDelegateAccount:n.canDelegateAccount,delegateAccount:n.delegateAccount,linkDevice:n.linkDevice,session:n.session,createChannel:t.createChannel,isUsernameValid:t.isUsernameValid,isUsernameAvailable:t.isUsernameAvailable,register:t.register}}function ME(r){return J0($o,r)}h();p();function QR(r){return J0(zo,r)}h();p();h();p();async function KX(r,e){let t=new URL(self.location.href),n=t.searchParams.get("username")??"";if(!n)return null;let i=await eB(()=>$X(r,e.crypto),{tries:20,timeout:6e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 60 seconds."}),o=await qX(e,i);if(!o)throw new Error("Failed to retrieve secrets from lobby url parameters");return t.searchParams.delete("authorised"),t.searchParams.delete("cancelled"),t.searchParams.delete("newUser"),t.searchParams.delete("username"),history.replaceState(null,document.title,t.toString()),{...o,username:n}}async function jX(r,e,t={}){let{permissions:n}=t,i=n?.app,o=n?.fs,a=n?.platform,c=n?.raw,f=n?.sharing,d=await To(e.crypto),m=await Gt(e.crypto),w=!1,x=t.returnUrl||window.location.href,T=[["didExchange",d],["didWrite",m],["redirectTo",x],["sdk",ec.toString()],["sharedRepo",w?"t":"f"],["sharing",f?"t":"f"]].concat(i?[["appFolder",`${i.creator}/${i.name}`]]:[],o?.private?o.private.map(F=>["privatePath",Cr(F,{absolute:!0})]):[],o?.public?o.public.map(F=>["publicPath",Cr(F,{absolute:!0})]):[],c?[["raw",Mb(JSON.stringify(c))]]:[],t.extraParams?Object.entries(t.extraParams):[]).concat((()=>{let F=a?.apps;switch(typeof F){case"string":return[["app",F]];case"object":return F.map(N=>["app",N]);default:return[]}})());window.location.href=r.lobby+"?"+T.map(([F,N])=>encodeURIComponent(F)+"="+encodeURIComponent(N)).join("&")}async function $X(r,e){let t=await To(e),n=await new Promise(i=>{let o=document.createElement("iframe");o.id="odd-secret-exchange",o.style.width="0",o.style.height="0",o.style.border="none",o.style.display="none",document.body.appendChild(o),o.onload=()=>{i(o)},o.src=`${r.lobby}/exchange.html`});return new Promise((i,o)=>{function a(){globalThis.removeEventListener("message",c),document.body.removeChild(n),o()}function c(d){if(new URL(d.origin).host!==new URL(r.lobby).host||d.data==null)return a();let m;try{m=JSON.parse(d.data)}catch{a()}zX(m)||a(),globalThis.removeEventListener("message",c);try{document.body.removeChild(n)}catch{}i(m)}if(globalThis.addEventListener("message",c),n.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let f={odd:"exchange-secrets",didExchange:t};n.contentWindow.postMessage(f,n.src)})}function zX(r){return Ye(r)&&Ht(r.sessionKey)&&Ht(r.secrets)&&Ht(r.iv)}function ZR(r){return Ye(r)&&Ye(r.fs)&&Object.values(r.fs).every(e=>ht(e,"key")&&ht(e,"bareNameFilter"))&&Array.isArray(r.ucans)&&r.ucans.every(e=>Ht(e))}async function qX({crypto:r},e){let t=await r.keystore.decrypt(Be(e.sessionKey,"base64pad")),i=t[1]===0?Be(new TextDecoder("utf-16").decode(t),"base64pad"):t,o=await r.aes.decrypt(Be(e.secrets,"base64pad"),i,$t.AES_GCM,Be(e.iv,"base64pad")),a=JSON.parse(Ge(o,"utf8"));if(!ZR(a))throw new Error("Invalid secrets received");let c=ZR(a)?Object.entries(a.fs).map(([d,{bareNameFilter:m,key:w}])=>({bareNameFilter:m,path:$h(d),readKey:Be(w,"base64pad")})):[],f=a.ucans.map(d=>Xn(d));return{fileSystemSecrets:c,ucans:f}}async function eB(r,e){return new Promise((t,n)=>{if(e.tries>0){let i=()=>{eB(r,{...e,tries:e.tries-1})},o=setTimeout(i,e.timeout);r().then(t,i).finally(()=>clearTimeout(o))}else n(new Error(e.timeoutMessage))})}function X0(r,e){return{collect:()=>KX(r,e),request:(...t)=>jX(r,e,...t)}}function KE(r){return X0($o,r)}h();p();function rB(r){return X0(zo,r)}h();p();h();p();h();p();h();p();function nB({storage:r}){return jE.create({storage:r,storageName:r.KEYS.CID_LOG})}var jE=class extends rc{constructor(e){super(e)}fromJSON(e){return Ue(e)}toJSON(e){return e.toString()}indexOf(e){return this.memoryCache.map(t=>t.toString()).indexOf(e.toString())}newest(){return this.memoryCache[this.memoryCache.length-1]}};async function GX(r,e){let t=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);return t?za(t):await Gt(r.crypto)}async function iB(r){return{dataRoot:{domain:()=>{throw new Error("Not implemented")},lookup:()=>{throw new Error("Not implemented")},update:()=>{throw new Error("Not implemented")}},didRoot:{lookup:(...e)=>GX(r,...e)},dns:{lookupDnsLink:pg,lookupTxtRecord:Rc},repositories:{cidLog:await nB({storage:r.storage}),ucans:await y2({storage:r.storage})}}}h();p();async function oB(r,e,t){let n=await JX(r,e,t);if(!n)return null;if(n!==null)return n;try{let i=await pg(t+".files."+r.userDomain);return i?Ue(i):null}catch(i){throw console.error(i),new Error("Could not locate user root in DNS")}}async function JX(r,e,t){try{let i=await(await fetch(ei(r,`user/data/${t}`),{cache:"reload"})).json();return Ue(i)}catch(n){return e.manners.log("Could not locate user root on Fission server: ",ht(n,"toString")?n.toString():n),null}}async function sB(r,e,t,n){let i=t.toString();return e.manners.log("\u{1F30A} Updating your DNSLink:",i),await aB(ei(r,`user/data/${i}`),{headers:async()=>({authorization:`Bearer ${rn(await Jr({dependencies:e,audience:await bs(r),issuer:await Gt(e.crypto),potency:"APPEND",proof:rn(n),resource:n.payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(o=>(o.status<300?e.manners.log("\u{1FAB4} DNSLink updated:",i):e.manners.log("\u{1F525} Failed to update DNSLink for:",i),{success:o.status<300})).catch(o=>(e.manners.log("\u{1F525} Failed to update DNSLink for:",i),console.error(o),{success:!1}))}async function aB(r,e,t,n=0){let i=await e.headers(),o=await fetch(r,{...t,headers:{...t.headers,...i}});if(e.retryOn.includes(o.status)){if(n<e.retries)return await new Promise((a,c)=>setTimeout(()=>aB(r,e,t,n+1).then(a,c),e.retryDelay));throw new Error("Too many retries for fetch")}return o}h();p();async function uB(r,e){try{let t=await Rc(`_did.${e}.${r.userDomain}`);if(t!==null)return t}catch{}throw new Error("Could not locate user DID in DNS.")}async function Q0(r,e){let t=await iB(e);return t.dataRoot.domain=n=>`${n}.files.${r.userDomain}`,t.dataRoot.lookup=(...n)=>oB(r,e,...n),t.dataRoot.update=(...n)=>sB(r,e,...n),t.didRoot.lookup=(...n)=>uB(r,...n),t}function $E(r){return Q0($o,r)}h();p();function fB(r){return Q0(zo,r)}h();p();async function tQ(r,e){return r[e]}async function rQ(r,e,t){return r[e]=t,t}async function nQ(r,e){delete r[e]}async function iQ(r){for(let e in r)delete r[e]}function lB(){let r={};return{KEYS:hg,getItem:(...e)=>tQ(r,...e),setItem:(...e)=>rQ(r,...e),removeItem:(...e)=>nQ(r,...e),clear:(...e)=>iQ(r,...e)}}h();p();function hB(r){return{log:r.configuration.debug?console.log:()=>{},warn:r.configuration.debug?console.warn:()=>{},wnfsWasmLookup:e=>fetch(`https://unpkg.com/wnfs@${e}/wasm_wnfs_bg.wasm`),fileSystem:{hooks:{afterLoadExisting:async()=>{},afterLoadNew:async e=>{await e.publish()},beforeLoadExisting:async()=>{},beforeLoadNew:async()=>{}}}}}h();p();h();p();var aQ={};h();p();var uQ={};h();p();var cQ={};h();p();var fQ={};h();p();var lQ={};h();p();var hQ={};h();p();var pB={};Et(pB,{create:()=>dQ,deleteByDomain:()=>mQ,index:()=>pQ,publish:()=>yQ});h();p();async function pQ(r,e){let t=await e.reference.repositories.ucans.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let n=rn(await Jr({dependencies:e,audience:await bs(r),issuer:await Gt(e.crypto),proof:t,potency:null})),o=await(await fetch(ei(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${n}`}})).json();return Object.values(o).filter(a=>a.urls.length>0).map(({urls:a,insertedAt:c,modifiedAt:f})=>({domains:a,insertedAt:c,modifiedAt:f}))}async function dQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan("*");if(n===null)throw"Could not find your local UCAN";let i=rn(await Jr({dependencies:e,audience:await bs(r),issuer:await Gt(e.crypto),proof:n,potency:null})),o=Ht(t)?ei(r,`/app?subdomain=${encodeURIComponent(t)}`):ei(r,"/app"),c=await(await fetch(o,{method:"POST",headers:{authorization:`Bearer ${i}`}})).json(),f=new Date().toISOString();return{domains:[c],insertedAt:f,modifiedAt:f}}async function mQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan(t);if(n===null)throw new Error("Could not find your local UCAN");let i=rn(await Jr({dependencies:e,audience:await bs(r),issuer:await Gt(e.crypto),proof:n,potency:null})),a=await(await fetch(ei(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${i}`}})).json(),c=Object.entries(a).find(([f,d])=>d.urls.includes(t));if(c==null)throw new Error(`Couldn't find an app with domain ${t}`);await fetch(ei(r,`/app/${encodeURIComponent(c[0])}`),{method:"DELETE",headers:{authorization:`Bearer ${i}`}})}async function yQ(r,e,t,n){let i=await e.reference.repositories.ucans.lookupAppUcan(t);if(i===null)throw"Could not find your local UCAN";let o=rn(await Jr({dependencies:e,audience:await bs(r),issuer:await Gt(e.crypto),proof:i,potency:null})),a=ei(r,`/app/${t}/${n}`);await fetch(a,{method:"PUT",headers:{authorization:`Bearer ${o}`}})}var gQ=(t=>(t.InsecureContext="INSECURE_CONTEXT",t.UnsupportedBrowser="UNSUPPORTED_BROWSER",t))(gQ||{});async function f8e(r){if(!r)throw new Error("Expected a settings object of the type `Partial<Components> & Configuration` as the first parameter");if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await AQ()===!1)throw"UNSUPPORTED_BROWSER";let e=await EQ(r);return xQ(yB(r),e)}var wQ={async fissionWebCrypto(r){let{disableWnfs:e,staging:t}=r,n=r.manners||Md(r),i=r.crypto||await dh(r),o=r.storage||mh(r),a=r.reference||await mB({crypto:i,manners:n,storage:o});return e?t?YR({crypto:i,reference:a,storage:o}):GR({crypto:i,reference:a,storage:o}):t?QR({crypto:i,reference:a,storage:o}):ME({crypto:i,reference:a,storage:o})}},bQ={async fissionLobby(r){let{staging:e}=r,t=r.crypto||await dh(r);return e?rB({crypto:t}):KE({crypto:t})}},l8e={browser(r){return dh(r)}},vQ={async fissionIPFS(r){let e=`${vl(r)}/ipfs`,t=r.storage||mh(r);return r.staging?jR({storage:t},e):NE({storage:t},e)}},h8e={default(r){return Md(r)}},_Q={async fission(r){let{staging:e}=r,t=r.manners||Md(r),n=r.crypto||await dh(r),i=r.storage||mh(r);return e?fB({crypto:n,manners:t,storage:i}):$E({crypto:n,manners:t,storage:i})}},p8e={browser(r){return mh(r)},memory(){return lB()}};async function xQ(r,e){let t=r.permissions;await CQ(e,r);let n=ey(),i=ey(),o=E2(n,i),a=await y_(e.storage),c=(x=>({implementation:x,accountConsumer(T){return __({auth:x,crypto:e.crypto,manners:e.manners},{username:T})},accountProducer(T){return x_({auth:x,crypto:e.crypto,manners:e.manners},{username:T})},isUsernameAvailable:x.isUsernameAvailable,isUsernameValid:x.isUsernameValid,register:x.register,async session(){let T=await y_(e.storage);return T?this.implementation.session(e,T.username,r,{fileSystem:n,session:i}):null}}))(e.auth),f={async collect(){let x=await e.capabilities.collect();return x?(await b2({capabilities:x,crypto:e.crypto,reference:e.reference,storage:e.storage}),x.username):null},request(x){return e.capabilities.request({permissions:t,...x||{}})},async session(x){if(!v2(e.reference.repositories.ucans,t||{}))return console.warn("The present UCANs did not satisfy the configured permissions."),null;let F=await e.reference.didRoot.lookup(x);if(!await _2(e.crypto,F,t||{}))return console.warn("The present filesystem secrets did not satisfy the configured permissions."),null;await Cc(e.storage,{type:$f,username:x});let ue=r.fileSystem?.loadImmediately===!1?void 0:await Fp({config:r,dependencies:e,eventEmitter:n,username:x});return new ca({fs:ue,username:x,crypto:e.crypto,storage:e.storage,type:$f,eventEmitter:i})}},d=null;if(gB(r)){let x=await f.collect();x&&(d=await f.session(x)),a&&a.type===$f&&(d=await f.session(a.username))}else a&&a.type!==$f&&(d=await c.session());let w={...{accountDID:x=>e.reference.didRoot.lookup(x),agentDID:()=>Gt(e.crypto),sharingDID:()=>To(e.crypto),fileSystem:{addPublicExchangeKey:x=>iI(e.crypto,x),addSampleData:x=>nI(x),hasPublicExchangeKey:x=>oI(e.crypto,x),load:x=>Fp({config:r,username:x,dependencies:e,eventEmitter:n}),recover:x=>AI({auth:c,dependencies:e,...x})}},...x2(o),configuration:{...r},auth:c,components:e,capabilities:f,session:d};if(r.debug){if(r.debugging?.injectIntoGlobalContext===void 0?!0:r.debugging?.injectIntoGlobalContext){let F=globalThis;F.__odd=F.__odd||{},F.__odd.programs=F.__odd.programs||{},F.__odd.programs[vl(r)]=w}if(r.debugging?.emitWindowPostMessages===void 0?!0:r.debugging?.emitWindowPostMessages){let{connect:F,disconnect:N}=await P2({namespace:r.namespace,session:d,capabilities:r.permissions,dependencies:e,eventEmitters:{fileSystem:n,session:i}}),ue=globalThis;ue.__odd=ue.__odd||{},ue.__odd.extension=ue.__odd.extension||{},ue.__odd.extension.connect=F,ue.__odd.extension.disconnect=N,globalThis.postMessage({id:"odd-devtools-ready-message"})}}return w}var d8e={async fission(r){let e=r.crypto||await dh(r),t=r.manners||Md(r),n=r.storage||mh(r),i={...r,crypto:e,manners:t,storage:n},o=await _Q.fission(i),a=await vQ.fissionIPFS(i),c=await bQ.fissionLobby(i);return{auth:await wQ.fissionWebCrypto({...i,reference:o}),capabilities:c,depot:a,reference:o,crypto:e,manners:t,storage:n}}};async function EQ(r){let e=yB(r),t=r.crypto||await dh(e),n=r.manners||Md(e),i=r.storage||mh(e),o=r.reference||await mB({crypto:t,manners:n,storage:i}),a=r.depot||await DQ({storage:i},e),c=r.capabilities||SQ({crypto:t});return{auth:r.auth||PQ({crypto:t,reference:o,storage:i}),capabilities:c,crypto:t,depot:a,manners:n,reference:o,storage:i}}function PQ({crypto:r,reference:e,storage:t}){return ME({crypto:r,reference:e,storage:t})}function SQ({crypto:r}){return KE({crypto:r})}function dh(r){return e3({storeName:vl(r),exchangeKeyName:"exchange-key",writeKeyName:"write-key"})}function DQ({storage:r},e){return NE({storage:r},`${vl(e)}/ipfs`)}function Md(r){return hB({configuration:r})}function mB({crypto:r,manners:e,storage:t}){return $E({crypto:r,manners:e,storage:t})}function mh(r){return r3({name:vl(r)})}async function AQ(){return zE.default.supports(zE.default.INDEXEDDB)&&await(()=>new Promise(r=>{let e=indexedDB.open("testDatabase");e.onsuccess=()=>r(!0),e.onerror=()=>r(!1)}))()}async function CQ(r,e){let[t,n]=["migrated",ec],i=Ec(ec);if(!i)throw new Error("The ODD SDK VERSION should be a semver string");if(await r.storage.getItem(t).then(d=>typeof d=="string"?Ec(d):null).then(d=>d&&J8(d,i))||!globalThis.indexedDB)return;let a=globalThis.indexedDB.databases?(await globalThis.indexedDB.databases()).map(d=>d.name):["keystore","localforage"],c=a.includes("keystore")?await dB("keystore"):null;if(c){let d=await ph(c,"keyvaluepairs","exchange-key"),m=await ph(c,"keyvaluepairs","write-key");d&&m&&(await r.storage.setItem("exchange-key",d),await r.storage.setItem("write-key",m))}let f=a.includes("localforage")?await dB("localforage"):null;if(f){let d=await ph(f,"keyvaluepairs","ucan"),m=await ph(f,"keyvaluepairs","webnative.auth_ucans"),w=await ph(f,"keyvaluepairs","readKey"),x=await ph(f,"keyvaluepairs","webnative.auth_username");if(w&&Ht(w)){let T=d||(Array.isArray(m)?m[0]:void 0),F=T?za(T):typeof x=="string"?await r.reference.didRoot.lookup(x):null;if(!F)throw new Error("Failed to retrieve account DID");await tu({accountDID:F,crypto:r.crypto,readKey:Be(w,"base64pad")})}d&&await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,d),x&&await r.storage.setItem(r.storage.KEYS.SESSION,JSON.stringify({type:gB(e)?$f:Mo,username:x}))}await r.storage.setItem(t,n)}function ph(r,e,t){return new Promise((n,i)=>{if(!r.objectStoreNames.contains(e))return n(null);let c=r.transaction([e],"readonly").objectStore(e).get(t);c.onerror=()=>{n(null)},c.onsuccess=()=>{n(c.result)}})}function dB(r){return new Promise((e,t)=>{let n=globalThis.indexedDB.open(r);n.onerror=()=>{e(null)},n.onsuccess=()=>{e(n.result)},n.onupgradeneeded=i=>{n.transaction?.abort(),globalThis.indexedDB.deleteDatabase(r)}})}function yB(r){return{namespace:r.namespace,debug:r.debug,fileSystem:r.fileSystem,permissions:r.permissions,userMessages:r.userMessages}}function gB(r){return!!r.permissions}export{aQ as Auth,we as CID,uQ as Capabilities,sp as Crypto,cQ as Depot,Xb as EMPTY_CID,Tc as FileSystem,fQ as Manners,gQ as ProgramError,Vm as ROOT_FILESYSTEM_PERMISSIONS,lQ as Reference,ca as Session,hQ as Storage,ec as VERSION,p2 as WASM_WNFS_VERSION,tfe as addRootFileSystemPermissions,VD as appId,pB as apps,xQ as assemble,wQ as auth,bQ as capabilities,d8e as compositions,l8e as crypto,Ue as decodeCID,PQ as defaultAuthComponent,SQ as defaultCapabilitiesComponent,dh as defaultCryptoComponent,DQ as defaultDepotComponent,Md as defaultMannersComponent,mB as defaultReferenceComponent,mh as defaultStorageComponent,vQ as depot,Bn as did,pi as encodeCID,yB as extractConfig,jn as fission,EQ as gatherComponents,gB as isCapabilityBasedAuthConfiguration,AQ as isSupported,h8e as manners,vl as namespace,Rn as path,Hm as permissionPaths,f8e as program,_Q as reference,p8e as storage,En as ucan};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
//# sourceMappingURL=index.js.map
